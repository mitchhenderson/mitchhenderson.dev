<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Mitch Henderson">
<meta name="dcterms.date" content="2026-01-02">
<meta name="description" content="Use more of the information you have.">

<title>Making 1 rep max estimates more accurate and honest – mitchhenderson.dev</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-f9e6e4d29af3f5f6ee06eaf03ed5edd8.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="floating nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">mitchhenderson.dev</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> <i class="bi bi-file-person" role="img">
</i> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../posts.html"> <i class="bi bi-file-text" role="img">
</i> 
<span class="menu-text">Posts</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default toc-left page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <div class="quarto-title-block"><div><h1 class="title">Making 1 rep max estimates more accurate and honest</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
                  <div>
        <div class="description">
          <p>Use more of the information you have.</p>
        </div>
      </div>
                </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Mitch Henderson </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">January 2, 2026</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#the-problem" id="toc-the-problem" class="nav-link active" data-scroll-target="#the-problem">The problem</a></li>
  <li><a href="#my-solution" id="toc-my-solution" class="nav-link" data-scroll-target="#my-solution">My solution</a>
  <ul class="collapse">
  <li><a href="#simulate-data" id="toc-simulate-data" class="nav-link" data-scroll-target="#simulate-data">Simulate data</a></li>
  <li><a href="#the-model" id="toc-the-model" class="nav-link" data-scroll-target="#the-model">The model</a></li>
  </ul></li>
  <li><a href="#how-accurate-is-it" id="toc-how-accurate-is-it" class="nav-link" data-scroll-target="#how-accurate-is-it">How accurate is it?</a></li>
  <li><a href="#what-has-the-model-learned-about-the-athletes" id="toc-what-has-the-model-learned-about-the-athletes" class="nav-link" data-scroll-target="#what-has-the-model-learned-about-the-athletes">What has the model learned about the athletes?</a></li>
  <li><a href="#how-much-does-having-historical-training-data-help" id="toc-how-much-does-having-historical-training-data-help" class="nav-link" data-scroll-target="#how-much-does-having-historical-training-data-help">How much does having historical training data help?</a></li>
  <li><a href="#how-much-accuracy-do-you-lose-with-higher-rep-sets" id="toc-how-much-accuracy-do-you-lose-with-higher-rep-sets" class="nav-link" data-scroll-target="#how-much-accuracy-do-you-lose-with-higher-rep-sets">How much accuracy do you lose with higher rep sets?</a></li>
  <li><a href="#integrating-this" id="toc-integrating-this" class="nav-link" data-scroll-target="#integrating-this">Integrating this</a></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion">Conclusion</a></li>
  </ul>
</nav>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
tl;dr
</div>
</div>
<div class="callout-body-container callout-body">
<p>You can get more accurate 1RM estimates by using a statistical model that accounts for differences between athletes. They can also tell you how certain their estimate are (which matters).</p>
</div>
</div>
<p><br></p>
<p><a href="https://en.wikipedia.org/wiki/Strength_and_conditioning_coach">S&amp;C coaches</a> collect training data to monitor progress and evaluate the effectiveness of their programming. A common method in strength training is to calculate an <a href="https://en.wikipedia.org/wiki/One-repetition_maximum#Estimating_1RM"><strong>estimated one repetition maximum</strong></a> (or e1RM) using a <a href="https://maxcalculator.com/guides/1rm-formulas">formula</a> and track how it changes over time. Lots of coaches are happy to use e1RM as a progress indicator instead of testing a true 1RM during a program or in-season because they don’t negatively impact training (integrates into existing training sessions), are safer (lower weight), and data can be collected more frequently (faster program refinements). <a href="https://en.wikipedia.org/wiki/One-repetition_maximum#Measuring_1RM">True 1RM</a> testing might only be programmed a handful of times per season (if at all) so using training data to regularly estimate strength increases or detect when a program should be adjusted is a good idea.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true"><img src="../..\img/Rlogo.svg" height="25"></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false"><img src="../..\img/python-logo-only.svg" height="30"></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gganimate)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(scales)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggtext)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gt)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gtExtras)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(geomtextpath)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(brms)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidybayes)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggdist)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(colorspace)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>mitchhenderson<span class="sc">::</span><span class="fu">font_hoist</span>(<span class="st">"Myriad Pro"</span>)</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>socials <span class="ot">&lt;-</span> mitchhenderson<span class="sc">::</span><span class="fu">social_caption</span>(<span class="at">icon_colour =</span> <span class="st">"dodgerblue"</span>)</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>units <span class="ot">&lt;-</span> <span class="st">"kg"</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>colours <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"#E31937"</span>, <span class="st">"#134A8E"</span>, <span class="st">"#16A34A"</span>)</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="fu">theme_set</span>(</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>(<span class="at">base_size =</span> <span class="dv">16</span>, <span class="at">base_family =</span> <span class="st">"Myriad Pro Regular"</span>) <span class="sc">+</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>      <span class="at">plot.title =</span> <span class="fu">element_markdown</span>(<span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>      <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>, <span class="at">color =</span> <span class="st">"grey40"</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>      <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>, <span class="at">color =</span> <span class="st">"grey40"</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>      <span class="at">plot.caption =</span> <span class="fu">element_markdown</span>(<span class="at">color =</span> <span class="st">"grey50"</span>, <span class="at">size =</span> <span class="dv">10</span>),</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>      <span class="at">axis.ticks =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>      <span class="at">axis.line =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">"grey50"</span>),</span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>      <span class="at">plot.title.position =</span> <span class="st">"plot"</span></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Python code outputs will differ from rendered results
</div>
</div>
<div class="callout-body-container callout-body">
<p>The visualisations and tables on this page are generated from the R code. Running the Python code will produce the equivalent analyses but with different styling (e.g.&nbsp;fonts, themes, annotations) because Python uses different plotting and table libraries. The analytical conclusions are the same though.</p>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> polars <span class="im">as</span> pl</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.animation <span class="im">as</span> animation</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> plotnine <span class="im">import</span> <span class="op">*</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> great_tables <span class="im">import</span> GT, style, loc</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pymc <span class="im">as</span> pm</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> arviz <span class="im">as</span> az</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> polars.selectors <span class="im">as</span> cs</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>units <span class="op">=</span> <span class="st">"kg"</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>colours <span class="op">=</span> [<span class="st">"#E31937"</span>, <span class="st">"#134A8E"</span>, <span class="st">"#16A34A"</span>]</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>theme_set(</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>    theme_classic(base_size<span class="op">=</span><span class="dv">14</span>)</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> theme(</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>        plot_title<span class="op">=</span>element_text(weight<span class="op">=</span><span class="st">"bold"</span>),</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>        plot_subtitle<span class="op">=</span>element_text(size<span class="op">=</span><span class="dv">12</span>, color<span class="op">=</span><span class="st">"grey"</span>),</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>        axis_title_x<span class="op">=</span>element_text(size<span class="op">=</span><span class="dv">12</span>, color<span class="op">=</span><span class="st">"grey"</span>),</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>        axis_ticks<span class="op">=</span>element_blank(),</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>        axis_line<span class="op">=</span>element_line(colour<span class="op">=</span><span class="st">"grey"</span>),</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
<section id="the-problem" class="level2">
<h2 class="anchored" data-anchor-id="the-problem">The problem</h2>
<p>There are <a href="https://maxcalculator.com/guides/1rm-formulas">lots of different formulas out there to estimate a 1RM</a>.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true"><img src="../..\img/Rlogo.svg" height="25"></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false"><img src="../..\img/python-logo-only.svg" height="30"></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>formulas <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">Epley =</span> <span class="cf">function</span>(reps) {</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    <span class="dv">100</span> <span class="sc">/</span> (<span class="dv">1</span> <span class="sc">+</span> reps <span class="sc">/</span> <span class="dv">30</span>)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  },</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">Brzycki =</span> <span class="cf">function</span>(reps) {</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    <span class="dv">100</span> <span class="sc">*</span> (<span class="dv">37</span> <span class="sc">-</span> reps) <span class="sc">/</span> <span class="dv">36</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  },</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">Mayhew =</span> <span class="cf">function</span>(reps) {</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>    <span class="fl">52.2</span> <span class="sc">+</span> <span class="fl">41.9</span> <span class="sc">*</span> <span class="fu">exp</span>(<span class="sc">-</span><span class="fl">0.055</span> <span class="sc">*</span> reps)</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>  },</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">Lombardi =</span> <span class="cf">function</span>(reps) {</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>    <span class="dv">100</span> <span class="sc">/</span> (reps<span class="sc">^</span><span class="fl">0.10</span>)</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>  },</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">O'Conner</span><span class="st">`</span> <span class="ot">=</span> <span class="cf">function</span>(reps) {</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>    <span class="dv">100</span> <span class="sc">/</span> (<span class="dv">1</span> <span class="sc">+</span> reps <span class="sc">/</span> <span class="dv">40</span>)</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>  },</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">Wathan =</span> <span class="cf">function</span>(reps) {</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>    <span class="fl">48.8</span> <span class="sc">+</span> <span class="fl">53.8</span> <span class="sc">*</span> <span class="fu">exp</span>(<span class="sc">-</span><span class="fl">0.075</span> <span class="sc">*</span> reps)</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>  },</span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">Lander =</span> <span class="cf">function</span>(reps) {</span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>    <span class="fl">101.3</span> <span class="sc">-</span> <span class="fl">2.67123</span> <span class="sc">*</span> reps</span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>reps_range <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">20</span></span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a>e1rm_data <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">reps =</span> reps_range) <span class="sc">|&gt;</span></span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">crossing</span>(<span class="at">formula =</span> <span class="fu">names</span>(formulas)) <span class="sc">|&gt;</span></span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">percent_1rm =</span> <span class="fu">map2_dbl</span>(formula, reps, <span class="sc">~</span> formulas[[.x]](.y))</span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a>e1rm_data_animated <span class="ot">&lt;-</span> e1rm_data <span class="sc">|&gt;</span></span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">crossing</span>(<span class="at">highlight =</span> <span class="fu">unique</span>(e1rm_data<span class="sc">$</span>formula)) <span class="sc">|&gt;</span></span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">is_highlighted =</span> formula <span class="sc">==</span> highlight,</span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">line_color =</span> <span class="fu">if_else</span>(is_highlighted, <span class="st">"highlighted"</span>, <span class="st">"grey"</span>),</span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="fu">if_else</span>(is_highlighted <span class="sc">&amp;</span> reps <span class="sc">==</span> <span class="fu">max</span>(reps), formula, <span class="cn">NA_character_</span>),</span>
<span id="cb3-39"><a href="#cb3-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">line_size =</span> <span class="fu">if_else</span>(is_highlighted, <span class="dv">2</span>, <span class="fl">0.5</span>)</span>
<span id="cb3-40"><a href="#cb3-40" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb3-41"><a href="#cb3-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-42"><a href="#cb3-42" aria-hidden="true" tabindex="-1"></a>animated_plot <span class="ot">&lt;-</span> e1rm_data_animated <span class="sc">|&gt;</span></span>
<span id="cb3-43"><a href="#cb3-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> reps, <span class="at">y =</span> percent_1rm, <span class="at">group =</span> formula)) <span class="sc">+</span></span>
<span id="cb3-44"><a href="#cb3-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">20</span>), <span class="at">clip =</span> <span class="st">"off"</span>) <span class="sc">+</span></span>
<span id="cb3-45"><a href="#cb3-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(</span>
<span id="cb3-46"><a href="#cb3-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> e1rm_data_animated <span class="sc">|&gt;</span> <span class="fu">filter</span>(<span class="sc">!</span>is_highlighted),</span>
<span id="cb3-47"><a href="#cb3-47" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">linewidth =</span> line_size),</span>
<span id="cb3-48"><a href="#cb3-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">colour =</span> <span class="st">"grey70"</span></span>
<span id="cb3-49"><a href="#cb3-49" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb3-50"><a href="#cb3-50" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(</span>
<span id="cb3-51"><a href="#cb3-51" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> e1rm_data_animated <span class="sc">|&gt;</span> <span class="fu">filter</span>(is_highlighted),</span>
<span id="cb3-52"><a href="#cb3-52" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">linewidth =</span> line_size),</span>
<span id="cb3-53"><a href="#cb3-53" aria-hidden="true" tabindex="-1"></a>    <span class="at">colour =</span> <span class="st">"#E31937"</span></span>
<span id="cb3-54"><a href="#cb3-54" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb3-55"><a href="#cb3-55" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb3-56"><a href="#cb3-56" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">label =</span> label),</span>
<span id="cb3-57"><a href="#cb3-57" aria-hidden="true" tabindex="-1"></a>    <span class="at">colour =</span> <span class="st">"#E31937"</span>,</span>
<span id="cb3-58"><a href="#cb3-58" aria-hidden="true" tabindex="-1"></a>    <span class="at">family =</span> <span class="st">"Myriad Pro Regular"</span>,</span>
<span id="cb3-59"><a href="#cb3-59" aria-hidden="true" tabindex="-1"></a>    <span class="at">hjust =</span> <span class="dv">0</span>,</span>
<span id="cb3-60"><a href="#cb3-60" aria-hidden="true" tabindex="-1"></a>    <span class="at">nudge_x =</span> <span class="fl">0.5</span>,</span>
<span id="cb3-61"><a href="#cb3-61" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">6</span>,</span>
<span id="cb3-62"><a href="#cb3-62" aria-hidden="true" tabindex="-1"></a>    <span class="at">fontface =</span> <span class="st">"bold"</span>,</span>
<span id="cb3-63"><a href="#cb3-63" aria-hidden="true" tabindex="-1"></a>    <span class="at">show.legend =</span> <span class="cn">FALSE</span></span>
<span id="cb3-64"><a href="#cb3-64" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb3-65"><a href="#cb3-65" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_linewidth_identity</span>() <span class="sc">+</span></span>
<span id="cb3-66"><a href="#cb3-66" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(</span>
<span id="cb3-67"><a href="#cb3-67" aria-hidden="true" tabindex="-1"></a>    <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">20</span>, <span class="dv">1</span>)</span>
<span id="cb3-68"><a href="#cb3-68" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb3-69"><a href="#cb3-69" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(</span>
<span id="cb3-70"><a href="#cb3-70" aria-hidden="true" tabindex="-1"></a>    <span class="at">labels =</span> <span class="fu">label_percent</span>(<span class="at">scale =</span> <span class="dv">1</span>),</span>
<span id="cb3-71"><a href="#cb3-71" aria-hidden="true" tabindex="-1"></a>    <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">40</span>, <span class="dv">100</span>, <span class="dv">10</span>),</span>
<span id="cb3-72"><a href="#cb3-72" aria-hidden="true" tabindex="-1"></a>    <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">40</span>, <span class="dv">100</span>)</span>
<span id="cb3-73"><a href="#cb3-73" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb3-74"><a href="#cb3-74" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb3-75"><a href="#cb3-75" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"1RM Estimation Formulas"</span>,</span>
<span id="cb3-76"><a href="#cb3-76" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Number of Repetitions"</span>,</span>
<span id="cb3-77"><a href="#cb3-77" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="cn">NULL</span>,</span>
<span id="cb3-78"><a href="#cb3-78" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"% of 1RM"</span>,</span>
<span id="cb3-79"><a href="#cb3-79" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> socials</span>
<span id="cb3-80"><a href="#cb3-80" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb3-81"><a href="#cb3-81" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb3-82"><a href="#cb3-82" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.margin =</span> <span class="fu">margin</span>(<span class="dv">10</span>, <span class="dv">100</span>, <span class="dv">10</span>, <span class="dv">10</span>),</span>
<span id="cb3-83"><a href="#cb3-83" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"none"</span></span>
<span id="cb3-84"><a href="#cb3-84" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb3-85"><a href="#cb3-85" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transition_manual</span>(</span>
<span id="cb3-86"><a href="#cb3-86" aria-hidden="true" tabindex="-1"></a>    highlight,</span>
<span id="cb3-87"><a href="#cb3-87" aria-hidden="true" tabindex="-1"></a>    <span class="at">cumulative =</span> <span class="cn">FALSE</span></span>
<span id="cb3-88"><a href="#cb3-88" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb3-89"><a href="#cb3-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-90"><a href="#cb3-90" aria-hidden="true" tabindex="-1"></a><span class="fu">animate</span>(</span>
<span id="cb3-91"><a href="#cb3-91" aria-hidden="true" tabindex="-1"></a>  animated_plot,</span>
<span id="cb3-92"><a href="#cb3-92" aria-hidden="true" tabindex="-1"></a>   <span class="at">nframes =</span> <span class="dv">80</span>,</span>
<span id="cb3-93"><a href="#cb3-93" aria-hidden="true" tabindex="-1"></a>   <span class="at">fps =</span> <span class="dv">10</span>,</span>
<span id="cb3-94"><a href="#cb3-94" aria-hidden="true" tabindex="-1"></a>   <span class="at">width =</span> <span class="dv">8</span>,</span>
<span id="cb3-95"><a href="#cb3-95" aria-hidden="true" tabindex="-1"></a>   <span class="at">height =</span> <span class="fl">4.5</span>,</span>
<span id="cb3-96"><a href="#cb3-96" aria-hidden="true" tabindex="-1"></a>   <span class="at">device =</span> <span class="st">"ragg_png"</span></span>
<span id="cb3-97"><a href="#cb3-97" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>formulas <span class="op">=</span> {</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Epley"</span>: <span class="kw">lambda</span> reps: <span class="dv">100</span> <span class="op">/</span> (<span class="dv">1</span> <span class="op">+</span> reps <span class="op">/</span> <span class="dv">30</span>),</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Brzycki"</span>: <span class="kw">lambda</span> reps: <span class="dv">100</span> <span class="op">*</span> (<span class="dv">37</span> <span class="op">-</span> reps) <span class="op">/</span> <span class="dv">36</span>,</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Mayhew"</span>: <span class="kw">lambda</span> reps: <span class="fl">52.2</span> <span class="op">+</span> <span class="fl">41.9</span> <span class="op">*</span> np.exp(<span class="op">-</span><span class="fl">0.055</span> <span class="op">*</span> reps),</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Lombardi"</span>: <span class="kw">lambda</span> reps: <span class="dv">100</span> <span class="op">/</span> (reps<span class="op">**</span><span class="fl">0.10</span>),</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"O'Conner"</span>: <span class="kw">lambda</span> reps: <span class="dv">100</span> <span class="op">/</span> (<span class="dv">1</span> <span class="op">+</span> reps <span class="op">/</span> <span class="dv">40</span>),</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Wathan"</span>: <span class="kw">lambda</span> reps: <span class="fl">48.8</span> <span class="op">+</span> <span class="fl">53.8</span> <span class="op">*</span> np.exp(<span class="op">-</span><span class="fl">0.075</span> <span class="op">*</span> reps),</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Lander"</span>: <span class="kw">lambda</span> reps: <span class="fl">101.3</span> <span class="op">-</span> <span class="fl">2.67123</span> <span class="op">*</span> reps,</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate data</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>reps_range <span class="op">=</span> np.arange(<span class="dv">1</span>, <span class="dv">21</span>)</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>formula_names <span class="op">=</span> <span class="bu">list</span>(formulas.keys())</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate %1RM for each formula</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>e1rm_data <span class="op">=</span> {name: func(reps_range) <span class="cf">for</span> name, func <span class="kw">in</span> formulas.items()}</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Create figure and initial empty lines</span></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="fl">5.5</span>))</span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>fig.subplots_adjust(right<span class="op">=</span><span class="fl">0.85</span>)</span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Store line objects</span></span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>grey_lines <span class="op">=</span> []</span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> name <span class="kw">in</span> formula_names:</span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>    (line,) <span class="op">=</span> ax.plot([], [], color<span class="op">=</span><span class="st">"lightgrey"</span>, linewidth<span class="op">=</span><span class="fl">0.8</span>)</span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>    grey_lines.append(line)</span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a>(highlight_line,) <span class="op">=</span> ax.plot([], [], color<span class="op">=</span><span class="st">"#E31937"</span>, linewidth<span class="op">=</span><span class="fl">2.5</span>)</span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a>label_text <span class="op">=</span> ax.text(</span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a>    <span class="fl">20.5</span>, <span class="dv">50</span>, <span class="st">""</span>, color<span class="op">=</span><span class="st">"#E31937"</span>, fontsize<span class="op">=</span><span class="dv">12</span>, fontweight<span class="op">=</span><span class="st">"bold"</span>, va<span class="op">=</span><span class="st">"center"</span></span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a>ax.set_xlim(<span class="dv">1</span>, <span class="dv">23</span>)</span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a>ax.set_ylim(<span class="dv">40</span>, <span class="dv">100</span>)</span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a>ax.set_xticks(<span class="bu">range</span>(<span class="dv">1</span>, <span class="dv">21</span>))</span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a>ax.set_yticks(<span class="bu">range</span>(<span class="dv">40</span>, <span class="dv">101</span>, <span class="dv">10</span>))</span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true" tabindex="-1"></a>ax.set_yticklabels([<span class="ss">f"</span><span class="sc">{</span>y<span class="sc">}</span><span class="ss">%"</span> <span class="cf">for</span> y <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">40</span>, <span class="dv">101</span>, <span class="dv">10</span>)])</span>
<span id="cb4-38"><a href="#cb4-38" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">"Number of Repetitions"</span>)</span>
<span id="cb4-39"><a href="#cb4-39" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="st">"1RM Estimation Formulas"</span>, fontweight<span class="op">=</span><span class="st">"bold"</span>, fontsize<span class="op">=</span><span class="dv">14</span>)</span>
<span id="cb4-40"><a href="#cb4-40" aria-hidden="true" tabindex="-1"></a>ax.spines[[<span class="st">"top"</span>, <span class="st">"right"</span>]].set_visible(<span class="va">False</span>)</span>
<span id="cb4-41"><a href="#cb4-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-42"><a href="#cb4-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-43"><a href="#cb4-43" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> init():</span>
<span id="cb4-44"><a href="#cb4-44" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> line <span class="kw">in</span> grey_lines:</span>
<span id="cb4-45"><a href="#cb4-45" aria-hidden="true" tabindex="-1"></a>        line.set_data([], [])</span>
<span id="cb4-46"><a href="#cb4-46" aria-hidden="true" tabindex="-1"></a>    highlight_line.set_data([], [])</span>
<span id="cb4-47"><a href="#cb4-47" aria-hidden="true" tabindex="-1"></a>    label_text.set_text(<span class="st">""</span>)</span>
<span id="cb4-48"><a href="#cb4-48" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> grey_lines <span class="op">+</span> [highlight_line, label_text]</span>
<span id="cb4-49"><a href="#cb4-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-50"><a href="#cb4-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-51"><a href="#cb4-51" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> animate(frame):</span>
<span id="cb4-52"><a href="#cb4-52" aria-hidden="true" tabindex="-1"></a>    highlighted <span class="op">=</span> formula_names[frame]</span>
<span id="cb4-53"><a href="#cb4-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-54"><a href="#cb4-54" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Update all lines</span></span>
<span id="cb4-55"><a href="#cb4-55" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i, name <span class="kw">in</span> <span class="bu">enumerate</span>(formula_names):</span>
<span id="cb4-56"><a href="#cb4-56" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> name <span class="op">!=</span> highlighted:</span>
<span id="cb4-57"><a href="#cb4-57" aria-hidden="true" tabindex="-1"></a>            grey_lines[i].set_data(reps_range, e1rm_data[name])</span>
<span id="cb4-58"><a href="#cb4-58" aria-hidden="true" tabindex="-1"></a>            grey_lines[i].set_color(<span class="st">"lightgrey"</span>)</span>
<span id="cb4-59"><a href="#cb4-59" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb4-60"><a href="#cb4-60" aria-hidden="true" tabindex="-1"></a>            grey_lines[i].set_data([], [])</span>
<span id="cb4-61"><a href="#cb4-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-62"><a href="#cb4-62" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Update highlighted line</span></span>
<span id="cb4-63"><a href="#cb4-63" aria-hidden="true" tabindex="-1"></a>    highlight_line.set_data(reps_range, e1rm_data[highlighted])</span>
<span id="cb4-64"><a href="#cb4-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-65"><a href="#cb4-65" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Update label</span></span>
<span id="cb4-66"><a href="#cb4-66" aria-hidden="true" tabindex="-1"></a>    label_text.set_position((<span class="fl">20.5</span>, e1rm_data[highlighted][<span class="op">-</span><span class="dv">1</span>]))</span>
<span id="cb4-67"><a href="#cb4-67" aria-hidden="true" tabindex="-1"></a>    label_text.set_text(highlighted)</span>
<span id="cb4-68"><a href="#cb4-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-69"><a href="#cb4-69" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> grey_lines <span class="op">+</span> [highlight_line, label_text]</span>
<span id="cb4-70"><a href="#cb4-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-71"><a href="#cb4-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-72"><a href="#cb4-72" aria-hidden="true" tabindex="-1"></a>anim <span class="op">=</span> animation.FuncAnimation(</span>
<span id="cb4-73"><a href="#cb4-73" aria-hidden="true" tabindex="-1"></a>    fig, animate, init_func<span class="op">=</span>init, frames<span class="op">=</span><span class="bu">len</span>(formula_names), interval<span class="op">=</span><span class="dv">1000</span>, blit<span class="op">=</span><span class="va">True</span></span>
<span id="cb4-74"><a href="#cb4-74" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb4-75"><a href="#cb4-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-76"><a href="#cb4-76" aria-hidden="true" tabindex="-1"></a>anim.save(<span class="st">"1rm_formulas.gif"</span>, writer<span class="op">=</span><span class="st">"pillow"</span>, fps<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb4-77"><a href="#cb4-77" aria-hidden="true" tabindex="-1"></a>plt.close()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-5-1.gif" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>But none of these:</p>
<ul>
<li><p>Account for strength endurance differences between athletes</p>
<p>Some athletes (fast twitch, higher metabolic cost per rep) have high 1RMs but find higher rep sets challenging. Other athletes (better oxidative capacity, lower metabolic cost per rep) can perform many reps at moderate intensities but quickly hit their 1RM ceiling with more weight. <strong>A better 1RM estimate would take into account what’s known about the physiological characteristics of the athlete</strong>. This directly impacts how accurate the e1RM will be. If a fast twitch athlete does a max reps set of 14 x 100kg, I’d expect their 1RM to be higher than a more oxidative athlete performing the same 14 x 100kg because they’re better suited to high intensity work.</p>
<p><em>The standard formulas don’t do this</em>.</p>
<p><br></p></li>
<li><p>Tell me how certain they are in their estimate</p>
<p>The standard formulas WILL ALWAYS give you a 1RM estimate, doesn’t matter how confident or UNconfident they are. The 1RM estimate will also always just be a single value. There’s a big difference in how I’d interpret a 100kg e1RM if it’s 80% certain of being between 98–102kg (pretty precise) versus 80% certain of being between 77.5–122.5kg (practically useless). There’s also a big difference in 1RM certainty when the estimate is based on an athlete doing a max rep set completing 2-5 reps (closer to true 1RM; higher certainty) compared 10+ reps (further from true 1RM; lower certainty).</p>
<p>We also become more familiar about an athlete’s ability the more we work with them and get to know them. I’d have a lot more confidence predicting the 1RM of an athlete I’d worked with, gotten to know, and collected training data on for years compared to someone new without much training data available. <strong>A better 1RM estimate would incorporate all these sources of uncertainty and honestly express how confident it is</strong>.</p>
<p><em>The standard formulas don’t do this</em>.</p>
<p><br></p></li>
</ul>
</section>
<section id="my-solution" class="level2">
<h2 class="anchored" data-anchor-id="my-solution">My solution</h2>
<p>The idea is to extend one of the standard e1RM formulas by building it into a statistical model that takes the athlete it’s estimating the 1RM for into account. It’ll be fit using the athlete’s past data so it learns how they handle higher weight vs higher reps. It’s like a smarter version of the standard formula tailored to the athlete. Having this extra information helps it make more accurate predictions.</p>
<p>The model will also be a <a href="https://en.wikipedia.org/wiki/Bayesian_statistics"><em>Bayesian</em></a> model. These have advantages over <a href="https://en.wikipedia.org/wiki/Frequentist_probability">conventional</a> statistical models when it comes to expressing uncertainty (<a href="https://www.youtube.com/watch?v=R6d-AbkhBQ8">among other things</a>). So instead of just getting one number, you get a full distribution representing the uncertainty in the 1RM estimate (e.g., “The 1RM estimate is 100kg with 80% probability of it being between 98 and 102kg”).<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> This distribution accounts for all the sources of upstream uncertainty (amount of data available on the athlete lifting, number of reps they completed, etc).</p>
<p>To show you what I mean, we need some data.</p>
<section id="simulate-data" class="level3">
<h3 class="anchored" data-anchor-id="simulate-data">Simulate data</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-3-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-1" role="tab" aria-controls="tabset-3-1" aria-selected="true"><img src="../..\img/Rlogo.svg" height="25"></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-2" role="tab" aria-controls="tabset-3-2" aria-selected="false"><img src="../..\img/python-logo-only.svg" height="30"></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-3-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-3-1-tab">
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">2534</span>)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Population hyperparameters (ground truth)</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>n_athletes <span class="ot">&lt;-</span> <span class="dv">30</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>mean_n_obs_per_athlete <span class="ot">&lt;-</span> <span class="dv">15</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>min_n_obs <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>max_n_obs <span class="ot">&lt;-</span> <span class="dv">30</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="co"># True 1RM population parameters</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>pop_mean_1rm <span class="ot">&lt;-</span> <span class="dv">140</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>pop_sd_1rm <span class="ot">&lt;-</span> <span class="dv">15</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Endurance coefficient population parameters</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>pop_mean_endurance <span class="ot">&lt;-</span> <span class="dv">30</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>pop_sd_endurance <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Maybe discuss importance of this on results (heterogenous endurance profiles = bigger gain from player specific parameters)</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>min_reps <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>max_reps <span class="ot">&lt;-</span> <span class="dv">15</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Observation noise</span></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>obs_noise_sd <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate athlete-level ground truth</span></span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>athletes <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>  <span class="at">athlete_id =</span> <span class="dv">1</span><span class="sc">:</span>n_athletes,</span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a>  <span class="at">true_1rm =</span> <span class="fu">rnorm</span>(n_athletes, <span class="at">mean =</span> pop_mean_1rm, <span class="at">sd =</span> pop_sd_1rm),</span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a>  <span class="at">true_endurance =</span> <span class="fu">rnorm</span>(</span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a>    n_athletes,</span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean =</span> pop_mean_endurance,</span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">sd =</span> pop_sd_endurance</span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb5-33"><a href="#cb5-33" aria-hidden="true" tabindex="-1"></a>  <span class="at">n_observations =</span> <span class="fu">sample</span>(min_n_obs<span class="sc">:</span>max_n_obs, n_athletes, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb5-34"><a href="#cb5-34" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb5-35"><a href="#cb5-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-36"><a href="#cb5-36" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate observations</span></span>
<span id="cb5-37"><a href="#cb5-37" aria-hidden="true" tabindex="-1"></a>simulated_data <span class="ot">&lt;-</span> athletes <span class="sc">|&gt;</span></span>
<span id="cb5-38"><a href="#cb5-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rowwise</span>() <span class="sc">|&gt;</span></span>
<span id="cb5-39"><a href="#cb5-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">reframe</span>(</span>
<span id="cb5-40"><a href="#cb5-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">athlete_id =</span> athlete_id,</span>
<span id="cb5-41"><a href="#cb5-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">true_1rm =</span> true_1rm,</span>
<span id="cb5-42"><a href="#cb5-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">true_endurance =</span> true_endurance,</span>
<span id="cb5-43"><a href="#cb5-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">session_id =</span> <span class="fu">seq_len</span>(n_observations),</span>
<span id="cb5-44"><a href="#cb5-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">reps =</span> <span class="fu">sample</span>(min_reps<span class="sc">:</span>max_reps, n_observations, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb5-45"><a href="#cb5-45" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb5-46"><a href="#cb5-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb5-47"><a href="#cb5-47" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Theoretical weight from modified Epley formula</span></span>
<span id="cb5-48"><a href="#cb5-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">weight_theoretical =</span> true_1rm <span class="sc">/</span> (<span class="dv">1</span> <span class="sc">+</span> reps <span class="sc">/</span> true_endurance),</span>
<span id="cb5-49"><a href="#cb5-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-50"><a href="#cb5-50" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Add normally distributed noise</span></span>
<span id="cb5-51"><a href="#cb5-51" aria-hidden="true" tabindex="-1"></a>    <span class="at">weight_observed =</span> weight_theoretical <span class="sc">+</span> <span class="fu">rnorm</span>(<span class="fu">n</span>(), <span class="dv">0</span>, obs_noise_sd)</span>
<span id="cb5-52"><a href="#cb5-52" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-3-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-2-tab">
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Different random number generators
</div>
</div>
<div class="callout-body-container callout-body">
<p>R and Python use different random number generation algorithms, so even with the same seed value, the simulated data will differ between languages. This means specific values (e.g.&nbsp;individual athlete 1RMs, credible intervals) won’t match exactly. The overall patterns will be consistent, and the same analytical conclusions apply.</p>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>np.random.seed(<span class="dv">2534</span>)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Population hyperparameters (ground truth)</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>n_athletes <span class="op">=</span> <span class="dv">30</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>mean_n_obs_per_athlete <span class="op">=</span> <span class="dv">15</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>min_n_obs <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>max_n_obs <span class="op">=</span> <span class="dv">30</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="co"># True 1RM population parameters</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>pop_mean_1rm <span class="op">=</span> <span class="dv">140</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>pop_sd_1rm <span class="op">=</span> <span class="dv">15</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Endurance coefficient population parameters</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>pop_mean_endurance <span class="op">=</span> <span class="dv">30</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>pop_sd_endurance <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>min_reps <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>max_reps <span class="op">=</span> <span class="dv">15</span></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Observation noise</span></span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>obs_noise_sd <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate athlete-level ground truth</span></span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>athletes <span class="op">=</span> pl.DataFrame(</span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>        <span class="st">"athlete_id"</span>: <span class="bu">range</span>(<span class="dv">1</span>, n_athletes <span class="op">+</span> <span class="dv">1</span>),</span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a>        <span class="st">"true_1rm"</span>: np.random.normal(pop_mean_1rm, pop_sd_1rm, n_athletes),</span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a>        <span class="st">"true_endurance"</span>: np.random.normal(</span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a>            pop_mean_endurance, pop_sd_endurance, n_athletes</span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a>        <span class="st">"n_observations"</span>: np.random.randint(min_n_obs, max_n_obs <span class="op">+</span> <span class="dv">1</span>, n_athletes),</span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-35"><a href="#cb6-35" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate observations by expanding each athlete's rows</span></span>
<span id="cb6-36"><a href="#cb6-36" aria-hidden="true" tabindex="-1"></a>n_total <span class="op">=</span> athletes[<span class="st">"n_observations"</span>].<span class="bu">sum</span>()</span>
<span id="cb6-37"><a href="#cb6-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-38"><a href="#cb6-38" aria-hidden="true" tabindex="-1"></a>simulated_data <span class="op">=</span> (</span>
<span id="cb6-39"><a href="#cb6-39" aria-hidden="true" tabindex="-1"></a>    athletes.select(</span>
<span id="cb6-40"><a href="#cb6-40" aria-hidden="true" tabindex="-1"></a>        pl.col(<span class="st">"athlete_id"</span>).repeat_by(<span class="st">"n_observations"</span>).explode(),</span>
<span id="cb6-41"><a href="#cb6-41" aria-hidden="true" tabindex="-1"></a>        pl.col(<span class="st">"true_1rm"</span>).repeat_by(<span class="st">"n_observations"</span>).explode(),</span>
<span id="cb6-42"><a href="#cb6-42" aria-hidden="true" tabindex="-1"></a>        pl.col(<span class="st">"true_endurance"</span>).repeat_by(<span class="st">"n_observations"</span>).explode(),</span>
<span id="cb6-43"><a href="#cb6-43" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb6-44"><a href="#cb6-44" aria-hidden="true" tabindex="-1"></a>    .with_columns(</span>
<span id="cb6-45"><a href="#cb6-45" aria-hidden="true" tabindex="-1"></a>        session_id<span class="op">=</span>pl.int_range(pl.<span class="bu">len</span>()).over(<span class="st">"athlete_id"</span>) <span class="op">+</span> <span class="dv">1</span>,</span>
<span id="cb6-46"><a href="#cb6-46" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb6-47"><a href="#cb6-47" aria-hidden="true" tabindex="-1"></a>    .with_columns(</span>
<span id="cb6-48"><a href="#cb6-48" aria-hidden="true" tabindex="-1"></a>        reps<span class="op">=</span>pl.Series(np.random.randint(min_reps, max_reps <span class="op">+</span> <span class="dv">1</span>, n_total)),</span>
<span id="cb6-49"><a href="#cb6-49" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb6-50"><a href="#cb6-50" aria-hidden="true" tabindex="-1"></a>    .with_columns(</span>
<span id="cb6-51"><a href="#cb6-51" aria-hidden="true" tabindex="-1"></a>        weight_theoretical<span class="op">=</span>pl.col(<span class="st">"true_1rm"</span>)</span>
<span id="cb6-52"><a href="#cb6-52" aria-hidden="true" tabindex="-1"></a>        <span class="op">/</span> (<span class="dv">1</span> <span class="op">+</span> pl.col(<span class="st">"reps"</span>) <span class="op">/</span> pl.col(<span class="st">"true_endurance"</span>)),</span>
<span id="cb6-53"><a href="#cb6-53" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb6-54"><a href="#cb6-54" aria-hidden="true" tabindex="-1"></a>    .with_columns(</span>
<span id="cb6-55"><a href="#cb6-55" aria-hidden="true" tabindex="-1"></a>        weight_observed<span class="op">=</span>pl.col(<span class="st">"weight_theoretical"</span>)</span>
<span id="cb6-56"><a href="#cb6-56" aria-hidden="true" tabindex="-1"></a>        <span class="op">+</span> pl.Series(np.random.normal(<span class="dv">0</span>, obs_noise_sd, n_total)),</span>
<span id="cb6-57"><a href="#cb6-57" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb6-58"><a href="#cb6-58" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
<p>I’ve simulated 30 fake athletes, each with their own 1RM, strength endurance capacity, and number of previous sessions of data where they’ve performed a max reps set for this given exercise.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>I’m going light on simulation details here to keep this accessible. Expand the section below to get more statistical details on the parameters of the simulated data.</p>
</div>
</div>
<details aria-label="Simulation technical details (optional)" id="details-1">
<summary>Simulation technical details (optional)</summary>
<p>I’ve defined the “squad” (30 athletes) to have a mean 1RM of 140kg
and standard deviation of 15kg drawn from a random normal distribution.
I also assign them an <strong>endurance ability</strong> (also drawn
from a normal distribution with a mean of 30 and standard deviation of
5).</p>
<p>Each athlete will have data from somewhere between 5 and 30 previous
training sessions where they’ve done this exercises til failure.</p>
<p>For each of these max rep sets, the athletes complete somewhere
between 2 and 15 reps (randomly sampled with replacement from a uniform
distribution). I calculate a theoretical weight they should be able to
complete for the set given their simulated 1RM and reps performed based
on a modified Epley formula (probably most commonly used e1RM formula,
modified to account for variable endurance ability).</p>
<p>I finally simulate the actual weight they lifted for the set by
taking the weight they theoretically could lift given their simulated
1RM and reps, added some random noise (because humans work like that)
drawn randomly from a normal distribution (mean of 0, SD of 2).</p>
</details>
<p>The simulated athlete data looks like this:</p>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-4-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-1" role="tab" aria-controls="tabset-4-1" aria-selected="true"><img src="../..\img/Rlogo.svg" height="25"></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-2" role="tab" aria-controls="tabset-4-2" aria-selected="false"><img src="../..\img/python-logo-only.svg" height="30"></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-4-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-4-1-tab">
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>athletes <span class="sc">|&gt;</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), \(x) <span class="fu">round</span>(x, <span class="dv">1</span>))) <span class="sc">|&gt;</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt_preview</span>() <span class="sc">|&gt;</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt_theme_538</span>(<span class="at">quiet =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-4-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-2-tab">
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>preview_df <span class="op">=</span> pl.concat(</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>    [</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>        athletes.head(<span class="dv">5</span>).with_columns(cs.by_dtype(pl.Float64).<span class="bu">round</span>(<span class="dv">1</span>)).cast(pl.String),</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>        pl.DataFrame({col: [<span class="st">"⋮"</span>] <span class="cf">for</span> col <span class="kw">in</span> athletes.columns}),</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>        athletes.tail(<span class="dv">1</span>).with_columns(cs.by_dtype(pl.Float64).<span class="bu">round</span>(<span class="dv">1</span>)).cast(pl.String),</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>GT(preview_df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div id="wzjgcrdioc" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>@import url("https://fonts.googleapis.com/css2?family=Chivo:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap");
@import url("https://fonts.googleapis.com/css2?family=Chivo:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap");
@import url("https://fonts.googleapis.com/css2?family=Chivo:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap");
@import url("https://fonts.googleapis.com/css2?family=Cairo:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap");
#wzjgcrdioc table {
  font-family: Cairo, system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#wzjgcrdioc thead, #wzjgcrdioc tbody, #wzjgcrdioc tfoot, #wzjgcrdioc tr, #wzjgcrdioc td, #wzjgcrdioc th {
  border-style: none;
}

#wzjgcrdioc p {
  margin: 0;
  padding: 0;
}

#wzjgcrdioc .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: 400;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: none;
  border-top-width: 3px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#wzjgcrdioc .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#wzjgcrdioc .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#wzjgcrdioc .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#wzjgcrdioc .gt_heading {
  background-color: #FFFFFF;
  text-align: left;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#wzjgcrdioc .gt_bottom_border {
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#wzjgcrdioc .gt_col_headings {
  border-top-style: none;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #000000;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#wzjgcrdioc .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#wzjgcrdioc .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#wzjgcrdioc .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#wzjgcrdioc .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#wzjgcrdioc .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #000000;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#wzjgcrdioc .gt_spanner_row {
  border-bottom-style: hidden;
}

#wzjgcrdioc .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: none;
  border-top-width: 2px;
  border-top-color: #000000;
  border-bottom-style: solid;
  border-bottom-width: 1px;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#wzjgcrdioc .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: none;
  border-top-width: 2px;
  border-top-color: #000000;
  border-bottom-style: solid;
  border-bottom-width: 1px;
  border-bottom-color: #FFFFFF;
  vertical-align: middle;
}

#wzjgcrdioc .gt_from_md > :first-child {
  margin-top: 0;
}

#wzjgcrdioc .gt_from_md > :last-child {
  margin-bottom: 0;
}

#wzjgcrdioc .gt_row {
  padding-top: 3px;
  padding-bottom: 3px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#wzjgcrdioc .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 0px;
  border-right-color: #FFFFFF;
  padding-left: 5px;
  padding-right: 5px;
}

#wzjgcrdioc .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#wzjgcrdioc .gt_row_group_first td {
  border-top-width: 2px;
}

#wzjgcrdioc .gt_row_group_first th {
  border-top-width: 2px;
}

#wzjgcrdioc .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#wzjgcrdioc .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#wzjgcrdioc .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#wzjgcrdioc .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#wzjgcrdioc .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#wzjgcrdioc .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#wzjgcrdioc .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#wzjgcrdioc .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#wzjgcrdioc .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#wzjgcrdioc .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#wzjgcrdioc .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#wzjgcrdioc .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#wzjgcrdioc .gt_sourcenote {
  font-size: 12px;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#wzjgcrdioc .gt_left {
  text-align: left;
}

#wzjgcrdioc .gt_center {
  text-align: center;
}

#wzjgcrdioc .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#wzjgcrdioc .gt_font_normal {
  font-weight: normal;
}

#wzjgcrdioc .gt_font_bold {
  font-weight: bold;
}

#wzjgcrdioc .gt_font_italic {
  font-style: italic;
}

#wzjgcrdioc .gt_super {
  font-size: 65%;
}

#wzjgcrdioc .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#wzjgcrdioc .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#wzjgcrdioc .gt_indent_1 {
  text-indent: 5px;
}

#wzjgcrdioc .gt_indent_2 {
  text-indent: 10px;
}

#wzjgcrdioc .gt_indent_3 {
  text-indent: 15px;
}

#wzjgcrdioc .gt_indent_4 {
  text-indent: 20px;
}

#wzjgcrdioc .gt_indent_5 {
  text-indent: 25px;
}

#wzjgcrdioc .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#wzjgcrdioc div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}

pyvcvuyfkc
#pyvcvuyfkc tbody tr:last-child {
  border-bottom: 2px solid #ffffff00;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" style="border-top-width: 0px; border-top-style: solid; border-top-color: black; font-family: Chivo; font-size: 14px; vertical-align: bottom; font-weight: 200; text-transform: uppercase;" scope="col" id="a::stub"></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="border-top-width: 0px; border-top-style: solid; border-top-color: black; font-family: Chivo; font-size: 14px; vertical-align: bottom; font-weight: 200; text-transform: uppercase;" scope="col" id="athlete_id">athlete_id</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="border-top-width: 0px; border-top-style: solid; border-top-color: black; font-family: Chivo; font-size: 14px; vertical-align: bottom; font-weight: 200; text-transform: uppercase;" scope="col" id="true_1rm">true_1rm</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="border-top-width: 0px; border-top-style: solid; border-top-color: black; font-family: Chivo; font-size: 14px; vertical-align: bottom; font-weight: 200; text-transform: uppercase;" scope="col" id="true_endurance">true_endurance</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="border-top-width: 0px; border-top-style: solid; border-top-color: black; font-family: Chivo; font-size: 14px; vertical-align: bottom; font-weight: 200; text-transform: uppercase;" scope="col" id="n_observations">n_observations</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><th id="stub_1_1" scope="row" class="gt_row gt_right gt_stub" style="font-family: Courier;">1</th>
<td headers="stub_1_1 athlete_id" class="gt_row gt_right">1</td>
<td headers="stub_1_1 true_1rm" class="gt_row gt_right">145.4</td>
<td headers="stub_1_1 true_endurance" class="gt_row gt_right">27.8</td>
<td headers="stub_1_1 n_observations" class="gt_row gt_right">28</td></tr>
    <tr><th id="stub_1_2" scope="row" class="gt_row gt_right gt_stub" style="font-family: Courier;">2</th>
<td headers="stub_1_2 athlete_id" class="gt_row gt_right">2</td>
<td headers="stub_1_2 true_1rm" class="gt_row gt_right">131.2</td>
<td headers="stub_1_2 true_endurance" class="gt_row gt_right">41.8</td>
<td headers="stub_1_2 n_observations" class="gt_row gt_right">20</td></tr>
    <tr><th id="stub_1_3" scope="row" class="gt_row gt_right gt_stub" style="font-family: Courier;">3</th>
<td headers="stub_1_3 athlete_id" class="gt_row gt_right">3</td>
<td headers="stub_1_3 true_1rm" class="gt_row gt_right">139.6</td>
<td headers="stub_1_3 true_endurance" class="gt_row gt_right">31.8</td>
<td headers="stub_1_3 n_observations" class="gt_row gt_right">21</td></tr>
    <tr><th id="stub_1_4" scope="row" class="gt_row gt_right gt_stub" style="font-family: Courier;">4</th>
<td headers="stub_1_4 athlete_id" class="gt_row gt_right">4</td>
<td headers="stub_1_4 true_1rm" class="gt_row gt_right">133.6</td>
<td headers="stub_1_4 true_endurance" class="gt_row gt_right">26.1</td>
<td headers="stub_1_4 n_observations" class="gt_row gt_right">29</td></tr>
    <tr><th id="stub_1_5" scope="row" class="gt_row gt_right gt_stub" style="font-family: Courier;">5</th>
<td headers="stub_1_5 athlete_id" class="gt_row gt_right">5</td>
<td headers="stub_1_5 true_1rm" class="gt_row gt_right">97.8</td>
<td headers="stub_1_5 true_endurance" class="gt_row gt_right">32.9</td>
<td headers="stub_1_5 n_observations" class="gt_row gt_right">30</td></tr>
    <tr><th id="stub_1_6" scope="row" class="gt_row gt_right gt_stub" style="font-family: Courier; font-size: x-small; background-color: #E4E4E4;">6..29</th>
<td headers="stub_1_6 athlete_id" class="gt_row gt_right" style="background-color: #E4E4E4;"></td>
<td headers="stub_1_6 true_1rm" class="gt_row gt_right" style="background-color: #E4E4E4;"></td>
<td headers="stub_1_6 true_endurance" class="gt_row gt_right" style="background-color: #E4E4E4;"></td>
<td headers="stub_1_6 n_observations" class="gt_row gt_right" style="background-color: #E4E4E4;"></td></tr>
    <tr><th id="stub_1_7" scope="row" class="gt_row gt_right gt_stub" style="font-family: Courier;">30</th>
<td headers="stub_1_7 athlete_id" class="gt_row gt_right">30</td>
<td headers="stub_1_7 true_1rm" class="gt_row gt_right">147.9</td>
<td headers="stub_1_7 true_endurance" class="gt_row gt_right">28.5</td>
<td headers="stub_1_7 n_observations" class="gt_row gt_right">6</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<p>I use these athletes and their characteristics to simulate realistic weights and reps. This gives me 582 simulated max rep sets across the 30 athletes.</p>
<p>The simulated sets data looks like this:</p>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-5-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-1" role="tab" aria-controls="tabset-5-1" aria-selected="true"><img src="../..\img/Rlogo.svg" height="25"></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-2" role="tab" aria-controls="tabset-5-2" aria-selected="false"><img src="../..\img/python-logo-only.svg" height="30"></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-5-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-5-1-tab">
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>simulated_data <span class="sc">|&gt;</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">starts_with</span>(<span class="st">"true"</span>), <span class="sc">-</span>weight_theoretical) <span class="sc">|&gt;</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), \(x) <span class="fu">round</span>(x, <span class="dv">1</span>))) <span class="sc">|&gt;</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt_preview</span>() <span class="sc">|&gt;</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt_theme_538</span>(<span class="at">quiet =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-5-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-2-tab">
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>sets_preview <span class="op">=</span> simulated_data.select(</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>    pl.exclude(<span class="st">"^true.*$"</span>, <span class="st">"weight_theoretical"</span>)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>).with_columns(cs.by_dtype(pl.Float64).<span class="bu">round</span>(<span class="dv">1</span>))</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>preview_df <span class="op">=</span> pl.concat(</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>    [</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>        sets_preview.head(<span class="dv">5</span>).cast(pl.String),</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>        pl.DataFrame({col: [<span class="st">"⋮"</span>] <span class="cf">for</span> col <span class="kw">in</span> sets_preview.columns}),</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>        sets_preview.tail(<span class="dv">1</span>).cast(pl.String),</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>GT(preview_df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div id="nrbxiqcxht" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>@import url("https://fonts.googleapis.com/css2?family=Chivo:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap");
@import url("https://fonts.googleapis.com/css2?family=Chivo:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap");
@import url("https://fonts.googleapis.com/css2?family=Chivo:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap");
@import url("https://fonts.googleapis.com/css2?family=Cairo:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap");
#nrbxiqcxht table {
  font-family: Cairo, system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#nrbxiqcxht thead, #nrbxiqcxht tbody, #nrbxiqcxht tfoot, #nrbxiqcxht tr, #nrbxiqcxht td, #nrbxiqcxht th {
  border-style: none;
}

#nrbxiqcxht p {
  margin: 0;
  padding: 0;
}

#nrbxiqcxht .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: 400;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: none;
  border-top-width: 3px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#nrbxiqcxht .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#nrbxiqcxht .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#nrbxiqcxht .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#nrbxiqcxht .gt_heading {
  background-color: #FFFFFF;
  text-align: left;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#nrbxiqcxht .gt_bottom_border {
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#nrbxiqcxht .gt_col_headings {
  border-top-style: none;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #000000;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#nrbxiqcxht .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#nrbxiqcxht .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#nrbxiqcxht .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#nrbxiqcxht .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#nrbxiqcxht .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #000000;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#nrbxiqcxht .gt_spanner_row {
  border-bottom-style: hidden;
}

#nrbxiqcxht .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: none;
  border-top-width: 2px;
  border-top-color: #000000;
  border-bottom-style: solid;
  border-bottom-width: 1px;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#nrbxiqcxht .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: none;
  border-top-width: 2px;
  border-top-color: #000000;
  border-bottom-style: solid;
  border-bottom-width: 1px;
  border-bottom-color: #FFFFFF;
  vertical-align: middle;
}

#nrbxiqcxht .gt_from_md > :first-child {
  margin-top: 0;
}

#nrbxiqcxht .gt_from_md > :last-child {
  margin-bottom: 0;
}

#nrbxiqcxht .gt_row {
  padding-top: 3px;
  padding-bottom: 3px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#nrbxiqcxht .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 0px;
  border-right-color: #FFFFFF;
  padding-left: 5px;
  padding-right: 5px;
}

#nrbxiqcxht .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#nrbxiqcxht .gt_row_group_first td {
  border-top-width: 2px;
}

#nrbxiqcxht .gt_row_group_first th {
  border-top-width: 2px;
}

#nrbxiqcxht .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#nrbxiqcxht .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#nrbxiqcxht .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#nrbxiqcxht .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#nrbxiqcxht .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#nrbxiqcxht .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#nrbxiqcxht .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#nrbxiqcxht .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#nrbxiqcxht .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#nrbxiqcxht .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#nrbxiqcxht .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#nrbxiqcxht .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#nrbxiqcxht .gt_sourcenote {
  font-size: 12px;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#nrbxiqcxht .gt_left {
  text-align: left;
}

#nrbxiqcxht .gt_center {
  text-align: center;
}

#nrbxiqcxht .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#nrbxiqcxht .gt_font_normal {
  font-weight: normal;
}

#nrbxiqcxht .gt_font_bold {
  font-weight: bold;
}

#nrbxiqcxht .gt_font_italic {
  font-style: italic;
}

#nrbxiqcxht .gt_super {
  font-size: 65%;
}

#nrbxiqcxht .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#nrbxiqcxht .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#nrbxiqcxht .gt_indent_1 {
  text-indent: 5px;
}

#nrbxiqcxht .gt_indent_2 {
  text-indent: 10px;
}

#nrbxiqcxht .gt_indent_3 {
  text-indent: 15px;
}

#nrbxiqcxht .gt_indent_4 {
  text-indent: 20px;
}

#nrbxiqcxht .gt_indent_5 {
  text-indent: 25px;
}

#nrbxiqcxht .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#nrbxiqcxht div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}

dvzlmtvjsa
#dvzlmtvjsa tbody tr:last-child {
  border-bottom: 2px solid #ffffff00;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" style="border-top-width: 0px; border-top-style: solid; border-top-color: black; font-family: Chivo; font-size: 14px; vertical-align: bottom; font-weight: 200; text-transform: uppercase;" scope="col" id="a::stub"></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="border-top-width: 0px; border-top-style: solid; border-top-color: black; font-family: Chivo; font-size: 14px; vertical-align: bottom; font-weight: 200; text-transform: uppercase;" scope="col" id="athlete_id">athlete_id</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="border-top-width: 0px; border-top-style: solid; border-top-color: black; font-family: Chivo; font-size: 14px; vertical-align: bottom; font-weight: 200; text-transform: uppercase;" scope="col" id="session_id">session_id</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="border-top-width: 0px; border-top-style: solid; border-top-color: black; font-family: Chivo; font-size: 14px; vertical-align: bottom; font-weight: 200; text-transform: uppercase;" scope="col" id="reps">reps</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="border-top-width: 0px; border-top-style: solid; border-top-color: black; font-family: Chivo; font-size: 14px; vertical-align: bottom; font-weight: 200; text-transform: uppercase;" scope="col" id="weight_observed">weight_observed</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><th id="stub_1_1" scope="row" class="gt_row gt_right gt_stub" style="font-family: Courier;">1</th>
<td headers="stub_1_1 athlete_id" class="gt_row gt_right">1</td>
<td headers="stub_1_1 session_id" class="gt_row gt_right">1</td>
<td headers="stub_1_1 reps" class="gt_row gt_right">7</td>
<td headers="stub_1_1 weight_observed" class="gt_row gt_right">116.9</td></tr>
    <tr><th id="stub_1_2" scope="row" class="gt_row gt_right gt_stub" style="font-family: Courier;">2</th>
<td headers="stub_1_2 athlete_id" class="gt_row gt_right">1</td>
<td headers="stub_1_2 session_id" class="gt_row gt_right">2</td>
<td headers="stub_1_2 reps" class="gt_row gt_right">15</td>
<td headers="stub_1_2 weight_observed" class="gt_row gt_right">94.3</td></tr>
    <tr><th id="stub_1_3" scope="row" class="gt_row gt_right gt_stub" style="font-family: Courier;">3</th>
<td headers="stub_1_3 athlete_id" class="gt_row gt_right">1</td>
<td headers="stub_1_3 session_id" class="gt_row gt_right">3</td>
<td headers="stub_1_3 reps" class="gt_row gt_right">4</td>
<td headers="stub_1_3 weight_observed" class="gt_row gt_right">127.8</td></tr>
    <tr><th id="stub_1_4" scope="row" class="gt_row gt_right gt_stub" style="font-family: Courier;">4</th>
<td headers="stub_1_4 athlete_id" class="gt_row gt_right">1</td>
<td headers="stub_1_4 session_id" class="gt_row gt_right">4</td>
<td headers="stub_1_4 reps" class="gt_row gt_right">14</td>
<td headers="stub_1_4 weight_observed" class="gt_row gt_right">99.4</td></tr>
    <tr><th id="stub_1_5" scope="row" class="gt_row gt_right gt_stub" style="font-family: Courier;">5</th>
<td headers="stub_1_5 athlete_id" class="gt_row gt_right">1</td>
<td headers="stub_1_5 session_id" class="gt_row gt_right">5</td>
<td headers="stub_1_5 reps" class="gt_row gt_right">3</td>
<td headers="stub_1_5 weight_observed" class="gt_row gt_right">128.0</td></tr>
    <tr><th id="stub_1_6" scope="row" class="gt_row gt_right gt_stub" style="font-family: Courier; font-size: x-small; background-color: #E4E4E4;">6..581</th>
<td headers="stub_1_6 athlete_id" class="gt_row gt_right" style="background-color: #E4E4E4;"></td>
<td headers="stub_1_6 session_id" class="gt_row gt_right" style="background-color: #E4E4E4;"></td>
<td headers="stub_1_6 reps" class="gt_row gt_right" style="background-color: #E4E4E4;"></td>
<td headers="stub_1_6 weight_observed" class="gt_row gt_right" style="background-color: #E4E4E4;"></td></tr>
    <tr><th id="stub_1_7" scope="row" class="gt_row gt_right gt_stub" style="font-family: Courier;">582</th>
<td headers="stub_1_7 athlete_id" class="gt_row gt_right">30</td>
<td headers="stub_1_7 session_id" class="gt_row gt_right">6</td>
<td headers="stub_1_7 reps" class="gt_row gt_right">7</td>
<td headers="stub_1_7 weight_observed" class="gt_row gt_right">116.2</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
</section>
<section id="the-model" class="level3">
<h3 class="anchored" data-anchor-id="the-model">The model</h3>
<p>I’ll specify the model to follow a modified <a href="https://1repmaxcalculator.net/topics/epley-formula">Epley formula</a>.</p>
<p>Reasons for this:</p>
<ol type="1">
<li><p>It’s probably the most commonly used of the standard 1RM estimate formulas</p></li>
<li><p>It’s fairly simple (good for demo purposes)</p></li>
<li><p>I used it as part of how the data was simulated, so seeing how the model’s performance compares to the standard Epley formula for predicting the true (albeit simulated) 1RMs will be a good test.</p></li>
</ol>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>If I had real training data (instead of simulated), I would fit a bunch of different model specifications to see which one performs best.</p>
</div>
</div>
<p>The standard Epley is <code>weight * (1 + reps / 30)</code>.</p>
<p>The modification I’m using just changes the <code>30</code> (fixed constant representing how quickly strength drops off with more reps; same for everyone) to a parameter the model will optimise based on the data for each athlete. Each athlete gets their own value for this based on how they handle high intensity sets or high volume sets.</p>
<p>I’ll fit the model on all the simulated data <em>except the most recent set for each athlete</em>. I’ll keep these sets as a small holdout or test data for comparing predictive performance between my model and the standard Epley formula.</p>
<details aria-label="Stats details about the model (optional)" id="details-2">
<summary>Stats details about the model (optional)</summary>
<p>The standard Epley formula estimates 1RM from a submaximal lift, but
this treats 1RM as the outcome (which we don’t observe directly). What
we actually observe is the weight lifted for a given number of reps.
Solving for weight, the formula becomes
<code>weight = 1RM / (1 + reps / 30)</code>. This makes weight the
outcome, matching the data that’s observed in reality. The 1RM becomes a
latent parameter we estimate, and we replace the fixed constant 30 with
an estimated <em>endurance parameter</em>, which is log-transformed to
ensure positivity and improve sampling efficiency.</p>
<p>The hierarchical structure specifies that both 1RM and endurance vary
by athlete with partial pooling. The amount of regularisation or
shrinkage is adaptive. Athletes with less data get pulled more toward
the group mean and athletes with more data retain more of their
individual signal.</p>
<p>Weakly informative priors regularise the model (preventing
overfitting and improving convergence) without dominating the
likelihood. With reasonable data, the posterior will be driven primarily
by the observed (simulated) data.</p>
<p>Although they’re not included in this post (I wanted to keep it
tight), I did do prior predictive checks (to ensure my priors were
plausible), model diagnostic checks (to ensure no issues during
sampling), and posterior predictive checks (to ensure the model’s
assumptions adequately captured the features of the observed data).</p>
</details>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-6-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-1" role="tab" aria-controls="tabset-6-1" aria-selected="true"><img src="../..\img/Rlogo.svg" height="25"></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-2" role="tab" aria-controls="tabset-6-2" aria-selected="false"><img src="../..\img/python-logo-only.svg" height="30"></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-6-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-6-1-tab">
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Data prep</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>model_data <span class="ot">&lt;-</span> simulated_data <span class="sc">|&gt;</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># brms doesn't like underscores or . in variable names</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">athlete =</span> athlete_id,</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">orm =</span> true_1rm,</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">weight =</span> weight_observed</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Train/test split: hold out last observation per athlete</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>holdout <span class="ot">&lt;-</span> model_data <span class="sc">|&gt;</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(athlete) <span class="sc">|&gt;</span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(session_id, <span class="at">n =</span> <span class="dv">1</span>) <span class="sc">|&gt;</span></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>train <span class="ot">&lt;-</span> model_data <span class="sc">|&gt;</span></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">anti_join</span>(holdout, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"athlete"</span>, <span class="st">"session_id"</span>))</span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Model specification</span></span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>modified_epley_formula <span class="ot">&lt;-</span> <span class="fu">bf</span>(</span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a>  weight <span class="sc">~</span> orm <span class="sc">/</span> (<span class="dv">1</span> <span class="sc">+</span> reps <span class="sc">/</span> <span class="fu">exp</span>(logk)),</span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a>  orm <span class="sc">~</span> <span class="dv">1</span> <span class="sc">+</span> (<span class="dv">1</span> <span class="sc">|</span> athlete),</span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a>  logk <span class="sc">~</span> <span class="dv">1</span> <span class="sc">+</span> (<span class="dv">1</span> <span class="sc">|</span> athlete),</span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a>  <span class="at">nl =</span> <span class="cn">TRUE</span></span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb11-26"><a href="#cb11-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-27"><a href="#cb11-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Prior specification</span></span>
<span id="cb11-28"><a href="#cb11-28" aria-hidden="true" tabindex="-1"></a>modified_epley_priors <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb11-29"><a href="#cb11-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">prior</span>(<span class="fu">normal</span>(<span class="dv">140</span>, <span class="dv">30</span>), <span class="at">nlpar =</span> <span class="st">"orm"</span>, <span class="at">coef =</span> <span class="st">"Intercept"</span>),</span>
<span id="cb11-30"><a href="#cb11-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">prior</span>(<span class="fu">normal</span>(<span class="fl">3.4</span>, <span class="fl">0.3</span>), <span class="at">nlpar =</span> <span class="st">"logk"</span>, <span class="at">coef =</span> <span class="st">"Intercept"</span>), <span class="co"># log(30) ≈ 3.4</span></span>
<span id="cb11-31"><a href="#cb11-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">prior</span>(<span class="fu">exponential</span>(<span class="fl">0.05</span>), <span class="at">class =</span> <span class="st">"sd"</span>, <span class="at">nlpar =</span> <span class="st">"orm"</span>),</span>
<span id="cb11-32"><a href="#cb11-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">prior</span>(<span class="fu">exponential</span>(<span class="dv">2</span>), <span class="at">class =</span> <span class="st">"sd"</span>, <span class="at">nlpar =</span> <span class="st">"logk"</span>),</span>
<span id="cb11-33"><a href="#cb11-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">prior</span>(<span class="fu">exponential</span>(<span class="fl">0.2</span>), <span class="at">class =</span> <span class="st">"sigma"</span>)</span>
<span id="cb11-34"><a href="#cb11-34" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb11-35"><a href="#cb11-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-36"><a href="#cb11-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-37"><a href="#cb11-37" aria-hidden="true" tabindex="-1"></a>modified_epley_model_fit <span class="ot">&lt;-</span> <span class="fu">brm</span>(</span>
<span id="cb11-38"><a href="#cb11-38" aria-hidden="true" tabindex="-1"></a>  <span class="at">formula =</span> modified_epley_formula,</span>
<span id="cb11-39"><a href="#cb11-39" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> train,</span>
<span id="cb11-40"><a href="#cb11-40" aria-hidden="true" tabindex="-1"></a>  <span class="at">prior =</span> modified_epley_priors,</span>
<span id="cb11-41"><a href="#cb11-41" aria-hidden="true" tabindex="-1"></a>  <span class="at">family =</span> <span class="fu">gaussian</span>(),</span>
<span id="cb11-42"><a href="#cb11-42" aria-hidden="true" tabindex="-1"></a>  <span class="at">cores =</span> <span class="dv">4</span>,</span>
<span id="cb11-43"><a href="#cb11-43" aria-hidden="true" tabindex="-1"></a>  <span class="at">chains =</span> <span class="dv">4</span>,</span>
<span id="cb11-44"><a href="#cb11-44" aria-hidden="true" tabindex="-1"></a>  <span class="at">iter =</span> <span class="dv">4000</span>,</span>
<span id="cb11-45"><a href="#cb11-45" aria-hidden="true" tabindex="-1"></a>  <span class="at">warmup =</span> <span class="dv">2000</span>,</span>
<span id="cb11-46"><a href="#cb11-46" aria-hidden="true" tabindex="-1"></a>  <span class="at">control =</span> <span class="fu">list</span>(<span class="at">adapt_delta =</span> <span class="fl">0.95</span>, <span class="at">max_treedepth =</span> <span class="dv">12</span>),</span>
<span id="cb11-47"><a href="#cb11-47" aria-hidden="true" tabindex="-1"></a>  <span class="at">seed =</span> <span class="dv">2534</span>,</span>
<span id="cb11-48"><a href="#cb11-48" aria-hidden="true" tabindex="-1"></a>  <span class="at">file =</span> <span class="st">"modified_epley_model_fit"</span></span>
<span id="cb11-49"><a href="#cb11-49" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb11-50"><a href="#cb11-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-51"><a href="#cb11-51" aria-hidden="true" tabindex="-1"></a>estimate_1rm <span class="ot">&lt;-</span> <span class="cf">function</span>(model, athlete_id, weight, reps) {</span>
<span id="cb11-52"><a href="#cb11-52" aria-hidden="true" tabindex="-1"></a>  model <span class="sc">|&gt;</span></span>
<span id="cb11-53"><a href="#cb11-53" aria-hidden="true" tabindex="-1"></a>    <span class="fu">spread_draws</span>(b_logk_Intercept, r_athlete__logk[athlete, ]) <span class="sc">|&gt;</span></span>
<span id="cb11-54"><a href="#cb11-54" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(athlete <span class="sc">==</span> athlete_id) <span class="sc">|&gt;</span></span>
<span id="cb11-55"><a href="#cb11-55" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb11-56"><a href="#cb11-56" aria-hidden="true" tabindex="-1"></a>      <span class="at">est_endurance =</span> <span class="fu">exp</span>(b_logk_Intercept <span class="sc">+</span> r_athlete__logk),</span>
<span id="cb11-57"><a href="#cb11-57" aria-hidden="true" tabindex="-1"></a>      <span class="at">est_1RM =</span> weight <span class="sc">*</span> (<span class="dv">1</span> <span class="sc">+</span> reps <span class="sc">/</span> est_endurance)</span>
<span id="cb11-58"><a href="#cb11-58" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span></span>
<span id="cb11-59"><a href="#cb11-59" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(.draw, athlete, est_endurance, est_1RM)</span>
<span id="cb11-60"><a href="#cb11-60" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-6-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-6-2-tab">
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Data prep</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>model_data <span class="op">=</span> simulated_data.rename(</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    {<span class="st">"athlete_id"</span>: <span class="st">"athlete"</span>, <span class="st">"true_1rm"</span>: <span class="st">"orm"</span>, <span class="st">"weight_observed"</span>: <span class="st">"weight"</span>}</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Train/test split: hold out last observation per athlete</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>holdout <span class="op">=</span> model_data.sort(<span class="st">"session_id"</span>).group_by(<span class="st">"athlete"</span>).last()</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>train <span class="op">=</span> model_data.join(</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>    holdout.select(<span class="st">"athlete"</span>, <span class="st">"session_id"</span>), on<span class="op">=</span>[<span class="st">"athlete"</span>, <span class="st">"session_id"</span>], how<span class="op">=</span><span class="st">"anti"</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert to numpy for PyMC</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>athlete_idx, athlete_codes <span class="op">=</span> (</span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>    train[<span class="st">"athlete"</span>].to_numpy(),</span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>    np.unique(train[<span class="st">"athlete"</span>].to_numpy()),</span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>athlete_idx_mapped <span class="op">=</span> np.array([np.where(athlete_codes <span class="op">==</span> a)[<span class="dv">0</span>][<span class="dv">0</span>] <span class="cf">for</span> a <span class="kw">in</span> athlete_idx])</span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>n_athletes <span class="op">=</span> <span class="bu">len</span>(athlete_codes)</span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>weight <span class="op">=</span> train[<span class="st">"weight"</span>].to_numpy()</span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>reps <span class="op">=</span> train[<span class="st">"reps"</span>].to_numpy()</span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Model specification</span></span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> pm.Model() <span class="im">as</span> modified_epley_model:</span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Hyperpriors</span></span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a>    orm_mu <span class="op">=</span> pm.Normal(<span class="st">"orm_mu"</span>, mu<span class="op">=</span><span class="dv">140</span>, sigma<span class="op">=</span><span class="dv">30</span>)</span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a>    orm_sigma <span class="op">=</span> pm.Exponential(<span class="st">"orm_sigma"</span>, <span class="fl">0.05</span>)</span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-29"><a href="#cb12-29" aria-hidden="true" tabindex="-1"></a>    logk_mu <span class="op">=</span> pm.Normal(<span class="st">"logk_mu"</span>, mu<span class="op">=</span><span class="fl">3.4</span>, sigma<span class="op">=</span><span class="fl">0.3</span>)  <span class="co"># log(30) ≈ 3.4</span></span>
<span id="cb12-30"><a href="#cb12-30" aria-hidden="true" tabindex="-1"></a>    logk_sigma <span class="op">=</span> pm.Exponential(<span class="st">"logk_sigma"</span>, <span class="dv">2</span>)</span>
<span id="cb12-31"><a href="#cb12-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-32"><a href="#cb12-32" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Athlete-level parameters</span></span>
<span id="cb12-33"><a href="#cb12-33" aria-hidden="true" tabindex="-1"></a>    orm_athlete <span class="op">=</span> pm.Normal(<span class="st">"orm_athlete"</span>, mu<span class="op">=</span>orm_mu, sigma<span class="op">=</span>orm_sigma, shape<span class="op">=</span>n_athletes)</span>
<span id="cb12-34"><a href="#cb12-34" aria-hidden="true" tabindex="-1"></a>    logk_athlete <span class="op">=</span> pm.Normal(</span>
<span id="cb12-35"><a href="#cb12-35" aria-hidden="true" tabindex="-1"></a>        <span class="st">"logk_athlete"</span>, mu<span class="op">=</span>logk_mu, sigma<span class="op">=</span>logk_sigma, shape<span class="op">=</span>n_athletes</span>
<span id="cb12-36"><a href="#cb12-36" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb12-37"><a href="#cb12-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-38"><a href="#cb12-38" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Observation noise</span></span>
<span id="cb12-39"><a href="#cb12-39" aria-hidden="true" tabindex="-1"></a>    sigma <span class="op">=</span> pm.Exponential(<span class="st">"sigma"</span>, <span class="fl">0.2</span>)</span>
<span id="cb12-40"><a href="#cb12-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-41"><a href="#cb12-41" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Modified Epley formula: weight = orm / (1 + reps / exp(logk))</span></span>
<span id="cb12-42"><a href="#cb12-42" aria-hidden="true" tabindex="-1"></a>    mu <span class="op">=</span> orm_athlete[athlete_idx_mapped] <span class="op">/</span> (</span>
<span id="cb12-43"><a href="#cb12-43" aria-hidden="true" tabindex="-1"></a>        <span class="dv">1</span> <span class="op">+</span> reps <span class="op">/</span> np.exp(logk_athlete[athlete_idx_mapped])</span>
<span id="cb12-44"><a href="#cb12-44" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb12-45"><a href="#cb12-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-46"><a href="#cb12-46" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Likelihood</span></span>
<span id="cb12-47"><a href="#cb12-47" aria-hidden="true" tabindex="-1"></a>    weight_obs <span class="op">=</span> pm.Normal(<span class="st">"weight_obs"</span>, mu<span class="op">=</span>mu, sigma<span class="op">=</span>sigma, observed<span class="op">=</span>weight)</span>
<span id="cb12-48"><a href="#cb12-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-49"><a href="#cb12-49" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Sample</span></span>
<span id="cb12-50"><a href="#cb12-50" aria-hidden="true" tabindex="-1"></a>    modified_epley_trace <span class="op">=</span> pm.sample(</span>
<span id="cb12-51"><a href="#cb12-51" aria-hidden="true" tabindex="-1"></a>        draws<span class="op">=</span><span class="dv">2000</span>,</span>
<span id="cb12-52"><a href="#cb12-52" aria-hidden="true" tabindex="-1"></a>        tune<span class="op">=</span><span class="dv">2000</span>,</span>
<span id="cb12-53"><a href="#cb12-53" aria-hidden="true" tabindex="-1"></a>        cores<span class="op">=</span><span class="dv">4</span>,</span>
<span id="cb12-54"><a href="#cb12-54" aria-hidden="true" tabindex="-1"></a>        chains<span class="op">=</span><span class="dv">4</span>,</span>
<span id="cb12-55"><a href="#cb12-55" aria-hidden="true" tabindex="-1"></a>        random_seed<span class="op">=</span><span class="dv">2534</span>,</span>
<span id="cb12-56"><a href="#cb12-56" aria-hidden="true" tabindex="-1"></a>        target_accept<span class="op">=</span><span class="fl">0.95</span>,</span>
<span id="cb12-57"><a href="#cb12-57" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb12-58"><a href="#cb12-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-59"><a href="#cb12-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-60"><a href="#cb12-60" aria-hidden="true" tabindex="-1"></a><span class="co"># Function to estimate 1RM</span></span>
<span id="cb12-61"><a href="#cb12-61" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> estimate_1rm(trace, athlete_id, weight, reps, n_samples<span class="op">=</span><span class="dv">4000</span>):</span>
<span id="cb12-62"><a href="#cb12-62" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Get athlete index</span></span>
<span id="cb12-63"><a href="#cb12-63" aria-hidden="true" tabindex="-1"></a>    athlete_idx <span class="op">=</span> np.where(athlete_codes <span class="op">==</span> athlete_id)[<span class="dv">0</span>][<span class="dv">0</span>]</span>
<span id="cb12-64"><a href="#cb12-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-65"><a href="#cb12-65" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Extract posterior samples</span></span>
<span id="cb12-66"><a href="#cb12-66" aria-hidden="true" tabindex="-1"></a>    logk_samples <span class="op">=</span> trace.posterior[<span class="st">"logk_athlete"</span>].values.reshape(<span class="op">-</span><span class="dv">1</span>, n_athletes)[</span>
<span id="cb12-67"><a href="#cb12-67" aria-hidden="true" tabindex="-1"></a>        :, athlete_idx</span>
<span id="cb12-68"><a href="#cb12-68" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb12-69"><a href="#cb12-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-70"><a href="#cb12-70" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calculate estimated 1RM for each posterior sample</span></span>
<span id="cb12-71"><a href="#cb12-71" aria-hidden="true" tabindex="-1"></a>    est_endurance <span class="op">=</span> np.exp(logk_samples)</span>
<span id="cb12-72"><a href="#cb12-72" aria-hidden="true" tabindex="-1"></a>    est_1rm <span class="op">=</span> weight <span class="op">*</span> (<span class="dv">1</span> <span class="op">+</span> reps <span class="op">/</span> est_endurance)</span>
<span id="cb12-73"><a href="#cb12-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-74"><a href="#cb12-74" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {</span>
<span id="cb12-75"><a href="#cb12-75" aria-hidden="true" tabindex="-1"></a>        <span class="st">"athlete"</span>: athlete_id,</span>
<span id="cb12-76"><a href="#cb12-76" aria-hidden="true" tabindex="-1"></a>        <span class="st">"est_endurance"</span>: est_endurance[:n_samples],</span>
<span id="cb12-77"><a href="#cb12-77" aria-hidden="true" tabindex="-1"></a>        <span class="st">"est_1rm"</span>: est_1rm[:n_samples],</span>
<span id="cb12-78"><a href="#cb12-78" aria-hidden="true" tabindex="-1"></a>    }</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
<p>Now the model is fit, I use it to make 1RM estimates with the help of a custom function I’ve defined called <code>estimate_1rm()</code>. It takes the model object, the athlete ID, and the weight and reps the athlete performed in the set as arguments and gives me back a distribution of predictions.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-7-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-1" role="tab" aria-controls="tabset-7-1" aria-selected="true"><img src="../..\img/Rlogo.svg" height="25"></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-7-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-2" role="tab" aria-controls="tabset-7-2" aria-selected="false"><img src="../..\img/python-logo-only.svg" height="30"></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-7-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-7-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>example_predictions <span class="ot">&lt;-</span> <span class="fu">estimate_1rm</span>(</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">model =</span> modified_epley_model_fit,</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">athlete_id =</span> <span class="dv">17</span>,</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">weight =</span> <span class="fl">102.5</span>,</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">reps =</span> <span class="dv">5</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-7-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-7-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>example_predictions <span class="op">=</span> estimate_1rm(</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>    trace<span class="op">=</span>modified_epley_trace, athlete_id<span class="op">=</span><span class="dv">17</span>, weight<span class="op">=</span><span class="fl">102.5</span>, reps<span class="op">=</span><span class="dv">5</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-8-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-8-1" role="tab" aria-controls="tabset-8-1" aria-selected="true"><img src="../..\img/Rlogo.svg" height="25"></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-8-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-8-2" role="tab" aria-controls="tabset-8-2" aria-selected="false"><img src="../..\img/python-logo-only.svg" height="30"></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-8-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-8-1-tab">
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>example_dist <span class="ot">&lt;-</span> example_predictions <span class="sc">|&gt;</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> est_1RM)) <span class="sc">+</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_slab</span>(<span class="at">fill =</span> <span class="fu">lighten</span>(colours[<span class="dv">2</span>], <span class="fl">0.75</span>)) <span class="sc">+</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_spike</span>(<span class="at">at =</span> <span class="st">"median"</span>, <span class="at">size =</span> <span class="dv">0</span>, <span class="at">colour =</span> colours[<span class="dv">2</span>]) <span class="sc">+</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_thickness_shared</span>() <span class="sc">+</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"curve"</span>,</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="fl">120.5</span>,</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">xend =</span> <span class="fu">median</span>(example_predictions<span class="sc">$</span>est_1RM) <span class="sc">+</span> <span class="fl">0.1</span>,</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="dv">1</span>,</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">yend =</span> <span class="fl">0.925</span>,</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">curvature =</span> <span class="fl">0.25</span>,</span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">arrow =</span> <span class="fu">arrow</span>(<span class="at">length =</span> <span class="fu">unit</span>(<span class="dv">2</span>, <span class="st">"mm"</span>), <span class="at">type =</span> <span class="st">"closed"</span>),</span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">colour =</span> <span class="st">"grey60"</span></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(</span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">"text"</span>,</span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="fl">121.3</span>,</span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="fl">0.95</span>,</span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="st">"1RM estimate</span><span class="sc">\n</span><span class="st">(median)"</span>,</span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">hjust =</span> <span class="fl">0.5</span>,</span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">colour =</span> <span class="st">"grey35"</span>,</span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">family =</span> <span class="st">"Myriad Pro Regular"</span></span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(</span>
<span id="cb15-26"><a href="#cb15-26" aria-hidden="true" tabindex="-1"></a>    <span class="st">"text"</span>,</span>
<span id="cb15-27"><a href="#cb15-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="fl">116.7</span>,</span>
<span id="cb15-28"><a href="#cb15-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="fl">0.2</span>,</span>
<span id="cb15-29"><a href="#cb15-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="st">"Lower end of</span><span class="sc">\n</span><span class="st">estimates"</span>,</span>
<span id="cb15-30"><a href="#cb15-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">hjust =</span> <span class="fl">0.5</span>,</span>
<span id="cb15-31"><a href="#cb15-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">colour =</span> <span class="st">"grey35"</span>,</span>
<span id="cb15-32"><a href="#cb15-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">family =</span> <span class="st">"Myriad Pro Regular"</span></span>
<span id="cb15-33"><a href="#cb15-33" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb15-34"><a href="#cb15-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(</span>
<span id="cb15-35"><a href="#cb15-35" aria-hidden="true" tabindex="-1"></a>    <span class="st">"text"</span>,</span>
<span id="cb15-36"><a href="#cb15-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="dv">122</span>,</span>
<span id="cb15-37"><a href="#cb15-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="fl">0.2</span>,</span>
<span id="cb15-38"><a href="#cb15-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="st">"Upper end of</span><span class="sc">\n</span><span class="st">estimates"</span>,</span>
<span id="cb15-39"><a href="#cb15-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">hjust =</span> <span class="fl">0.5</span>,</span>
<span id="cb15-40"><a href="#cb15-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">colour =</span> <span class="st">"grey35"</span>,</span>
<span id="cb15-41"><a href="#cb15-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">family =</span> <span class="st">"Myriad Pro Regular"</span></span>
<span id="cb15-42"><a href="#cb15-42" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb15-43"><a href="#cb15-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb15-44"><a href="#cb15-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Estimated 1RM"</span>,</span>
<span id="cb15-45"><a href="#cb15-45" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> socials,</span>
<span id="cb15-46"><a href="#cb15-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Full distribution of 1RM estimates"</span>,</span>
<span id="cb15-47"><a href="#cb15-47" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="fu">paste0</span>(<span class="st">"Athlete 17 | Max reps set of 5 @ 102.5"</span>, units)</span>
<span id="cb15-48"><a href="#cb15-48" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb15-49"><a href="#cb15-49" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(</span>
<span id="cb15-50"><a href="#cb15-50" aria-hidden="true" tabindex="-1"></a>    <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">116</span>, <span class="dv">122</span>, <span class="dv">1</span>),</span>
<span id="cb15-51"><a href="#cb15-51" aria-hidden="true" tabindex="-1"></a>    <span class="at">labels =</span> <span class="fu">label_number</span>(<span class="at">suffix =</span> units)</span>
<span id="cb15-52"><a href="#cb15-52" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb15-53"><a href="#cb15-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">expand =</span> <span class="fu">expansion</span>(<span class="at">mult =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.05</span>))) <span class="sc">+</span></span>
<span id="cb15-54"><a href="#cb15-54" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb15-55"><a href="#cb15-55" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb15-56"><a href="#cb15-56" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb15-57"><a href="#cb15-57" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.line.y =</span> <span class="fu">element_blank</span>()</span>
<span id="cb15-58"><a href="#cb15-58" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb15-59"><a href="#cb15-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-60"><a href="#cb15-60" aria-hidden="true" tabindex="-1"></a>example_dist</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-8-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-8-2-tab">
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>example_pred_df <span class="op">=</span> pd.DataFrame({<span class="st">"est_1RM"</span>: example_predictions[<span class="st">"est_1rm"</span>]})</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>    ggplot(example_pred_df, aes(x<span class="op">=</span><span class="st">"est_1RM"</span>))</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> geom_density(fill<span class="op">=</span><span class="st">"#a8c7e6"</span>, alpha<span class="op">=</span><span class="fl">0.8</span>)</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> geom_vline(</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>        xintercept<span class="op">=</span>example_pred_df[<span class="st">"est_1RM"</span>].median(), color<span class="op">=</span><span class="st">"#134A8E"</span>, size<span class="op">=</span><span class="dv">1</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> labs(</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span><span class="st">"Estimated 1RM"</span>,</span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>        title<span class="op">=</span><span class="st">"Full distribution of 1RM estimates"</span>,</span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>        subtitle<span class="op">=</span><span class="ss">f"Athlete 17 | Max reps set of 5 @ 102.5</span><span class="sc">{</span>units<span class="sc">}</span><span class="ss">"</span>,</span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> scale_x_continuous(labels<span class="op">=</span><span class="kw">lambda</span> x: [<span class="ss">f"</span><span class="sc">{</span>v<span class="sc">:.0f}{</span>units<span class="sc">}</span><span class="ss">"</span> <span class="cf">for</span> v <span class="kw">in</span> x])</span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> theme_classic()</span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> theme(</span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a>        axis_text_y<span class="op">=</span>element_blank(),</span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a>        axis_ticks_major_y<span class="op">=</span>element_blank(),</span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a>        axis_line_y<span class="op">=</span>element_blank(),</span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a>        axis_title_y<span class="op">=</span>element_blank(),</span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a>        plot_title<span class="op">=</span>element_text(weight<span class="op">=</span><span class="st">"bold"</span>),</span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a>        plot_subtitle<span class="op">=</span>element_text(color<span class="op">=</span><span class="st">"grey"</span>),</span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb16-25"><a href="#cb16-25" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Sometimes the full distribution is a bit much and you just want a summary (e.g.&nbsp;median with 80% credible intervals).<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> Easy.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-9-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-9-1" role="tab" aria-controls="tabset-9-1" aria-selected="true"><img src="../..\img/Rlogo.svg" height="25"></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-9-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-9-2" role="tab" aria-controls="tabset-9-2" aria-selected="false"><img src="../..\img/python-logo-only.svg" height="30"></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-9-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-9-1-tab">
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>example_summary <span class="ot">&lt;-</span> example_predictions <span class="sc">|&gt;</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">median_qi</span>(<span class="at">.width =</span> <span class="fl">0.8</span>) <span class="sc">|&gt;</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">contains</span>(<span class="st">"endurance"</span>), <span class="sc">-</span>.interval) <span class="sc">|&gt;</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), \(x) <span class="fu">round</span>(x, <span class="dv">1</span>))) <span class="sc">|&gt;</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt_theme_538</span>(<span class="at">quiet =</span> <span class="cn">TRUE</span>)</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>example_summary</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-9-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-9-2-tab">
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>median_1rm <span class="op">=</span> np.median(example_predictions[<span class="st">"est_1rm"</span>])</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>lower_1rm <span class="op">=</span> np.percentile(example_predictions[<span class="st">"est_1rm"</span>], <span class="dv">10</span>)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>upper_1rm <span class="op">=</span> np.percentile(example_predictions[<span class="st">"est_1rm"</span>], <span class="dv">90</span>)</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>summary_df <span class="op">=</span> pl.DataFrame(</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>        <span class="st">"athlete"</span>: [example_predictions[<span class="st">"athlete"</span>]],</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>        <span class="st">"est_1RM"</span>: [<span class="bu">round</span>(median_1rm, <span class="dv">1</span>)],</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>        <span class="st">"est_1RM_lower"</span>: [<span class="bu">round</span>(lower_1rm, <span class="dv">1</span>)],</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>        <span class="st">"est_1RM_upper"</span>: [<span class="bu">round</span>(upper_1rm, <span class="dv">1</span>)],</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>GT(summary_df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div id="fmexrawwzh" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>@import url("https://fonts.googleapis.com/css2?family=Chivo:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap");
@import url("https://fonts.googleapis.com/css2?family=Chivo:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap");
@import url("https://fonts.googleapis.com/css2?family=Chivo:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap");
@import url("https://fonts.googleapis.com/css2?family=Cairo:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap");
#fmexrawwzh table {
  font-family: Cairo, system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#fmexrawwzh thead, #fmexrawwzh tbody, #fmexrawwzh tfoot, #fmexrawwzh tr, #fmexrawwzh td, #fmexrawwzh th {
  border-style: none;
}

#fmexrawwzh p {
  margin: 0;
  padding: 0;
}

#fmexrawwzh .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: 400;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: none;
  border-top-width: 3px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#fmexrawwzh .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#fmexrawwzh .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#fmexrawwzh .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#fmexrawwzh .gt_heading {
  background-color: #FFFFFF;
  text-align: left;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#fmexrawwzh .gt_bottom_border {
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#fmexrawwzh .gt_col_headings {
  border-top-style: none;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #000000;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#fmexrawwzh .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#fmexrawwzh .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#fmexrawwzh .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#fmexrawwzh .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#fmexrawwzh .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #000000;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#fmexrawwzh .gt_spanner_row {
  border-bottom-style: hidden;
}

#fmexrawwzh .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: none;
  border-top-width: 2px;
  border-top-color: #000000;
  border-bottom-style: solid;
  border-bottom-width: 1px;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#fmexrawwzh .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: none;
  border-top-width: 2px;
  border-top-color: #000000;
  border-bottom-style: solid;
  border-bottom-width: 1px;
  border-bottom-color: #FFFFFF;
  vertical-align: middle;
}

#fmexrawwzh .gt_from_md > :first-child {
  margin-top: 0;
}

#fmexrawwzh .gt_from_md > :last-child {
  margin-bottom: 0;
}

#fmexrawwzh .gt_row {
  padding-top: 3px;
  padding-bottom: 3px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#fmexrawwzh .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 0px;
  border-right-color: #FFFFFF;
  padding-left: 5px;
  padding-right: 5px;
}

#fmexrawwzh .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#fmexrawwzh .gt_row_group_first td {
  border-top-width: 2px;
}

#fmexrawwzh .gt_row_group_first th {
  border-top-width: 2px;
}

#fmexrawwzh .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#fmexrawwzh .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#fmexrawwzh .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#fmexrawwzh .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#fmexrawwzh .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#fmexrawwzh .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#fmexrawwzh .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#fmexrawwzh .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#fmexrawwzh .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#fmexrawwzh .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#fmexrawwzh .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#fmexrawwzh .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#fmexrawwzh .gt_sourcenote {
  font-size: 12px;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#fmexrawwzh .gt_left {
  text-align: left;
}

#fmexrawwzh .gt_center {
  text-align: center;
}

#fmexrawwzh .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#fmexrawwzh .gt_font_normal {
  font-weight: normal;
}

#fmexrawwzh .gt_font_bold {
  font-weight: bold;
}

#fmexrawwzh .gt_font_italic {
  font-style: italic;
}

#fmexrawwzh .gt_super {
  font-size: 65%;
}

#fmexrawwzh .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#fmexrawwzh .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#fmexrawwzh .gt_indent_1 {
  text-indent: 5px;
}

#fmexrawwzh .gt_indent_2 {
  text-indent: 10px;
}

#fmexrawwzh .gt_indent_3 {
  text-indent: 15px;
}

#fmexrawwzh .gt_indent_4 {
  text-indent: 20px;
}

#fmexrawwzh .gt_indent_5 {
  text-indent: 25px;
}

#fmexrawwzh .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#fmexrawwzh div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}

#fmexrawwzh tbody tr:last-child {
  border-bottom: 2px solid #ffffff00;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="border-top-width: 0px; border-top-style: solid; border-top-color: black; font-family: Chivo; font-size: 14px; vertical-align: bottom; font-weight: 200; text-transform: uppercase;" scope="col" id="athlete">athlete</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="border-top-width: 0px; border-top-style: solid; border-top-color: black; font-family: Chivo; font-size: 14px; vertical-align: bottom; font-weight: 200; text-transform: uppercase;" scope="col" id="est_1RM">est_1RM</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="border-top-width: 0px; border-top-style: solid; border-top-color: black; font-family: Chivo; font-size: 14px; vertical-align: bottom; font-weight: 200; text-transform: uppercase;" scope="col" id="est_1RM.lower">est_1RM.lower</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="border-top-width: 0px; border-top-style: solid; border-top-color: black; font-family: Chivo; font-size: 14px; vertical-align: bottom; font-weight: 200; text-transform: uppercase;" scope="col" id="est_1RM.upper">est_1RM.upper</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="border-top-width: 0px; border-top-style: solid; border-top-color: black; font-family: Chivo; font-size: 14px; vertical-align: bottom; font-weight: 200; text-transform: uppercase;" scope="col" id="a.width">.width</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" style="border-top-width: 0px; border-top-style: solid; border-top-color: black; font-family: Chivo; font-size: 14px; vertical-align: bottom; font-weight: 200; text-transform: uppercase;" scope="col" id="a.point">.point</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="athlete" class="gt_row gt_right">17</td>
<td headers="est_1RM" class="gt_row gt_right">119.3</td>
<td headers="est_1RM.lower" class="gt_row gt_right">118.2</td>
<td headers="est_1RM.upper" class="gt_row gt_right">120.3</td>
<td headers=".width" class="gt_row gt_right">0.8</td>
<td headers=".point" class="gt_row gt_left">median</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
</section>
</section>
<section id="how-accurate-is-it" class="level2">
<h2 class="anchored" data-anchor-id="how-accurate-is-it">How accurate is it?</h2>
<p>By seeing how close the model got to the true 1RM (defined in the simulation), and doing the same for the standard Epley formula, we can compare their predictive accuracy on new sets.<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a></p>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-10-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-10-1" role="tab" aria-controls="tabset-10-1" aria-selected="true"><img src="../..\img/Rlogo.svg" height="25"></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-10-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-10-2" role="tab" aria-controls="tabset-10-2" aria-selected="false"><img src="../..\img/python-logo-only.svg" height="30"></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-10-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-10-1-tab">
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>holdout_predictions <span class="ot">&lt;-</span> holdout <span class="sc">|&gt;</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rowwise</span>() <span class="sc">|&gt;</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">model_prediction =</span> <span class="fu">estimate_1rm</span>(</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>      modified_epley_model_fit,</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>      athlete,</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>      weight,</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>      reps</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>      <span class="fu">summarise</span>(<span class="at">prediction =</span> <span class="fu">median</span>(est_1RM)) <span class="sc">|&gt;</span></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>      <span class="fu">pull</span>(prediction),</span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">standard_epley_prediction =</span> weight <span class="sc">*</span> (<span class="dv">1</span> <span class="sc">+</span> reps <span class="sc">/</span> <span class="dv">30</span>)</span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span></span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(</span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>    athletes <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="at">athlete =</span> athlete_id, true_1rm),</span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">by =</span> <span class="st">"athlete"</span></span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">model_error =</span> model_prediction <span class="sc">-</span> true_1rm,</span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">standard_epley_error =</span> standard_epley_prediction <span class="sc">-</span> true_1rm,</span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">difference =</span> <span class="fu">abs</span>(model_error) <span class="sc">-</span> <span class="fu">abs</span>(standard_epley_error),</span>
<span id="cb19-23"><a href="#cb19-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">most_accurate_method =</span> <span class="fu">case_when</span>(</span>
<span id="cb19-24"><a href="#cb19-24" aria-hidden="true" tabindex="-1"></a>      <span class="fu">abs</span>(difference) <span class="sc">&lt;=</span> <span class="dv">1</span> <span class="sc">~</span> <span class="st">"Similar predictions (±1)"</span>,</span>
<span id="cb19-25"><a href="#cb19-25" aria-hidden="true" tabindex="-1"></a>      difference <span class="sc">&lt;</span> <span class="dv">0</span> <span class="sc">~</span> <span class="fu">paste0</span>(</span>
<span id="cb19-26"><a href="#cb19-26" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Model closer by "</span>,</span>
<span id="cb19-27"><a href="#cb19-27" aria-hidden="true" tabindex="-1"></a>        <span class="fu">round</span>(<span class="fu">abs</span>(difference), <span class="dv">1</span>),</span>
<span id="cb19-28"><a href="#cb19-28" aria-hidden="true" tabindex="-1"></a>        units</span>
<span id="cb19-29"><a href="#cb19-29" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb19-30"><a href="#cb19-30" aria-hidden="true" tabindex="-1"></a>      difference <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">~</span> <span class="fu">paste0</span>(</span>
<span id="cb19-31"><a href="#cb19-31" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Formula closer by "</span>,</span>
<span id="cb19-32"><a href="#cb19-32" aria-hidden="true" tabindex="-1"></a>        <span class="fu">round</span>(<span class="fu">abs</span>(difference), <span class="dv">1</span>),</span>
<span id="cb19-33"><a href="#cb19-33" aria-hidden="true" tabindex="-1"></a>        units</span>
<span id="cb19-34"><a href="#cb19-34" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb19-35"><a href="#cb19-35" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb19-36"><a href="#cb19-36" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb19-37"><a href="#cb19-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-38"><a href="#cb19-38" aria-hidden="true" tabindex="-1"></a>tbl <span class="ot">&lt;-</span> holdout_predictions <span class="sc">|&gt;</span></span>
<span id="cb19-39"><a href="#cb19-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(</span>
<span id="cb19-40"><a href="#cb19-40" aria-hidden="true" tabindex="-1"></a>    athlete,</span>
<span id="cb19-41"><a href="#cb19-41" aria-hidden="true" tabindex="-1"></a>    weight,</span>
<span id="cb19-42"><a href="#cb19-42" aria-hidden="true" tabindex="-1"></a>    reps,</span>
<span id="cb19-43"><a href="#cb19-43" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">True 1RM</span><span class="st">`</span> <span class="ot">=</span> true_1rm,</span>
<span id="cb19-44"><a href="#cb19-44" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Model prediction</span><span class="st">`</span> <span class="ot">=</span> model_prediction,</span>
<span id="cb19-45"><a href="#cb19-45" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Formula prediction</span><span class="st">`</span> <span class="ot">=</span> standard_epley_prediction,</span>
<span id="cb19-46"><a href="#cb19-46" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Most accurate method</span><span class="st">`</span> <span class="ot">=</span> most_accurate_method</span>
<span id="cb19-47"><a href="#cb19-47" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb19-48"><a href="#cb19-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), \(x) <span class="fu">round</span>(x, <span class="dv">1</span>))) <span class="sc">|&gt;</span></span>
<span id="cb19-49"><a href="#cb19-49" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span></span>
<span id="cb19-50"><a href="#cb19-50" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt_theme_538</span>(<span class="at">quiet =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span></span>
<span id="cb19-51"><a href="#cb19-51" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_align</span>(</span>
<span id="cb19-52"><a href="#cb19-52" aria-hidden="true" tabindex="-1"></a>    <span class="at">align =</span> <span class="st">"right"</span>,</span>
<span id="cb19-53"><a href="#cb19-53" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> <span class="st">`</span><span class="at">Most accurate method</span><span class="st">`</span></span>
<span id="cb19-54"><a href="#cb19-54" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb19-55"><a href="#cb19-55" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb19-56"><a href="#cb19-56" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">cell_fill</span>(<span class="at">color =</span> <span class="st">"#DCFCE7"</span>),</span>
<span id="cb19-57"><a href="#cb19-57" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_body</span>(<span class="at">rows =</span> <span class="fu">startsWith</span>(<span class="st">`</span><span class="at">Most accurate method</span><span class="st">`</span>, <span class="st">"Model"</span>))</span>
<span id="cb19-58"><a href="#cb19-58" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb19-59"><a href="#cb19-59" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb19-60"><a href="#cb19-60" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">cell_text</span>(</span>
<span id="cb19-61"><a href="#cb19-61" aria-hidden="true" tabindex="-1"></a>      <span class="at">color =</span> colours[<span class="dv">3</span>],</span>
<span id="cb19-62"><a href="#cb19-62" aria-hidden="true" tabindex="-1"></a>      <span class="at">weight =</span> <span class="st">"bold"</span></span>
<span id="cb19-63"><a href="#cb19-63" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb19-64"><a href="#cb19-64" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_body</span>(</span>
<span id="cb19-65"><a href="#cb19-65" aria-hidden="true" tabindex="-1"></a>      <span class="at">columns =</span> <span class="st">`</span><span class="at">Most accurate method</span><span class="st">`</span>,</span>
<span id="cb19-66"><a href="#cb19-66" aria-hidden="true" tabindex="-1"></a>      <span class="at">rows =</span> <span class="fu">startsWith</span>(<span class="st">`</span><span class="at">Most accurate method</span><span class="st">`</span>, <span class="st">"Model"</span>)</span>
<span id="cb19-67"><a href="#cb19-67" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb19-68"><a href="#cb19-68" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb19-69"><a href="#cb19-69" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb19-70"><a href="#cb19-70" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">cell_fill</span>(<span class="at">color =</span> <span class="st">"#DBEAFE"</span>),</span>
<span id="cb19-71"><a href="#cb19-71" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_body</span>(<span class="at">rows =</span> <span class="fu">startsWith</span>(<span class="st">`</span><span class="at">Most accurate method</span><span class="st">`</span>, <span class="st">"Formula"</span>))</span>
<span id="cb19-72"><a href="#cb19-72" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb19-73"><a href="#cb19-73" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb19-74"><a href="#cb19-74" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">cell_text</span>(</span>
<span id="cb19-75"><a href="#cb19-75" aria-hidden="true" tabindex="-1"></a>      <span class="at">color =</span> <span class="st">"#2563EB"</span>,</span>
<span id="cb19-76"><a href="#cb19-76" aria-hidden="true" tabindex="-1"></a>      <span class="at">weight =</span> <span class="st">"bold"</span></span>
<span id="cb19-77"><a href="#cb19-77" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb19-78"><a href="#cb19-78" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_body</span>(</span>
<span id="cb19-79"><a href="#cb19-79" aria-hidden="true" tabindex="-1"></a>      <span class="at">columns =</span> <span class="st">`</span><span class="at">Most accurate method</span><span class="st">`</span>,</span>
<span id="cb19-80"><a href="#cb19-80" aria-hidden="true" tabindex="-1"></a>      <span class="at">rows =</span> <span class="fu">startsWith</span>(<span class="st">`</span><span class="at">Most accurate method</span><span class="st">`</span>, <span class="st">"Formula"</span>)</span>
<span id="cb19-81"><a href="#cb19-81" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb19-82"><a href="#cb19-82" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb19-83"><a href="#cb19-83" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_source_note</span>(</span>
<span id="cb19-84"><a href="#cb19-84" aria-hidden="true" tabindex="-1"></a>    <span class="at">source_note =</span> <span class="fu">html</span>(socials)</span>
<span id="cb19-85"><a href="#cb19-85" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb19-86"><a href="#cb19-86" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb19-87"><a href="#cb19-87" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">cell_text</span>(<span class="at">align =</span> <span class="st">"right"</span>),</span>
<span id="cb19-88"><a href="#cb19-88" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_source_notes</span>()</span>
<span id="cb19-89"><a href="#cb19-89" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb19-90"><a href="#cb19-90" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_options</span>(</span>
<span id="cb19-91"><a href="#cb19-91" aria-hidden="true" tabindex="-1"></a>    <span class="at">source_notes.font.size =</span> <span class="dv">15</span></span>
<span id="cb19-92"><a href="#cb19-92" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb19-93"><a href="#cb19-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-94"><a href="#cb19-94" aria-hidden="true" tabindex="-1"></a>tbl</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-10-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-10-2-tab">
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>holdout_with_truth <span class="op">=</span> holdout.join(</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>    athletes.select(pl.col(<span class="st">"athlete_id"</span>).alias(<span class="st">"athlete"</span>), <span class="st">"true_1rm"</span>),</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>    on<span class="op">=</span><span class="st">"athlete"</span>,</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>    how<span class="op">=</span><span class="st">"left"</span>,</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Get predictions for each holdout observation</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>model_predictions <span class="op">=</span> []</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> row <span class="kw">in</span> holdout_with_truth.iter_rows(named<span class="op">=</span><span class="va">True</span>):</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>    pred <span class="op">=</span> estimate_1rm(</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>        modified_epley_trace,</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>        athlete_id<span class="op">=</span>row[<span class="st">"athlete"</span>],</span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>        weight<span class="op">=</span>row[<span class="st">"weight"</span>],</span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>        reps<span class="op">=</span>row[<span class="st">"reps"</span>],</span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>    model_predictions.append(np.median(pred[<span class="st">"est_1rm"</span>]))</span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate standard Epley predictions</span></span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a>holdout_predictions <span class="op">=</span> (</span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a>    holdout_with_truth.with_columns(</span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a>        pl.Series(<span class="st">"Model prediction"</span>, model_predictions),</span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a>        (pl.col(<span class="st">"weight"</span>) <span class="op">*</span> (<span class="dv">1</span> <span class="op">+</span> pl.col(<span class="st">"reps"</span>) <span class="op">/</span> <span class="dv">30</span>)).alias(<span class="st">"Formula prediction"</span>),</span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb20-24"><a href="#cb20-24" aria-hidden="true" tabindex="-1"></a>    .with_columns(</span>
<span id="cb20-25"><a href="#cb20-25" aria-hidden="true" tabindex="-1"></a>        (pl.col(<span class="st">"Model prediction"</span>) <span class="op">-</span> pl.col(<span class="st">"true_1rm"</span>)).alias(<span class="st">"model_error"</span>),</span>
<span id="cb20-26"><a href="#cb20-26" aria-hidden="true" tabindex="-1"></a>        (pl.col(<span class="st">"Formula prediction"</span>) <span class="op">-</span> pl.col(<span class="st">"true_1rm"</span>)).alias(</span>
<span id="cb20-27"><a href="#cb20-27" aria-hidden="true" tabindex="-1"></a>            <span class="st">"standard_epley_error"</span></span>
<span id="cb20-28"><a href="#cb20-28" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb20-29"><a href="#cb20-29" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb20-30"><a href="#cb20-30" aria-hidden="true" tabindex="-1"></a>    .with_columns(</span>
<span id="cb20-31"><a href="#cb20-31" aria-hidden="true" tabindex="-1"></a>        (pl.col(<span class="st">"model_error"</span>).<span class="bu">abs</span>() <span class="op">-</span> pl.col(<span class="st">"standard_epley_error"</span>).<span class="bu">abs</span>()).alias(</span>
<span id="cb20-32"><a href="#cb20-32" aria-hidden="true" tabindex="-1"></a>            <span class="st">"difference"</span></span>
<span id="cb20-33"><a href="#cb20-33" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb20-34"><a href="#cb20-34" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb20-35"><a href="#cb20-35" aria-hidden="true" tabindex="-1"></a>    .with_columns(</span>
<span id="cb20-36"><a href="#cb20-36" aria-hidden="true" tabindex="-1"></a>        pl.when(pl.col(<span class="st">"difference"</span>).<span class="bu">abs</span>() <span class="op">&lt;=</span> <span class="dv">1</span>)</span>
<span id="cb20-37"><a href="#cb20-37" aria-hidden="true" tabindex="-1"></a>        .then(pl.lit(<span class="st">"Similar predictions (±1)"</span>))</span>
<span id="cb20-38"><a href="#cb20-38" aria-hidden="true" tabindex="-1"></a>        .when(pl.col(<span class="st">"difference"</span>) <span class="op">&lt;</span> <span class="dv">0</span>)</span>
<span id="cb20-39"><a href="#cb20-39" aria-hidden="true" tabindex="-1"></a>        .then(</span>
<span id="cb20-40"><a href="#cb20-40" aria-hidden="true" tabindex="-1"></a>            pl.lit(<span class="st">"Model closer by "</span>)</span>
<span id="cb20-41"><a href="#cb20-41" aria-hidden="true" tabindex="-1"></a>            <span class="op">+</span> (pl.col(<span class="st">"difference"</span>).<span class="bu">abs</span>().<span class="bu">round</span>(<span class="dv">1</span>)).cast(pl.String)</span>
<span id="cb20-42"><a href="#cb20-42" aria-hidden="true" tabindex="-1"></a>            <span class="op">+</span> pl.lit(units)</span>
<span id="cb20-43"><a href="#cb20-43" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb20-44"><a href="#cb20-44" aria-hidden="true" tabindex="-1"></a>        .otherwise(</span>
<span id="cb20-45"><a href="#cb20-45" aria-hidden="true" tabindex="-1"></a>            pl.lit(<span class="st">"Formula closer by "</span>)</span>
<span id="cb20-46"><a href="#cb20-46" aria-hidden="true" tabindex="-1"></a>            <span class="op">+</span> (pl.col(<span class="st">"difference"</span>).<span class="bu">abs</span>().<span class="bu">round</span>(<span class="dv">1</span>)).cast(pl.String)</span>
<span id="cb20-47"><a href="#cb20-47" aria-hidden="true" tabindex="-1"></a>            <span class="op">+</span> pl.lit(units)</span>
<span id="cb20-48"><a href="#cb20-48" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb20-49"><a href="#cb20-49" aria-hidden="true" tabindex="-1"></a>        .alias(<span class="st">"Most accurate method"</span>)</span>
<span id="cb20-50"><a href="#cb20-50" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb20-51"><a href="#cb20-51" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-52"><a href="#cb20-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-53"><a href="#cb20-53" aria-hidden="true" tabindex="-1"></a>display_df <span class="op">=</span> (</span>
<span id="cb20-54"><a href="#cb20-54" aria-hidden="true" tabindex="-1"></a>    holdout_predictions.sort(<span class="st">"athlete"</span>)</span>
<span id="cb20-55"><a href="#cb20-55" aria-hidden="true" tabindex="-1"></a>    .select(</span>
<span id="cb20-56"><a href="#cb20-56" aria-hidden="true" tabindex="-1"></a>        <span class="st">"athlete"</span>,</span>
<span id="cb20-57"><a href="#cb20-57" aria-hidden="true" tabindex="-1"></a>        <span class="st">"weight"</span>,</span>
<span id="cb20-58"><a href="#cb20-58" aria-hidden="true" tabindex="-1"></a>        <span class="st">"reps"</span>,</span>
<span id="cb20-59"><a href="#cb20-59" aria-hidden="true" tabindex="-1"></a>        pl.col(<span class="st">"true_1rm"</span>).alias(<span class="st">"True 1RM"</span>),</span>
<span id="cb20-60"><a href="#cb20-60" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Model prediction"</span>,</span>
<span id="cb20-61"><a href="#cb20-61" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Formula prediction"</span>,</span>
<span id="cb20-62"><a href="#cb20-62" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Most accurate method"</span>,</span>
<span id="cb20-63"><a href="#cb20-63" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb20-64"><a href="#cb20-64" aria-hidden="true" tabindex="-1"></a>    .with_columns(cs.by_dtype(pl.Float64).<span class="bu">round</span>(<span class="dv">1</span>))</span>
<span id="cb20-65"><a href="#cb20-65" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-66"><a href="#cb20-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-67"><a href="#cb20-67" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb20-68"><a href="#cb20-68" aria-hidden="true" tabindex="-1"></a>    GT(display_df)</span>
<span id="cb20-69"><a href="#cb20-69" aria-hidden="true" tabindex="-1"></a>    .tab_style(</span>
<span id="cb20-70"><a href="#cb20-70" aria-hidden="true" tabindex="-1"></a>        style<span class="op">=</span>style.fill(color<span class="op">=</span><span class="st">"#DCFCE7"</span>),</span>
<span id="cb20-71"><a href="#cb20-71" aria-hidden="true" tabindex="-1"></a>        locations<span class="op">=</span>loc.body(</span>
<span id="cb20-72"><a href="#cb20-72" aria-hidden="true" tabindex="-1"></a>            rows<span class="op">=</span>pl.col(<span class="st">"Most accurate method"</span>).<span class="bu">str</span>.starts_with(<span class="st">"Model"</span>)</span>
<span id="cb20-73"><a href="#cb20-73" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb20-74"><a href="#cb20-74" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb20-75"><a href="#cb20-75" aria-hidden="true" tabindex="-1"></a>    .tab_style(</span>
<span id="cb20-76"><a href="#cb20-76" aria-hidden="true" tabindex="-1"></a>        style<span class="op">=</span>style.text(color<span class="op">=</span><span class="st">"#16A34A"</span>, weight<span class="op">=</span><span class="st">"bold"</span>),</span>
<span id="cb20-77"><a href="#cb20-77" aria-hidden="true" tabindex="-1"></a>        locations<span class="op">=</span>loc.body(</span>
<span id="cb20-78"><a href="#cb20-78" aria-hidden="true" tabindex="-1"></a>            columns<span class="op">=</span><span class="st">"Most accurate method"</span>,</span>
<span id="cb20-79"><a href="#cb20-79" aria-hidden="true" tabindex="-1"></a>            rows<span class="op">=</span>pl.col(<span class="st">"Most accurate method"</span>).<span class="bu">str</span>.starts_with(<span class="st">"Model"</span>),</span>
<span id="cb20-80"><a href="#cb20-80" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb20-81"><a href="#cb20-81" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb20-82"><a href="#cb20-82" aria-hidden="true" tabindex="-1"></a>    .tab_style(</span>
<span id="cb20-83"><a href="#cb20-83" aria-hidden="true" tabindex="-1"></a>        style<span class="op">=</span>style.fill(color<span class="op">=</span><span class="st">"#DBEAFE"</span>),</span>
<span id="cb20-84"><a href="#cb20-84" aria-hidden="true" tabindex="-1"></a>        locations<span class="op">=</span>loc.body(</span>
<span id="cb20-85"><a href="#cb20-85" aria-hidden="true" tabindex="-1"></a>            rows<span class="op">=</span>pl.col(<span class="st">"Most accurate method"</span>).<span class="bu">str</span>.starts_with(<span class="st">"Formula"</span>)</span>
<span id="cb20-86"><a href="#cb20-86" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb20-87"><a href="#cb20-87" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb20-88"><a href="#cb20-88" aria-hidden="true" tabindex="-1"></a>    .tab_style(</span>
<span id="cb20-89"><a href="#cb20-89" aria-hidden="true" tabindex="-1"></a>        style<span class="op">=</span>style.text(color<span class="op">=</span><span class="st">"#2563EB"</span>, weight<span class="op">=</span><span class="st">"bold"</span>),</span>
<span id="cb20-90"><a href="#cb20-90" aria-hidden="true" tabindex="-1"></a>        locations<span class="op">=</span>loc.body(</span>
<span id="cb20-91"><a href="#cb20-91" aria-hidden="true" tabindex="-1"></a>            columns<span class="op">=</span><span class="st">"Most accurate method"</span>,</span>
<span id="cb20-92"><a href="#cb20-92" aria-hidden="true" tabindex="-1"></a>            rows<span class="op">=</span>pl.col(<span class="st">"Most accurate method"</span>).<span class="bu">str</span>.starts_with(<span class="st">"Formula"</span>),</span>
<span id="cb20-93"><a href="#cb20-93" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb20-94"><a href="#cb20-94" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb20-95"><a href="#cb20-95" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div id="bdchyginvo" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>@import url("https://fonts.googleapis.com/css2?family=Chivo:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap");
@import url("https://fonts.googleapis.com/css2?family=Chivo:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap");
@import url("https://fonts.googleapis.com/css2?family=Chivo:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap");
@import url("https://fonts.googleapis.com/css2?family=Cairo:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap");
#bdchyginvo table {
  font-family: Cairo, system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#bdchyginvo thead, #bdchyginvo tbody, #bdchyginvo tfoot, #bdchyginvo tr, #bdchyginvo td, #bdchyginvo th {
  border-style: none;
}

#bdchyginvo p {
  margin: 0;
  padding: 0;
}

#bdchyginvo .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: 400;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: none;
  border-top-width: 3px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#bdchyginvo .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#bdchyginvo .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#bdchyginvo .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#bdchyginvo .gt_heading {
  background-color: #FFFFFF;
  text-align: left;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#bdchyginvo .gt_bottom_border {
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#bdchyginvo .gt_col_headings {
  border-top-style: none;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #000000;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#bdchyginvo .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#bdchyginvo .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#bdchyginvo .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#bdchyginvo .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#bdchyginvo .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #000000;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#bdchyginvo .gt_spanner_row {
  border-bottom-style: hidden;
}

#bdchyginvo .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: none;
  border-top-width: 2px;
  border-top-color: #000000;
  border-bottom-style: solid;
  border-bottom-width: 1px;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#bdchyginvo .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: none;
  border-top-width: 2px;
  border-top-color: #000000;
  border-bottom-style: solid;
  border-bottom-width: 1px;
  border-bottom-color: #FFFFFF;
  vertical-align: middle;
}

#bdchyginvo .gt_from_md > :first-child {
  margin-top: 0;
}

#bdchyginvo .gt_from_md > :last-child {
  margin-bottom: 0;
}

#bdchyginvo .gt_row {
  padding-top: 3px;
  padding-bottom: 3px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#bdchyginvo .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 0px;
  border-right-color: #FFFFFF;
  padding-left: 5px;
  padding-right: 5px;
}

#bdchyginvo .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#bdchyginvo .gt_row_group_first td {
  border-top-width: 2px;
}

#bdchyginvo .gt_row_group_first th {
  border-top-width: 2px;
}

#bdchyginvo .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#bdchyginvo .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#bdchyginvo .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#bdchyginvo .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#bdchyginvo .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#bdchyginvo .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#bdchyginvo .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#bdchyginvo .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#bdchyginvo .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#bdchyginvo .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#bdchyginvo .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#bdchyginvo .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#bdchyginvo .gt_sourcenote {
  font-size: 15px;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#bdchyginvo .gt_left {
  text-align: left;
}

#bdchyginvo .gt_center {
  text-align: center;
}

#bdchyginvo .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#bdchyginvo .gt_font_normal {
  font-weight: normal;
}

#bdchyginvo .gt_font_bold {
  font-weight: bold;
}

#bdchyginvo .gt_font_italic {
  font-style: italic;
}

#bdchyginvo .gt_super {
  font-size: 65%;
}

#bdchyginvo .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#bdchyginvo .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#bdchyginvo .gt_indent_1 {
  text-indent: 5px;
}

#bdchyginvo .gt_indent_2 {
  text-indent: 10px;
}

#bdchyginvo .gt_indent_3 {
  text-indent: 15px;
}

#bdchyginvo .gt_indent_4 {
  text-indent: 20px;
}

#bdchyginvo .gt_indent_5 {
  text-indent: 25px;
}

#bdchyginvo .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#bdchyginvo div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}

#bdchyginvo tbody tr:last-child {
  border-bottom: 2px solid #ffffff00;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="border-top-width: 0px; border-top-style: solid; border-top-color: black; font-family: Chivo; font-size: 14px; vertical-align: bottom; font-weight: 200; text-transform: uppercase;" scope="col" id="athlete">athlete</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="border-top-width: 0px; border-top-style: solid; border-top-color: black; font-family: Chivo; font-size: 14px; vertical-align: bottom; font-weight: 200; text-transform: uppercase;" scope="col" id="weight">weight</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="border-top-width: 0px; border-top-style: solid; border-top-color: black; font-family: Chivo; font-size: 14px; vertical-align: bottom; font-weight: 200; text-transform: uppercase;" scope="col" id="reps">reps</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="border-top-width: 0px; border-top-style: solid; border-top-color: black; font-family: Chivo; font-size: 14px; vertical-align: bottom; font-weight: 200; text-transform: uppercase;" scope="col" id="True-1RM">True 1RM</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="border-top-width: 0px; border-top-style: solid; border-top-color: black; font-family: Chivo; font-size: 14px; vertical-align: bottom; font-weight: 200; text-transform: uppercase;" scope="col" id="Model-prediction">Model prediction</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="border-top-width: 0px; border-top-style: solid; border-top-color: black; font-family: Chivo; font-size: 14px; vertical-align: bottom; font-weight: 200; text-transform: uppercase;" scope="col" id="Formula-prediction">Formula prediction</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="border-top-width: 0px; border-top-style: solid; border-top-color: black; font-family: Chivo; font-size: 14px; vertical-align: bottom; font-weight: 200; text-transform: uppercase;" scope="col" id="Most-accurate-method">Most accurate method</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="athlete" class="gt_row gt_right" style="background-color: #DCFCE7;">1</td>
<td headers="weight" class="gt_row gt_right" style="background-color: #DCFCE7;">97.0</td>
<td headers="reps" class="gt_row gt_right" style="background-color: #DCFCE7;">14</td>
<td headers="True 1RM" class="gt_row gt_right" style="background-color: #DCFCE7;">145.4</td>
<td headers="Model prediction" class="gt_row gt_right" style="background-color: #DCFCE7;">143.4</td>
<td headers="Formula prediction" class="gt_row gt_right" style="background-color: #DCFCE7;">142.3</td>
<td headers="Most accurate method" class="gt_row gt_right" style="background-color: #DCFCE7; color: #16A34A; font-weight: bold;">Model closer by 1.1kg</td></tr>
    <tr><td headers="athlete" class="gt_row gt_right" style="background-color: #DCFCE7;">2</td>
<td headers="weight" class="gt_row gt_right" style="background-color: #DCFCE7;">119.4</td>
<td headers="reps" class="gt_row gt_right" style="background-color: #DCFCE7;">4</td>
<td headers="True 1RM" class="gt_row gt_right" style="background-color: #DCFCE7;">131.2</td>
<td headers="Model prediction" class="gt_row gt_right" style="background-color: #DCFCE7;">132.1</td>
<td headers="Formula prediction" class="gt_row gt_right" style="background-color: #DCFCE7;">135.4</td>
<td headers="Most accurate method" class="gt_row gt_right" style="background-color: #DCFCE7; color: #16A34A; font-weight: bold;">Model closer by 3.3kg</td></tr>
    <tr><td headers="athlete" class="gt_row gt_right" style="background-color: #DCFCE7;">3</td>
<td headers="weight" class="gt_row gt_right" style="background-color: #DCFCE7;">130.8</td>
<td headers="reps" class="gt_row gt_right" style="background-color: #DCFCE7;">3</td>
<td headers="True 1RM" class="gt_row gt_right" style="background-color: #DCFCE7;">139.6</td>
<td headers="Model prediction" class="gt_row gt_right" style="background-color: #DCFCE7;">142.2</td>
<td headers="Formula prediction" class="gt_row gt_right" style="background-color: #DCFCE7;">143.9</td>
<td headers="Most accurate method" class="gt_row gt_right" style="background-color: #DCFCE7; color: #16A34A; font-weight: bold;">Model closer by 1.7kg</td></tr>
    <tr><td headers="athlete" class="gt_row gt_right" style="background-color: #DBEAFE;">4</td>
<td headers="weight" class="gt_row gt_right" style="background-color: #DBEAFE;">90.6</td>
<td headers="reps" class="gt_row gt_right" style="background-color: #DBEAFE;">14</td>
<td headers="True 1RM" class="gt_row gt_right" style="background-color: #DBEAFE;">133.6</td>
<td headers="Model prediction" class="gt_row gt_right" style="background-color: #DBEAFE;">139.3</td>
<td headers="Formula prediction" class="gt_row gt_right" style="background-color: #DBEAFE;">132.8</td>
<td headers="Most accurate method" class="gt_row gt_right" style="background-color: #DBEAFE; color: #2563EB; font-weight: bold;">Formula closer by 4.9kg</td></tr>
    <tr><td headers="athlete" class="gt_row gt_right" style="background-color: #DCFCE7;">5</td>
<td headers="weight" class="gt_row gt_right" style="background-color: #DCFCE7;">69.5</td>
<td headers="reps" class="gt_row gt_right" style="background-color: #DCFCE7;">13</td>
<td headers="True 1RM" class="gt_row gt_right" style="background-color: #DCFCE7;">97.8</td>
<td headers="Model prediction" class="gt_row gt_right" style="background-color: #DCFCE7;">97.5</td>
<td headers="Formula prediction" class="gt_row gt_right" style="background-color: #DCFCE7;">99.7</td>
<td headers="Most accurate method" class="gt_row gt_right" style="background-color: #DCFCE7; color: #16A34A; font-weight: bold;">Model closer by 1.6kg</td></tr>
    <tr><td headers="athlete" class="gt_row gt_right" style="background-color: #DCFCE7;">6</td>
<td headers="weight" class="gt_row gt_right" style="background-color: #DCFCE7;">85.1</td>
<td headers="reps" class="gt_row gt_right" style="background-color: #DCFCE7;">11</td>
<td headers="True 1RM" class="gt_row gt_right" style="background-color: #DCFCE7;">130.6</td>
<td headers="Model prediction" class="gt_row gt_right" style="background-color: #DCFCE7;">128.7</td>
<td headers="Formula prediction" class="gt_row gt_right" style="background-color: #DCFCE7;">116.3</td>
<td headers="Most accurate method" class="gt_row gt_right" style="background-color: #DCFCE7; color: #16A34A; font-weight: bold;">Model closer by 12.4kg</td></tr>
    <tr><td headers="athlete" class="gt_row gt_right" style="background-color: #DCFCE7;">7</td>
<td headers="weight" class="gt_row gt_right" style="background-color: #DCFCE7;">108.4</td>
<td headers="reps" class="gt_row gt_right" style="background-color: #DCFCE7;">11</td>
<td headers="True 1RM" class="gt_row gt_right" style="background-color: #DCFCE7;">139.2</td>
<td headers="Model prediction" class="gt_row gt_right" style="background-color: #DCFCE7;">143.5</td>
<td headers="Formula prediction" class="gt_row gt_right" style="background-color: #DCFCE7;">148.1</td>
<td headers="Most accurate method" class="gt_row gt_right" style="background-color: #DCFCE7; color: #16A34A; font-weight: bold;">Model closer by 4.5kg</td></tr>
    <tr><td headers="athlete" class="gt_row gt_right">8</td>
<td headers="weight" class="gt_row gt_right">127.7</td>
<td headers="reps" class="gt_row gt_right">4</td>
<td headers="True 1RM" class="gt_row gt_right">144.3</td>
<td headers="Model prediction" class="gt_row gt_right">144.8</td>
<td headers="Formula prediction" class="gt_row gt_right">144.7</td>
<td headers="Most accurate method" class="gt_row gt_right">Similar predictions (±1)</td></tr>
    <tr><td headers="athlete" class="gt_row gt_right" style="background-color: #DCFCE7;">9</td>
<td headers="weight" class="gt_row gt_right" style="background-color: #DCFCE7;">98.5</td>
<td headers="reps" class="gt_row gt_right" style="background-color: #DCFCE7;">14</td>
<td headers="True 1RM" class="gt_row gt_right" style="background-color: #DCFCE7;">137.5</td>
<td headers="Model prediction" class="gt_row gt_right" style="background-color: #DCFCE7;">140.8</td>
<td headers="Formula prediction" class="gt_row gt_right" style="background-color: #DCFCE7;">144.5</td>
<td headers="Most accurate method" class="gt_row gt_right" style="background-color: #DCFCE7; color: #16A34A; font-weight: bold;">Model closer by 3.7kg</td></tr>
    <tr><td headers="athlete" class="gt_row gt_right">10</td>
<td headers="weight" class="gt_row gt_right">129.2</td>
<td headers="reps" class="gt_row gt_right">4</td>
<td headers="True 1RM" class="gt_row gt_right">146.0</td>
<td headers="Model prediction" class="gt_row gt_right">145.6</td>
<td headers="Formula prediction" class="gt_row gt_right">146.5</td>
<td headers="Most accurate method" class="gt_row gt_right">Similar predictions (±1)</td></tr>
    <tr><td headers="athlete" class="gt_row gt_right">11</td>
<td headers="weight" class="gt_row gt_right">101.3</td>
<td headers="reps" class="gt_row gt_right">15</td>
<td headers="True 1RM" class="gt_row gt_right">149.9</td>
<td headers="Model prediction" class="gt_row gt_right">147.9</td>
<td headers="Formula prediction" class="gt_row gt_right">152.0</td>
<td headers="Most accurate method" class="gt_row gt_right">Similar predictions (±1)</td></tr>
    <tr><td headers="athlete" class="gt_row gt_right" style="background-color: #DCFCE7;">12</td>
<td headers="weight" class="gt_row gt_right" style="background-color: #DCFCE7;">132.8</td>
<td headers="reps" class="gt_row gt_right" style="background-color: #DCFCE7;">3</td>
<td headers="True 1RM" class="gt_row gt_right" style="background-color: #DCFCE7;">140.8</td>
<td headers="Model prediction" class="gt_row gt_right" style="background-color: #DCFCE7;">142.9</td>
<td headers="Formula prediction" class="gt_row gt_right" style="background-color: #DCFCE7;">146.1</td>
<td headers="Most accurate method" class="gt_row gt_right" style="background-color: #DCFCE7; color: #16A34A; font-weight: bold;">Model closer by 3.2kg</td></tr>
    <tr><td headers="athlete" class="gt_row gt_right">13</td>
<td headers="weight" class="gt_row gt_right">98.2</td>
<td headers="reps" class="gt_row gt_right">10</td>
<td headers="True 1RM" class="gt_row gt_right">130.2</td>
<td headers="Model prediction" class="gt_row gt_right">129.5</td>
<td headers="Formula prediction" class="gt_row gt_right">130.9</td>
<td headers="Most accurate method" class="gt_row gt_right">Similar predictions (±1)</td></tr>
    <tr><td headers="athlete" class="gt_row gt_right">14</td>
<td headers="weight" class="gt_row gt_right">103.3</td>
<td headers="reps" class="gt_row gt_right">7</td>
<td headers="True 1RM" class="gt_row gt_right">132.4</td>
<td headers="Model prediction" class="gt_row gt_right">127.5</td>
<td headers="Formula prediction" class="gt_row gt_right">127.4</td>
<td headers="Most accurate method" class="gt_row gt_right">Similar predictions (±1)</td></tr>
    <tr><td headers="athlete" class="gt_row gt_right" style="background-color: #DCFCE7;">15</td>
<td headers="weight" class="gt_row gt_right" style="background-color: #DCFCE7;">111.2</td>
<td headers="reps" class="gt_row gt_right" style="background-color: #DCFCE7;">11</td>
<td headers="True 1RM" class="gt_row gt_right" style="background-color: #DCFCE7;">164.1</td>
<td headers="Model prediction" class="gt_row gt_right" style="background-color: #DCFCE7;">154.2</td>
<td headers="Formula prediction" class="gt_row gt_right" style="background-color: #DCFCE7;">152.0</td>
<td headers="Most accurate method" class="gt_row gt_right" style="background-color: #DCFCE7; color: #16A34A; font-weight: bold;">Model closer by 2.2kg</td></tr>
    <tr><td headers="athlete" class="gt_row gt_right">16</td>
<td headers="weight" class="gt_row gt_right">76.2</td>
<td headers="reps" class="gt_row gt_right">15</td>
<td headers="True 1RM" class="gt_row gt_right">111.8</td>
<td headers="Model prediction" class="gt_row gt_right">113.7</td>
<td headers="Formula prediction" class="gt_row gt_right">114.3</td>
<td headers="Most accurate method" class="gt_row gt_right">Similar predictions (±1)</td></tr>
    <tr><td headers="athlete" class="gt_row gt_right">17</td>
<td headers="weight" class="gt_row gt_right">91.7</td>
<td headers="reps" class="gt_row gt_right">9</td>
<td headers="True 1RM" class="gt_row gt_right">119.9</td>
<td headers="Model prediction" class="gt_row gt_right">118.7</td>
<td headers="Formula prediction" class="gt_row gt_right">119.2</td>
<td headers="Most accurate method" class="gt_row gt_right">Similar predictions (±1)</td></tr>
    <tr><td headers="athlete" class="gt_row gt_right">18</td>
<td headers="weight" class="gt_row gt_right">75.3</td>
<td headers="reps" class="gt_row gt_right">14</td>
<td headers="True 1RM" class="gt_row gt_right">109.3</td>
<td headers="Model prediction" class="gt_row gt_right">110.8</td>
<td headers="Formula prediction" class="gt_row gt_right">110.5</td>
<td headers="Most accurate method" class="gt_row gt_right">Similar predictions (±1)</td></tr>
    <tr><td headers="athlete" class="gt_row gt_right" style="background-color: #DCFCE7;">19</td>
<td headers="weight" class="gt_row gt_right" style="background-color: #DCFCE7;">117.9</td>
<td headers="reps" class="gt_row gt_right" style="background-color: #DCFCE7;">9</td>
<td headers="True 1RM" class="gt_row gt_right" style="background-color: #DCFCE7;">142.9</td>
<td headers="Model prediction" class="gt_row gt_right" style="background-color: #DCFCE7;">145.4</td>
<td headers="Formula prediction" class="gt_row gt_right" style="background-color: #DCFCE7;">153.3</td>
<td headers="Most accurate method" class="gt_row gt_right" style="background-color: #DCFCE7; color: #16A34A; font-weight: bold;">Model closer by 7.9kg</td></tr>
    <tr><td headers="athlete" class="gt_row gt_right">20</td>
<td headers="weight" class="gt_row gt_right">127.6</td>
<td headers="reps" class="gt_row gt_right">3</td>
<td headers="True 1RM" class="gt_row gt_right">138.3</td>
<td headers="Model prediction" class="gt_row gt_right">139.8</td>
<td headers="Formula prediction" class="gt_row gt_right">140.3</td>
<td headers="Most accurate method" class="gt_row gt_right">Similar predictions (±1)</td></tr>
    <tr><td headers="athlete" class="gt_row gt_right">21</td>
<td headers="weight" class="gt_row gt_right">138.4</td>
<td headers="reps" class="gt_row gt_right">7</td>
<td headers="True 1RM" class="gt_row gt_right">168.7</td>
<td headers="Model prediction" class="gt_row gt_right">166.3</td>
<td headers="Formula prediction" class="gt_row gt_right">170.7</td>
<td headers="Most accurate method" class="gt_row gt_right">Similar predictions (±1)</td></tr>
    <tr><td headers="athlete" class="gt_row gt_right" style="background-color: #DBEAFE;">22</td>
<td headers="weight" class="gt_row gt_right" style="background-color: #DBEAFE;">82.6</td>
<td headers="reps" class="gt_row gt_right" style="background-color: #DBEAFE;">15</td>
<td headers="True 1RM" class="gt_row gt_right" style="background-color: #DBEAFE;">120.8</td>
<td headers="Model prediction" class="gt_row gt_right" style="background-color: #DBEAFE;">125.5</td>
<td headers="Formula prediction" class="gt_row gt_right" style="background-color: #DBEAFE;">123.9</td>
<td headers="Most accurate method" class="gt_row gt_right" style="background-color: #DBEAFE; color: #2563EB; font-weight: bold;">Formula closer by 1.6kg</td></tr>
    <tr><td headers="athlete" class="gt_row gt_right" style="background-color: #DCFCE7;">23</td>
<td headers="weight" class="gt_row gt_right" style="background-color: #DCFCE7;">107.8</td>
<td headers="reps" class="gt_row gt_right" style="background-color: #DCFCE7;">6</td>
<td headers="True 1RM" class="gt_row gt_right" style="background-color: #DCFCE7;">123.1</td>
<td headers="Model prediction" class="gt_row gt_right" style="background-color: #DCFCE7;">127.6</td>
<td headers="Formula prediction" class="gt_row gt_right" style="background-color: #DCFCE7;">129.4</td>
<td headers="Most accurate method" class="gt_row gt_right" style="background-color: #DCFCE7; color: #16A34A; font-weight: bold;">Model closer by 1.8kg</td></tr>
    <tr><td headers="athlete" class="gt_row gt_right" style="background-color: #DCFCE7;">24</td>
<td headers="weight" class="gt_row gt_right" style="background-color: #DCFCE7;">95.0</td>
<td headers="reps" class="gt_row gt_right" style="background-color: #DCFCE7;">15</td>
<td headers="True 1RM" class="gt_row gt_right" style="background-color: #DCFCE7;">164.6</td>
<td headers="Model prediction" class="gt_row gt_right" style="background-color: #DCFCE7;">168.5</td>
<td headers="Formula prediction" class="gt_row gt_right" style="background-color: #DCFCE7;">142.5</td>
<td headers="Most accurate method" class="gt_row gt_right" style="background-color: #DCFCE7; color: #16A34A; font-weight: bold;">Model closer by 18.2kg</td></tr>
    <tr><td headers="athlete" class="gt_row gt_right" style="background-color: #DCFCE7;">25</td>
<td headers="weight" class="gt_row gt_right" style="background-color: #DCFCE7;">104.7</td>
<td headers="reps" class="gt_row gt_right" style="background-color: #DCFCE7;">15</td>
<td headers="True 1RM" class="gt_row gt_right" style="background-color: #DCFCE7;">148.3</td>
<td headers="Model prediction" class="gt_row gt_right" style="background-color: #DCFCE7;">153.7</td>
<td headers="Formula prediction" class="gt_row gt_right" style="background-color: #DCFCE7;">157.1</td>
<td headers="Most accurate method" class="gt_row gt_right" style="background-color: #DCFCE7; color: #16A34A; font-weight: bold;">Model closer by 3.4kg</td></tr>
    <tr><td headers="athlete" class="gt_row gt_right">26</td>
<td headers="weight" class="gt_row gt_right">90.7</td>
<td headers="reps" class="gt_row gt_right">3</td>
<td headers="True 1RM" class="gt_row gt_right">102.3</td>
<td headers="Model prediction" class="gt_row gt_right">100.0</td>
<td headers="Formula prediction" class="gt_row gt_right">99.7</td>
<td headers="Most accurate method" class="gt_row gt_right">Similar predictions (±1)</td></tr>
    <tr><td headers="athlete" class="gt_row gt_right" style="background-color: #DCFCE7;">27</td>
<td headers="weight" class="gt_row gt_right" style="background-color: #DCFCE7;">72.3</td>
<td headers="reps" class="gt_row gt_right" style="background-color: #DCFCE7;">14</td>
<td headers="True 1RM" class="gt_row gt_right" style="background-color: #DCFCE7;">124.6</td>
<td headers="Model prediction" class="gt_row gt_right" style="background-color: #DCFCE7;">122.7</td>
<td headers="Formula prediction" class="gt_row gt_right" style="background-color: #DCFCE7;">106.0</td>
<td headers="Most accurate method" class="gt_row gt_right" style="background-color: #DCFCE7; color: #16A34A; font-weight: bold;">Model closer by 16.7kg</td></tr>
    <tr><td headers="athlete" class="gt_row gt_right" style="background-color: #DCFCE7;">28</td>
<td headers="weight" class="gt_row gt_right" style="background-color: #DCFCE7;">93.4</td>
<td headers="reps" class="gt_row gt_right" style="background-color: #DCFCE7;">10</td>
<td headers="True 1RM" class="gt_row gt_right" style="background-color: #DCFCE7;">131.2</td>
<td headers="Model prediction" class="gt_row gt_right" style="background-color: #DCFCE7;">131.6</td>
<td headers="Formula prediction" class="gt_row gt_right" style="background-color: #DCFCE7;">124.5</td>
<td headers="Most accurate method" class="gt_row gt_right" style="background-color: #DCFCE7; color: #16A34A; font-weight: bold;">Model closer by 6.2kg</td></tr>
    <tr><td headers="athlete" class="gt_row gt_right">29</td>
<td headers="weight" class="gt_row gt_right">111.5</td>
<td headers="reps" class="gt_row gt_right">6</td>
<td headers="True 1RM" class="gt_row gt_right">137.3</td>
<td headers="Model prediction" class="gt_row gt_right">140.3</td>
<td headers="Formula prediction" class="gt_row gt_right">133.7</td>
<td headers="Most accurate method" class="gt_row gt_right">Similar predictions (±1)</td></tr>
    <tr><td headers="athlete" class="gt_row gt_right" style="background-color: #DCFCE7;">30</td>
<td headers="weight" class="gt_row gt_right" style="background-color: #DCFCE7;">116.2</td>
<td headers="reps" class="gt_row gt_right" style="background-color: #DCFCE7;">7</td>
<td headers="True 1RM" class="gt_row gt_right" style="background-color: #DCFCE7;">147.9</td>
<td headers="Model prediction" class="gt_row gt_right" style="background-color: #DCFCE7;">145.1</td>
<td headers="Formula prediction" class="gt_row gt_right" style="background-color: #DCFCE7;">143.3</td>
<td headers="Most accurate method" class="gt_row gt_right" style="background-color: #DCFCE7; color: #16A34A; font-weight: bold;">Model closer by 1.9kg</td></tr>
  </tbody>
  <tfoot class="gt_sourcenotes">
    <tr>
      <td class="gt_sourcenote" style="text-align: right;" colspan="7"><span style="font-family:&quot;Font Awesome 6 Brands&quot;;color: dodgerblue"></span> <span style="font-family: &quot;Segoe UI&quot;;color: grey20">Mitch Henderson</span>
<span style="font-family:&quot;Font Awesome 6 Brands&quot;;color: dodgerblue"></span> <span style="font-family: &quot;Segoe UI&quot;;color: grey20">mitchhenderson</span>
<span style="font-family:&quot;Font Awesome 6 Brands&quot;;color: dodgerblue"></span> <span style="font-family: &quot;Segoe UI&quot;;color: grey20">mitchhenderson</span></td>
    </tr>
  </tfoot>
  
</table>
</div>
</div>
</div>
<p>Mean absolute error for the model was <strong>2.7kg</strong>.</p>
<p>Mean absolute error for the regular Epley formula was <strong>5.5kg</strong>.</p>
<p>The model was therefore <strong>2.8kg more accurate on average</strong> in this small simulated sample.<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a></p>
</section>
<section id="what-has-the-model-learned-about-the-athletes" class="level2">
<h2 class="anchored" data-anchor-id="what-has-the-model-learned-about-the-athletes">What has the model learned about the athletes?</h2>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-11-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-11-1" role="tab" aria-controls="tabset-11-1" aria-selected="true"><img src="../..\img/Rlogo.svg" height="25"></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-11-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-11-2" role="tab" aria-controls="tabset-11-2" aria-selected="false"><img src="../..\img/python-logo-only.svg" height="30"></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-11-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-11-1-tab">
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>athlete_endurance_summary <span class="ot">&lt;-</span> modified_epley_model_fit <span class="sc">|&gt;</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">spread_draws</span>(b_logk_Intercept, r_athlete__logk[athlete, ]) <span class="sc">|&gt;</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">endurance_parameter =</span> <span class="fu">exp</span>(b_logk_Intercept <span class="sc">+</span> r_athlete__logk)) <span class="sc">|&gt;</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(athlete) <span class="sc">|&gt;</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean_endurance_parameter =</span> <span class="fu">mean</span>(endurance_parameter)) <span class="sc">|&gt;</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(mean_endurance_parameter)</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Grab the athletes with the worst, median, and best strength endurance</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>selected_athletes <span class="ot">&lt;-</span> athlete_endurance_summary <span class="sc">|&gt;</span></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">15</span>, <span class="dv">30</span>)) <span class="sc">|&gt;</span></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(athlete)</span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>athlete_labels <span class="ot">&lt;-</span> athlete_endurance_summary <span class="sc">|&gt;</span></span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(athlete <span class="sc">%in%</span> selected_athletes) <span class="sc">|&gt;</span></span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="fu">paste0</span>(</span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Athlete "</span>,</span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a>      athlete,</span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a>      <span class="st">" (endurance parameter = "</span>,</span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a>      <span class="fu">round</span>(mean_endurance_parameter, <span class="dv">0</span>),</span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a>      <span class="st">")"</span></span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb21-24"><a href="#cb21-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-25"><a href="#cb21-25" aria-hidden="true" tabindex="-1"></a>endurance_profiles <span class="ot">&lt;-</span> modified_epley_model_fit <span class="sc">|&gt;</span></span>
<span id="cb21-26"><a href="#cb21-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">spread_draws</span>(</span>
<span id="cb21-27"><a href="#cb21-27" aria-hidden="true" tabindex="-1"></a>    b_orm_Intercept,</span>
<span id="cb21-28"><a href="#cb21-28" aria-hidden="true" tabindex="-1"></a>    b_logk_Intercept,</span>
<span id="cb21-29"><a href="#cb21-29" aria-hidden="true" tabindex="-1"></a>    r_athlete__orm[athlete, ],</span>
<span id="cb21-30"><a href="#cb21-30" aria-hidden="true" tabindex="-1"></a>    r_athlete__logk[athlete, ]</span>
<span id="cb21-31"><a href="#cb21-31" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb21-32"><a href="#cb21-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(athlete <span class="sc">%in%</span> selected_athletes) <span class="sc">|&gt;</span></span>
<span id="cb21-33"><a href="#cb21-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb21-34"><a href="#cb21-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">est_1RM =</span> b_orm_Intercept <span class="sc">+</span> r_athlete__orm,</span>
<span id="cb21-35"><a href="#cb21-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">endurance_parameter =</span> <span class="fu">exp</span>(b_logk_Intercept <span class="sc">+</span> r_athlete__logk),</span>
<span id="cb21-36"><a href="#cb21-36" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb21-37"><a href="#cb21-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">crossing</span>(<span class="at">reps =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">15</span>) <span class="sc">|&gt;</span></span>
<span id="cb21-38"><a href="#cb21-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pct_est_1RM =</span> <span class="dv">100</span> <span class="sc">/</span> (<span class="dv">1</span> <span class="sc">+</span> reps <span class="sc">/</span> endurance_parameter)) <span class="sc">|&gt;</span></span>
<span id="cb21-39"><a href="#cb21-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(athlete, reps) <span class="sc">|&gt;</span></span>
<span id="cb21-40"><a href="#cb21-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">median_qi</span>(pct_est_1RM, <span class="at">.width =</span> <span class="fl">0.8</span>) <span class="sc">|&gt;</span></span>
<span id="cb21-41"><a href="#cb21-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(athlete_labels, <span class="at">by =</span> <span class="st">"athlete"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-11-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-11-2-tab">
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>logk_athlete <span class="op">=</span> modified_epley_trace.posterior[<span class="st">"logk_athlete"</span>].values.reshape(</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>    <span class="op">-</span><span class="dv">1</span>, n_athletes</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate mean endurance parameter for each athlete</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>mean_endurance <span class="op">=</span> np.exp(logk_athlete.mean(axis<span class="op">=</span><span class="dv">0</span>))</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>athlete_endurance_summary <span class="op">=</span> pl.DataFrame(</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>        <span class="st">"athlete"</span>: athlete_codes,</span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>        <span class="st">"mean_endurance_parameter"</span>: mean_endurance,</span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>).sort(<span class="st">"mean_endurance_parameter"</span>)</span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Select athletes with worst, median, and best endurance</span></span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>selected_athletes <span class="op">=</span> (</span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>    athlete_endurance_summary.row(<span class="dv">1</span>),</span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a>    athlete_endurance_summary.row(<span class="dv">14</span>),</span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a>    athlete_endurance_summary.row(<span class="dv">29</span>),</span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a>selected_athlete_ids <span class="op">=</span> [row[<span class="dv">0</span>] <span class="cf">for</span> row <span class="kw">in</span> selected_athletes]</span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate endurance profiles across rep range</span></span>
<span id="cb22-23"><a href="#cb22-23" aria-hidden="true" tabindex="-1"></a>reps_range <span class="op">=</span> np.arange(<span class="dv">1</span>, <span class="dv">16</span>)</span>
<span id="cb22-24"><a href="#cb22-24" aria-hidden="true" tabindex="-1"></a>profiles <span class="op">=</span> []</span>
<span id="cb22-25"><a href="#cb22-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-26"><a href="#cb22-26" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> athlete_id <span class="kw">in</span> selected_athlete_ids:</span>
<span id="cb22-27"><a href="#cb22-27" aria-hidden="true" tabindex="-1"></a>    athlete_idx <span class="op">=</span> np.where(athlete_codes <span class="op">==</span> athlete_id)[<span class="dv">0</span>][<span class="dv">0</span>]</span>
<span id="cb22-28"><a href="#cb22-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-29"><a href="#cb22-29" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Get posterior samples for this athlete (no need to add logk_mu)</span></span>
<span id="cb22-30"><a href="#cb22-30" aria-hidden="true" tabindex="-1"></a>    logk_samples <span class="op">=</span> logk_athlete[:, athlete_idx]</span>
<span id="cb22-31"><a href="#cb22-31" aria-hidden="true" tabindex="-1"></a>    endurance_samples <span class="op">=</span> np.exp(logk_samples)</span>
<span id="cb22-32"><a href="#cb22-32" aria-hidden="true" tabindex="-1"></a>    mean_endurance_param <span class="op">=</span> endurance_samples.mean()</span>
<span id="cb22-33"><a href="#cb22-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-34"><a href="#cb22-34" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> reps <span class="kw">in</span> reps_range:</span>
<span id="cb22-35"><a href="#cb22-35" aria-hidden="true" tabindex="-1"></a>        pct_1rm_samples <span class="op">=</span> <span class="dv">100</span> <span class="op">/</span> (<span class="dv">1</span> <span class="op">+</span> reps <span class="op">/</span> endurance_samples)</span>
<span id="cb22-36"><a href="#cb22-36" aria-hidden="true" tabindex="-1"></a>        profiles.append(</span>
<span id="cb22-37"><a href="#cb22-37" aria-hidden="true" tabindex="-1"></a>            {</span>
<span id="cb22-38"><a href="#cb22-38" aria-hidden="true" tabindex="-1"></a>                <span class="st">"athlete"</span>: athlete_id,</span>
<span id="cb22-39"><a href="#cb22-39" aria-hidden="true" tabindex="-1"></a>                <span class="st">"reps"</span>: reps,</span>
<span id="cb22-40"><a href="#cb22-40" aria-hidden="true" tabindex="-1"></a>                <span class="st">"pct_est_1RM"</span>: np.median(pct_1rm_samples),</span>
<span id="cb22-41"><a href="#cb22-41" aria-hidden="true" tabindex="-1"></a>                <span class="st">"lower"</span>: np.percentile(pct_1rm_samples, <span class="dv">10</span>),</span>
<span id="cb22-42"><a href="#cb22-42" aria-hidden="true" tabindex="-1"></a>                <span class="st">"upper"</span>: np.percentile(pct_1rm_samples, <span class="dv">90</span>),</span>
<span id="cb22-43"><a href="#cb22-43" aria-hidden="true" tabindex="-1"></a>                <span class="st">"endurance_param"</span>: <span class="bu">round</span>(mean_endurance_param),</span>
<span id="cb22-44"><a href="#cb22-44" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb22-45"><a href="#cb22-45" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb22-46"><a href="#cb22-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-47"><a href="#cb22-47" aria-hidden="true" tabindex="-1"></a>endurance_profiles <span class="op">=</span> pd.DataFrame(profiles)</span>
<span id="cb22-48"><a href="#cb22-48" aria-hidden="true" tabindex="-1"></a>endurance_profiles[<span class="st">"label"</span>] <span class="op">=</span> endurance_profiles.<span class="bu">apply</span>(</span>
<span id="cb22-49"><a href="#cb22-49" aria-hidden="true" tabindex="-1"></a>    <span class="kw">lambda</span> row: <span class="ss">f"Athlete </span><span class="sc">{</span><span class="bu">int</span>(row[<span class="st">'athlete'</span>])<span class="sc">}</span><span class="ss"> (endurance = </span><span class="sc">{</span><span class="bu">int</span>(row[<span class="st">'endurance_param'</span>])<span class="sc">}</span><span class="ss">)"</span>,</span>
<span id="cb22-50"><a href="#cb22-50" aria-hidden="true" tabindex="-1"></a>    axis<span class="op">=</span><span class="dv">1</span>,</span>
<span id="cb22-51"><a href="#cb22-51" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
<p>To demonstrate this point, I’ll just show three athletes: the highest endurance (Athlete 12), the lowest endurance (Athlete 27), and one in the middle (Athlete 16).</p>
<p>See how each of their endurance parameters (that the model learned from their past training data) changes their 1RM estimate curve to be tailored to their traits.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-12-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-12-1" role="tab" aria-controls="tabset-12-1" aria-selected="true"><img src="../..\img/Rlogo.svg" height="25"></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-12-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-12-2" role="tab" aria-controls="tabset-12-2" aria-selected="false"><img src="../..\img/python-logo-only.svg" height="30"></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-12-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-12-1-tab">
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>predicted_curves_plot <span class="ot">&lt;-</span> endurance_profiles <span class="sc">|&gt;</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x =</span> reps, <span class="at">y =</span> pct_est_1RM, <span class="at">colour =</span> label, <span class="at">fill =</span> label)</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_ribbon</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> .lower, <span class="at">ymax =</span> .upper), <span class="at">alpha =</span> <span class="fl">0.15</span>, <span class="at">colour =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_textline</span>(</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">label =</span> label),</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">hjust =</span> <span class="fl">0.8</span>,</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">5</span>,</span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">family =</span> <span class="st">"Myriad Pro Regular"</span></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="fu">label_percent</span>(<span class="at">scale =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">15</span>), <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">15</span>, <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(colours[<span class="dv">3</span>], colours[<span class="dv">1</span>], colours[<span class="dv">2</span>])) <span class="sc">+</span></span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(colours[<span class="dv">3</span>], colours[<span class="dv">1</span>], colours[<span class="dv">2</span>])) <span class="sc">+</span></span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Repetitions"</span>,</span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Athletes with lower endurance fatigue faster"</span>,</span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"% of 1RM"</span>,</span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> socials,</span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="cn">NULL</span></span>
<span id="cb23-22"><a href="#cb23-22" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb23-23"><a href="#cb23-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb23-24"><a href="#cb23-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-25"><a href="#cb23-25" aria-hidden="true" tabindex="-1"></a>predicted_curves_plot</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-12-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-12-2-tab">
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>    ggplot(</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>        endurance_profiles, aes(x<span class="op">=</span><span class="st">"reps"</span>, y<span class="op">=</span><span class="st">"pct_est_1RM"</span>, colour<span class="op">=</span><span class="st">"label"</span>, fill<span class="op">=</span><span class="st">"label"</span>)</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> geom_ribbon(aes(ymin<span class="op">=</span><span class="st">"lower"</span>, ymax<span class="op">=</span><span class="st">"upper"</span>), alpha<span class="op">=</span><span class="fl">0.15</span>, linetype<span class="op">=</span><span class="st">"None"</span>)</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> geom_line(size<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> scale_y_continuous(labels<span class="op">=</span><span class="kw">lambda</span> x: [<span class="ss">f"</span><span class="sc">{</span>v<span class="sc">:.0f}</span><span class="ss">%"</span> <span class="cf">for</span> v <span class="kw">in</span> x])</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> scale_x_continuous(limits<span class="op">=</span>(<span class="dv">1</span>, <span class="dv">15</span>), breaks<span class="op">=</span><span class="bu">range</span>(<span class="dv">1</span>, <span class="dv">16</span>))</span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> scale_colour_manual(values<span class="op">=</span>[colours[<span class="dv">2</span>], colours[<span class="dv">0</span>], colours[<span class="dv">1</span>]])</span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> scale_fill_manual(values<span class="op">=</span>[colours[<span class="dv">2</span>], colours[<span class="dv">0</span>], colours[<span class="dv">1</span>]])</span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> labs(</span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span><span class="st">"Repetitions"</span>,</span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a>        title<span class="op">=</span><span class="st">"Athletes with lower endurance fatigue faster"</span>,</span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a>        subtitle<span class="op">=</span><span class="st">"</span><span class="sc">% o</span><span class="st">f 1RM"</span>,</span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> theme_classic()</span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> theme(</span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a>        legend_position<span class="op">=</span><span class="st">"bottom"</span>,</span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a>        legend_title<span class="op">=</span>element_blank(),</span>
<span id="cb24-21"><a href="#cb24-21" aria-hidden="true" tabindex="-1"></a>        plot_title<span class="op">=</span>element_text(weight<span class="op">=</span><span class="st">"bold"</span>),</span>
<span id="cb24-22"><a href="#cb24-22" aria-hidden="true" tabindex="-1"></a>        plot_subtitle<span class="op">=</span>element_text(color<span class="op">=</span><span class="st">"grey"</span>),</span>
<span id="cb24-23"><a href="#cb24-23" aria-hidden="true" tabindex="-1"></a>        axis_title_y<span class="op">=</span>element_blank(),</span>
<span id="cb24-24"><a href="#cb24-24" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb24-25"><a href="#cb24-25" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-31-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="how-much-does-having-historical-training-data-help" class="level2">
<h2 class="anchored" data-anchor-id="how-much-does-having-historical-training-data-help">How much does having historical training data help?</h2>
<p>When the model has more information to estimate a 1RM, it can typically afford to give a more confident estimate.<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a> Humans do this instinctively; we’re skeptical at first but grow confident after observing things repeatedly.</p>
<p>To demonstrate, here’s four athletes’ estimates after hypothetically performing a max reps set of 8 @ 100kg, each with a different amount of historical data used to train the model.</p>
<p>Notice how the shape of the 1RM estimate distribution becomes taller and thinner or wider and flatter as the amount of historical data changes. These shapes represent the level of certainty in the 1RM estimate and incorporate all sources of performance variability in the training data.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-13-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-13-1" role="tab" aria-controls="tabset-13-1" aria-selected="true"><img src="../..\img/Rlogo.svg" height="25"></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-13-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-13-2" role="tab" aria-controls="tabset-13-2" aria-selected="false"><img src="../..\img/python-logo-only.svg" height="30"></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-13-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-13-1-tab">
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>athletes_varying_obs <span class="ot">&lt;-</span> train <span class="sc">|&gt;</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(athlete, <span class="at">name =</span> <span class="st">"n_obs"</span>) <span class="sc">|&gt;</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(n_obs) <span class="sc">|&gt;</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">30</span>, <span class="at">by =</span> <span class="dv">9</span>))</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>data_varying_obs <span class="ot">&lt;-</span> athletes_varying_obs <span class="sc">|&gt;</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">estimate =</span> <span class="fu">map</span>(</span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>      athlete,</span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>      \(x) <span class="fu">estimate_1rm</span>(modified_epley_model_fit, x, <span class="dv">100</span>, <span class="dv">8</span>)</span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">athlete =</span> <span class="fu">factor</span>(</span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>      athlete,</span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>      <span class="at">levels =</span> <span class="fu">rev</span>(athletes_varying_obs<span class="sc">$</span>athlete),</span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a>      <span class="at">labels =</span> <span class="fu">paste0</span>(</span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Athlete "</span>,</span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a>        <span class="fu">rev</span>(athletes_varying_obs<span class="sc">$</span>athlete),</span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a>        <span class="st">"&lt;br&gt;&lt;span style='color:grey50; font-size:11pt;'&gt;("</span>,</span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true" tabindex="-1"></a>        <span class="fu">rev</span>(n_obs),</span>
<span id="cb25-20"><a href="#cb25-20" aria-hidden="true" tabindex="-1"></a>        <span class="st">" sets of historical data)&lt;/span&gt;"</span></span>
<span id="cb25-21"><a href="#cb25-21" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb25-22"><a href="#cb25-22" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb25-23"><a href="#cb25-23" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb25-24"><a href="#cb25-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">athlete_id =</span> athlete) <span class="sc">|&gt;</span></span>
<span id="cb25-25"><a href="#cb25-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(estimate)</span>
<span id="cb25-26"><a href="#cb25-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-27"><a href="#cb25-27" aria-hidden="true" tabindex="-1"></a>annotations <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb25-28"><a href="#cb25-28" aria-hidden="true" tabindex="-1"></a>  <span class="at">athlete_id =</span> <span class="fu">c</span>(</span>
<span id="cb25-29"><a href="#cb25-29" aria-hidden="true" tabindex="-1"></a>    data_varying_obs <span class="sc">|&gt;</span></span>
<span id="cb25-30"><a href="#cb25-30" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(n_obs <span class="sc">==</span> <span class="fu">max</span>(n_obs)) <span class="sc">|&gt;</span></span>
<span id="cb25-31"><a href="#cb25-31" aria-hidden="true" tabindex="-1"></a>      <span class="fu">pull</span>(athlete_id) <span class="sc">|&gt;</span></span>
<span id="cb25-32"><a href="#cb25-32" aria-hidden="true" tabindex="-1"></a>      <span class="fu">unique</span>(),</span>
<span id="cb25-33"><a href="#cb25-33" aria-hidden="true" tabindex="-1"></a>    data_varying_obs <span class="sc">|&gt;</span></span>
<span id="cb25-34"><a href="#cb25-34" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(n_obs <span class="sc">==</span> <span class="fu">min</span>(n_obs)) <span class="sc">|&gt;</span></span>
<span id="cb25-35"><a href="#cb25-35" aria-hidden="true" tabindex="-1"></a>      <span class="fu">pull</span>(athlete_id) <span class="sc">|&gt;</span></span>
<span id="cb25-36"><a href="#cb25-36" aria-hidden="true" tabindex="-1"></a>      <span class="fu">unique</span>()</span>
<span id="cb25-37"><a href="#cb25-37" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb25-38"><a href="#cb25-38" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="fu">c</span>(<span class="fl">130.5</span>, <span class="fl">130.5</span>),</span>
<span id="cb25-39"><a href="#cb25-39" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> <span class="fu">c</span>(<span class="fl">0.4</span>, <span class="fl">0.4</span>),</span>
<span id="cb25-40"><a href="#cb25-40" aria-hidden="true" tabindex="-1"></a>  <span class="at">label =</span> <span class="fu">c</span>(</span>
<span id="cb25-41"><a href="#cb25-41" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste0</span>(</span>
<span id="cb25-42"><a href="#cb25-42" aria-hidden="true" tabindex="-1"></a>      <span class="st">"More data → narrower distribution&lt;br&gt;"</span>,</span>
<span id="cb25-43"><a href="#cb25-43" aria-hidden="true" tabindex="-1"></a>      <span class="fu">max</span>(data_varying_obs<span class="sc">$</span>n_obs),</span>
<span id="cb25-44"><a href="#cb25-44" aria-hidden="true" tabindex="-1"></a>      <span class="st">" sets gives high confidence"</span></span>
<span id="cb25-45"><a href="#cb25-45" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb25-46"><a href="#cb25-46" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste0</span>(</span>
<span id="cb25-47"><a href="#cb25-47" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Less data → wider distribution&lt;br&gt;Only "</span>,</span>
<span id="cb25-48"><a href="#cb25-48" aria-hidden="true" tabindex="-1"></a>      <span class="fu">min</span>(data_varying_obs<span class="sc">$</span>n_obs),</span>
<span id="cb25-49"><a href="#cb25-49" aria-hidden="true" tabindex="-1"></a>      <span class="st">" sets means more uncertainty"</span></span>
<span id="cb25-50"><a href="#cb25-50" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb25-51"><a href="#cb25-51" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb25-52"><a href="#cb25-52" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb25-53"><a href="#cb25-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-54"><a href="#cb25-54" aria-hidden="true" tabindex="-1"></a>historical_data_plot <span class="ot">&lt;-</span> data_varying_obs <span class="sc">|&gt;</span></span>
<span id="cb25-55"><a href="#cb25-55" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> est_1RM)) <span class="sc">+</span></span>
<span id="cb25-56"><a href="#cb25-56" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>athlete_id, <span class="at">ncol =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb25-57"><a href="#cb25-57" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_slab</span>(<span class="at">fill =</span> <span class="fu">lighten</span>(colours[<span class="dv">2</span>], <span class="fl">0.75</span>)) <span class="sc">+</span></span>
<span id="cb25-58"><a href="#cb25-58" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_spike</span>(<span class="at">at =</span> <span class="st">"median"</span>, <span class="at">size =</span> <span class="dv">0</span>, <span class="at">colour =</span> colours[<span class="dv">2</span>]) <span class="sc">+</span></span>
<span id="cb25-59"><a href="#cb25-59" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_thickness_shared</span>() <span class="sc">+</span></span>
<span id="cb25-60"><a href="#cb25-60" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">colour =</span> <span class="st">"grey50"</span>, <span class="at">linewidth =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb25-61"><a href="#cb25-61" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_richtext</span>(</span>
<span id="cb25-62"><a href="#cb25-62" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> annotations,</span>
<span id="cb25-63"><a href="#cb25-63" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">label =</span> label),</span>
<span id="cb25-64"><a href="#cb25-64" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="cn">NA</span>,</span>
<span id="cb25-65"><a href="#cb25-65" aria-hidden="true" tabindex="-1"></a>    <span class="at">colour =</span> <span class="st">"grey35"</span>,</span>
<span id="cb25-66"><a href="#cb25-66" aria-hidden="true" tabindex="-1"></a>    <span class="at">hjust =</span> <span class="fl">0.5</span>,</span>
<span id="cb25-67"><a href="#cb25-67" aria-hidden="true" tabindex="-1"></a>    <span class="at">label.color =</span> <span class="cn">NA</span>,</span>
<span id="cb25-68"><a href="#cb25-68" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">4</span>,</span>
<span id="cb25-69"><a href="#cb25-69" aria-hidden="true" tabindex="-1"></a>    <span class="at">family =</span> <span class="st">"Myriad Pro Regular"</span></span>
<span id="cb25-70"><a href="#cb25-70" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb25-71"><a href="#cb25-71" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(</span>
<span id="cb25-72"><a href="#cb25-72" aria-hidden="true" tabindex="-1"></a>    <span class="at">labels =</span> <span class="fu">label_number</span>(<span class="at">suffix =</span> units),</span>
<span id="cb25-73"><a href="#cb25-73" aria-hidden="true" tabindex="-1"></a>    <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">117</span>, <span class="dv">133</span>)</span>
<span id="cb25-74"><a href="#cb25-74" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb25-75"><a href="#cb25-75" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb25-76"><a href="#cb25-76" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="cn">NULL</span>,</span>
<span id="cb25-77"><a href="#cb25-77" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Estimated 1RM"</span>,</span>
<span id="cb25-78"><a href="#cb25-78" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"1RM estimates with more data are usually more confident"</span>,</span>
<span id="cb25-79"><a href="#cb25-79" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> socials</span>
<span id="cb25-80"><a href="#cb25-80" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb25-81"><a href="#cb25-81" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">expand =</span> <span class="fu">expansion</span>(<span class="at">mult =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.05</span>))) <span class="sc">+</span></span>
<span id="cb25-82"><a href="#cb25-82" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb25-83"><a href="#cb25-83" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb25-84"><a href="#cb25-84" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb25-85"><a href="#cb25-85" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.line =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb25-86"><a href="#cb25-86" aria-hidden="true" tabindex="-1"></a>    <span class="at">strip.background =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb25-87"><a href="#cb25-87" aria-hidden="true" tabindex="-1"></a>    <span class="at">strip.text =</span> <span class="fu">element_markdown</span>(<span class="at">family =</span> <span class="st">"Myriad Pro Regular"</span>, <span class="at">hjust =</span> <span class="dv">0</span>)</span>
<span id="cb25-88"><a href="#cb25-88" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb25-89"><a href="#cb25-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-90"><a href="#cb25-90" aria-hidden="true" tabindex="-1"></a>historical_data_plot</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-13-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-13-2-tab">
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>athletes_varying_obs <span class="op">=</span> (</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>    train.group_by(<span class="st">"athlete"</span>)</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>    .<span class="bu">len</span>()</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>    .rename({<span class="st">"len"</span>: <span class="st">"n_obs"</span>})</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>    .sort(<span class="st">"n_obs"</span>)</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>    .gather_every(<span class="dv">9</span>, offset<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate 1RM estimates for each athlete (hypothetical 8 reps @ 100kg)</span></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>varying_obs_data <span class="op">=</span> []</span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> row <span class="kw">in</span> athletes_varying_obs.iter_rows(named<span class="op">=</span><span class="va">True</span>):</span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>    athlete_id <span class="op">=</span> row[<span class="st">"athlete"</span>]</span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a>    n_obs <span class="op">=</span> row[<span class="st">"n_obs"</span>]</span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a>    pred <span class="op">=</span> estimate_1rm(modified_epley_trace, athlete_id, weight<span class="op">=</span><span class="dv">100</span>, reps<span class="op">=</span><span class="dv">8</span>)</span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> est <span class="kw">in</span> pred[<span class="st">"est_1rm"</span>]:</span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a>        varying_obs_data.append(</span>
<span id="cb26-20"><a href="#cb26-20" aria-hidden="true" tabindex="-1"></a>            {</span>
<span id="cb26-21"><a href="#cb26-21" aria-hidden="true" tabindex="-1"></a>                <span class="st">"athlete"</span>: athlete_id,</span>
<span id="cb26-22"><a href="#cb26-22" aria-hidden="true" tabindex="-1"></a>                <span class="st">"n_obs"</span>: n_obs,</span>
<span id="cb26-23"><a href="#cb26-23" aria-hidden="true" tabindex="-1"></a>                <span class="st">"est_1RM"</span>: est,</span>
<span id="cb26-24"><a href="#cb26-24" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb26-25"><a href="#cb26-25" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb26-26"><a href="#cb26-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-27"><a href="#cb26-27" aria-hidden="true" tabindex="-1"></a>varying_obs_df <span class="op">=</span> pd.DataFrame(varying_obs_data)</span>
<span id="cb26-28"><a href="#cb26-28" aria-hidden="true" tabindex="-1"></a>varying_obs_df[<span class="st">"label"</span>] <span class="op">=</span> varying_obs_df.<span class="bu">apply</span>(</span>
<span id="cb26-29"><a href="#cb26-29" aria-hidden="true" tabindex="-1"></a>    <span class="kw">lambda</span> row: <span class="ss">f"Athlete </span><span class="sc">{</span><span class="bu">int</span>(row[<span class="st">'athlete'</span>])<span class="sc">}</span><span class="ss"> (</span><span class="sc">{</span><span class="bu">int</span>(row[<span class="st">'n_obs'</span>])<span class="sc">}</span><span class="ss"> sets of historical data)"</span>,</span>
<span id="cb26-30"><a href="#cb26-30" aria-hidden="true" tabindex="-1"></a>    axis<span class="op">=</span><span class="dv">1</span>,</span>
<span id="cb26-31"><a href="#cb26-31" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb26-32"><a href="#cb26-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-33"><a href="#cb26-33" aria-hidden="true" tabindex="-1"></a><span class="co"># Order by n_obs descending for facets</span></span>
<span id="cb26-34"><a href="#cb26-34" aria-hidden="true" tabindex="-1"></a>label_order <span class="op">=</span> (</span>
<span id="cb26-35"><a href="#cb26-35" aria-hidden="true" tabindex="-1"></a>    varying_obs_df.groupby(<span class="st">"label"</span>, observed<span class="op">=</span><span class="va">True</span>)[<span class="st">"n_obs"</span>]</span>
<span id="cb26-36"><a href="#cb26-36" aria-hidden="true" tabindex="-1"></a>    .first()</span>
<span id="cb26-37"><a href="#cb26-37" aria-hidden="true" tabindex="-1"></a>    .sort_values(ascending<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb26-38"><a href="#cb26-38" aria-hidden="true" tabindex="-1"></a>    .index.tolist()</span>
<span id="cb26-39"><a href="#cb26-39" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb26-40"><a href="#cb26-40" aria-hidden="true" tabindex="-1"></a>varying_obs_df[<span class="st">"label"</span>] <span class="op">=</span> pd.Categorical(</span>
<span id="cb26-41"><a href="#cb26-41" aria-hidden="true" tabindex="-1"></a>    varying_obs_df[<span class="st">"label"</span>], categories<span class="op">=</span>label_order, ordered<span class="op">=</span><span class="va">True</span></span>
<span id="cb26-42"><a href="#cb26-42" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb26-43"><a href="#cb26-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-44"><a href="#cb26-44" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb26-45"><a href="#cb26-45" aria-hidden="true" tabindex="-1"></a>    ggplot(varying_obs_df, aes(x<span class="op">=</span><span class="st">"est_1RM"</span>))</span>
<span id="cb26-46"><a href="#cb26-46" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> geom_density(fill<span class="op">=</span><span class="st">"#a8c7e6"</span>, alpha<span class="op">=</span><span class="fl">0.8</span>)</span>
<span id="cb26-47"><a href="#cb26-47" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> geom_vline(</span>
<span id="cb26-48"><a href="#cb26-48" aria-hidden="true" tabindex="-1"></a>        varying_obs_df.groupby(<span class="st">"label"</span>, observed<span class="op">=</span><span class="va">True</span>)[<span class="st">"est_1RM"</span>]</span>
<span id="cb26-49"><a href="#cb26-49" aria-hidden="true" tabindex="-1"></a>        .median()</span>
<span id="cb26-50"><a href="#cb26-50" aria-hidden="true" tabindex="-1"></a>        .reset_index(),</span>
<span id="cb26-51"><a href="#cb26-51" aria-hidden="true" tabindex="-1"></a>        aes(xintercept<span class="op">=</span><span class="st">"est_1RM"</span>),</span>
<span id="cb26-52"><a href="#cb26-52" aria-hidden="true" tabindex="-1"></a>        colour<span class="op">=</span><span class="st">"#134A8E"</span>,</span>
<span id="cb26-53"><a href="#cb26-53" aria-hidden="true" tabindex="-1"></a>        size<span class="op">=</span><span class="fl">0.8</span>,</span>
<span id="cb26-54"><a href="#cb26-54" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb26-55"><a href="#cb26-55" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> facet_wrap(<span class="st">"~label"</span>, ncol<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb26-56"><a href="#cb26-56" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> scale_x_continuous(labels<span class="op">=</span><span class="kw">lambda</span> x: [<span class="ss">f"</span><span class="sc">{</span>v<span class="sc">:.0f}{</span>units<span class="sc">}</span><span class="ss">"</span> <span class="cf">for</span> v <span class="kw">in</span> x])</span>
<span id="cb26-57"><a href="#cb26-57" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> labs(</span>
<span id="cb26-58"><a href="#cb26-58" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span><span class="st">"Estimated 1RM"</span>,</span>
<span id="cb26-59"><a href="#cb26-59" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span><span class="st">""</span>,</span>
<span id="cb26-60"><a href="#cb26-60" aria-hidden="true" tabindex="-1"></a>        title<span class="op">=</span><span class="st">"1RM estimates with more data are usually more confident"</span>,</span>
<span id="cb26-61"><a href="#cb26-61" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb26-62"><a href="#cb26-62" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> theme_classic()</span>
<span id="cb26-63"><a href="#cb26-63" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> theme(</span>
<span id="cb26-64"><a href="#cb26-64" aria-hidden="true" tabindex="-1"></a>        axis_text_y<span class="op">=</span>element_blank(),</span>
<span id="cb26-65"><a href="#cb26-65" aria-hidden="true" tabindex="-1"></a>        axis_ticks_major_y<span class="op">=</span>element_blank(),</span>
<span id="cb26-66"><a href="#cb26-66" aria-hidden="true" tabindex="-1"></a>        axis_title_y<span class="op">=</span>element_blank(),</span>
<span id="cb26-67"><a href="#cb26-67" aria-hidden="true" tabindex="-1"></a>        axis_line_y<span class="op">=</span>element_blank(),</span>
<span id="cb26-68"><a href="#cb26-68" aria-hidden="true" tabindex="-1"></a>        strip_text<span class="op">=</span>element_text(ha<span class="op">=</span><span class="st">"left"</span>),</span>
<span id="cb26-69"><a href="#cb26-69" aria-hidden="true" tabindex="-1"></a>        strip_background<span class="op">=</span>element_blank(),</span>
<span id="cb26-70"><a href="#cb26-70" aria-hidden="true" tabindex="-1"></a>        plot_title<span class="op">=</span>element_text(weight<span class="op">=</span><span class="st">"bold"</span>),</span>
<span id="cb26-71"><a href="#cb26-71" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb26-72"><a href="#cb26-72" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-34-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="how-much-accuracy-do-you-lose-with-higher-rep-sets" class="level2">
<h2 class="anchored" data-anchor-id="how-much-accuracy-do-you-lose-with-higher-rep-sets">How much accuracy do you lose with higher rep sets?</h2>
<p>The further a max reps set is from a true 1RM, the more the model has to extrapolate to provide an estimate. This extrapolation causes uncertainty in the 1RM estimates to compound. This is intuitive; predicting the weather a few hours from now isn’t impressive, but forecasting days or weeks in advance is much harder and carries a lot more uncertainty because of the added time for conditions to stray from your expectations.</p>
<p>Same idea here. Heavy sets where only 2–5 reps are completed are more representative of what your 1RM actually is.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-14-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-14-1" role="tab" aria-controls="tabset-14-1" aria-selected="true"><img src="../..\img/Rlogo.svg" height="25"></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-14-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-14-2" role="tab" aria-controls="tabset-14-2" aria-selected="false"><img src="../..\img/python-logo-only.svg" height="30"></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-14-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-14-1-tab">
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">2534</span>)</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>rep_count_plot_athlete <span class="ot">&lt;-</span> <span class="dv">6</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>rep_count_plot_athlete_data <span class="ot">&lt;-</span> train <span class="sc">|&gt;</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(athlete <span class="sc">==</span> rep_count_plot_athlete) <span class="sc">|&gt;</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">rep_bin =</span> <span class="fu">case_when</span>(</span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>      reps <span class="sc">&lt;=</span> <span class="dv">5</span> <span class="sc">~</span> <span class="st">"low"</span>,</span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>      reps <span class="sc">&lt;=</span> <span class="dv">10</span> <span class="sc">~</span> <span class="st">"mid"</span>,</span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"high"</span></span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(rep_bin) <span class="sc">|&gt;</span></span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">1</span>) <span class="sc">|&gt;</span></span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb27-17"><a href="#cb27-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-18"><a href="#cb27-18" aria-hidden="true" tabindex="-1"></a>rep_count_plot_athlete_1RM <span class="ot">&lt;-</span> rep_count_plot_athlete_data<span class="sc">$</span>orm[<span class="dv">1</span>]</span>
<span id="cb27-19"><a href="#cb27-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-20"><a href="#cb27-20" aria-hidden="true" tabindex="-1"></a>rep_count_plot_data <span class="ot">&lt;-</span> rep_count_plot_athlete_data <span class="sc">|&gt;</span></span>
<span id="cb27-21"><a href="#cb27-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pmap_dfr</span>(\(reps, weight, ...) {</span>
<span id="cb27-22"><a href="#cb27-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">estimate_1rm</span>(</span>
<span id="cb27-23"><a href="#cb27-23" aria-hidden="true" tabindex="-1"></a>      modified_epley_model_fit,</span>
<span id="cb27-24"><a href="#cb27-24" aria-hidden="true" tabindex="-1"></a>      <span class="at">athlete_id =</span> rep_count_plot_athlete,</span>
<span id="cb27-25"><a href="#cb27-25" aria-hidden="true" tabindex="-1"></a>      <span class="at">weight =</span> weight,</span>
<span id="cb27-26"><a href="#cb27-26" aria-hidden="true" tabindex="-1"></a>      <span class="at">reps =</span> reps</span>
<span id="cb27-27"><a href="#cb27-27" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span></span>
<span id="cb27-28"><a href="#cb27-28" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="at">scenario =</span> <span class="fu">paste0</span>(reps, <span class="st">" reps @ "</span>, <span class="fu">round</span>(weight, <span class="dv">0</span>), units))</span>
<span id="cb27-29"><a href="#cb27-29" aria-hidden="true" tabindex="-1"></a>  }) <span class="sc">|&gt;</span></span>
<span id="cb27-30"><a href="#cb27-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">scenario =</span> <span class="fu">fct_reorder</span>(scenario, <span class="fu">parse_number</span>(scenario)))</span>
<span id="cb27-31"><a href="#cb27-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-32"><a href="#cb27-32" aria-hidden="true" tabindex="-1"></a>scenario_levels <span class="ot">&lt;-</span> <span class="fu">levels</span>(<span class="fu">factor</span>(rep_count_plot_data<span class="sc">$</span>scenario))</span>
<span id="cb27-33"><a href="#cb27-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-34"><a href="#cb27-34" aria-hidden="true" tabindex="-1"></a>rep_count_plot_annotations <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb27-35"><a href="#cb27-35" aria-hidden="true" tabindex="-1"></a>  <span class="at">scenario =</span> <span class="fu">factor</span>(scenario_levels, <span class="at">levels =</span> scenario_levels),</span>
<span id="cb27-36"><a href="#cb27-36" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> rep_count_plot_athlete_1RM <span class="sc">-</span> <span class="fl">0.1</span>,</span>
<span id="cb27-37"><a href="#cb27-37" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> <span class="dv">1</span>,</span>
<span id="cb27-38"><a href="#cb27-38" aria-hidden="true" tabindex="-1"></a>  <span class="at">true_1RM_label =</span> <span class="fu">c</span>(<span class="st">"True 1RM"</span>, <span class="cn">NA</span>, <span class="cn">NA</span>),</span>
<span id="cb27-39"><a href="#cb27-39" aria-hidden="true" tabindex="-1"></a>  <span class="at">annotation =</span> <span class="fu">c</span>(</span>
<span id="cb27-40"><a href="#cb27-40" aria-hidden="true" tabindex="-1"></a>    <span class="st">"3 rep set → more confident"</span>,</span>
<span id="cb27-41"><a href="#cb27-41" aria-hidden="true" tabindex="-1"></a>    <span class="cn">NA</span>,</span>
<span id="cb27-42"><a href="#cb27-42" aria-hidden="true" tabindex="-1"></a>    <span class="st">"13 rep set → less confident"</span></span>
<span id="cb27-43"><a href="#cb27-43" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb27-44"><a href="#cb27-44" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb27-45"><a href="#cb27-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-46"><a href="#cb27-46" aria-hidden="true" tabindex="-1"></a>rep_count_plot <span class="ot">&lt;-</span> rep_count_plot_data <span class="sc">|&gt;</span></span>
<span id="cb27-47"><a href="#cb27-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> est_1RM)) <span class="sc">+</span></span>
<span id="cb27-48"><a href="#cb27-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>scenario, <span class="at">ncol =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb27-49"><a href="#cb27-49" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_slab</span>(<span class="at">fill =</span> <span class="fu">lighten</span>(colours[<span class="dv">2</span>], <span class="fl">0.75</span>)) <span class="sc">+</span></span>
<span id="cb27-50"><a href="#cb27-50" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_spike</span>(<span class="at">at =</span> <span class="st">"median"</span>, <span class="at">size =</span> <span class="dv">0</span>, <span class="at">colour =</span> colours[<span class="dv">2</span>]) <span class="sc">+</span></span>
<span id="cb27-51"><a href="#cb27-51" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_thickness_shared</span>() <span class="sc">+</span></span>
<span id="cb27-52"><a href="#cb27-52" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">colour =</span> <span class="st">"grey50"</span>, <span class="at">linewidth =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb27-53"><a href="#cb27-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(</span>
<span id="cb27-54"><a href="#cb27-54" aria-hidden="true" tabindex="-1"></a>    <span class="at">xintercept =</span> rep_count_plot_athlete_1RM,</span>
<span id="cb27-55"><a href="#cb27-55" aria-hidden="true" tabindex="-1"></a>    <span class="at">colour =</span> colours[<span class="dv">1</span>],</span>
<span id="cb27-56"><a href="#cb27-56" aria-hidden="true" tabindex="-1"></a>    <span class="at">linetype =</span> <span class="st">"dashed"</span>,</span>
<span id="cb27-57"><a href="#cb27-57" aria-hidden="true" tabindex="-1"></a>    <span class="at">linewidth =</span> <span class="fl">0.5</span></span>
<span id="cb27-58"><a href="#cb27-58" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb27-59"><a href="#cb27-59" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_richtext</span>(</span>
<span id="cb27-60"><a href="#cb27-60" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> rep_count_plot_annotations,</span>
<span id="cb27-61"><a href="#cb27-61" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">label =</span> true_1RM_label),</span>
<span id="cb27-62"><a href="#cb27-62" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="cn">NA</span>,</span>
<span id="cb27-63"><a href="#cb27-63" aria-hidden="true" tabindex="-1"></a>    <span class="at">colour =</span> colours[<span class="dv">1</span>],</span>
<span id="cb27-64"><a href="#cb27-64" aria-hidden="true" tabindex="-1"></a>    <span class="at">label.color =</span> <span class="cn">NA</span>,</span>
<span id="cb27-65"><a href="#cb27-65" aria-hidden="true" tabindex="-1"></a>    <span class="at">hjust =</span> <span class="dv">1</span>,</span>
<span id="cb27-66"><a href="#cb27-66" aria-hidden="true" tabindex="-1"></a>    <span class="at">family =</span> <span class="st">"Myriad Pro Regular"</span></span>
<span id="cb27-67"><a href="#cb27-67" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb27-68"><a href="#cb27-68" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_richtext</span>(</span>
<span id="cb27-69"><a href="#cb27-69" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> rep_count_plot_annotations,</span>
<span id="cb27-70"><a href="#cb27-70" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x =</span> x <span class="sc">+</span> <span class="fl">4.5</span>, <span class="at">y =</span> <span class="fl">0.4</span>, <span class="at">label =</span> annotation),</span>
<span id="cb27-71"><a href="#cb27-71" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="cn">NA</span>,</span>
<span id="cb27-72"><a href="#cb27-72" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="fl">4.5</span>,</span>
<span id="cb27-73"><a href="#cb27-73" aria-hidden="true" tabindex="-1"></a>    <span class="at">colour =</span> <span class="st">"grey35"</span>,</span>
<span id="cb27-74"><a href="#cb27-74" aria-hidden="true" tabindex="-1"></a>    <span class="at">label.color =</span> <span class="cn">NA</span>,</span>
<span id="cb27-75"><a href="#cb27-75" aria-hidden="true" tabindex="-1"></a>    <span class="at">family =</span> <span class="st">"Myriad Pro Regular"</span></span>
<span id="cb27-76"><a href="#cb27-76" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb27-77"><a href="#cb27-77" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb27-78"><a href="#cb27-78" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Estimated 1RM (kg)"</span>,</span>
<span id="cb27-79"><a href="#cb27-79" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="cn">NULL</span>,</span>
<span id="cb27-80"><a href="#cb27-80" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"1RM estimates are more confident with lower rep sets"</span>,</span>
<span id="cb27-81"><a href="#cb27-81" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="fu">paste0</span>(</span>
<span id="cb27-82"><a href="#cb27-82" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Athlete "</span>,</span>
<span id="cb27-83"><a href="#cb27-83" aria-hidden="true" tabindex="-1"></a>      rep_count_plot_athlete,</span>
<span id="cb27-84"><a href="#cb27-84" aria-hidden="true" tabindex="-1"></a>      <span class="st">" | Max rep sets from simulated training data"</span></span>
<span id="cb27-85"><a href="#cb27-85" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb27-86"><a href="#cb27-86" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> socials</span>
<span id="cb27-87"><a href="#cb27-87" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb27-88"><a href="#cb27-88" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(</span>
<span id="cb27-89"><a href="#cb27-89" aria-hidden="true" tabindex="-1"></a>    <span class="at">labels =</span> <span class="fu">label_number</span>(<span class="at">suffix =</span> units),</span>
<span id="cb27-90"><a href="#cb27-90" aria-hidden="true" tabindex="-1"></a>    <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">122</span>, <span class="dv">137</span>)</span>
<span id="cb27-91"><a href="#cb27-91" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb27-92"><a href="#cb27-92" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb27-93"><a href="#cb27-93" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb27-94"><a href="#cb27-94" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb27-95"><a href="#cb27-95" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.line =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb27-96"><a href="#cb27-96" aria-hidden="true" tabindex="-1"></a>    <span class="at">strip.background =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb27-97"><a href="#cb27-97" aria-hidden="true" tabindex="-1"></a>    <span class="at">strip.text =</span> <span class="fu">element_markdown</span>(<span class="at">family =</span> <span class="st">"Myriad Pro Regular"</span>, <span class="at">hjust =</span> <span class="dv">0</span>)</span>
<span id="cb27-98"><a href="#cb27-98" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb27-99"><a href="#cb27-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-100"><a href="#cb27-100" aria-hidden="true" tabindex="-1"></a>rep_count_plot</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-14-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-14-2-tab">
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>np.random.seed(<span class="dv">2534</span>)</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Pick an athlete</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>rep_count_plot_athlete <span class="op">=</span> <span class="dv">6</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Get their data and sample one set from each rep bin</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>rep_count_athlete_data <span class="op">=</span> (</span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>    train.<span class="bu">filter</span>(pl.col(<span class="st">"athlete"</span>) <span class="op">==</span> rep_count_plot_athlete)</span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>    .with_columns(</span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>        pl.when(pl.col(<span class="st">"reps"</span>) <span class="op">&lt;=</span> <span class="dv">5</span>)</span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>        .then(pl.lit(<span class="st">"low"</span>))</span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a>        .when(pl.col(<span class="st">"reps"</span>) <span class="op">&lt;=</span> <span class="dv">10</span>)</span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a>        .then(pl.lit(<span class="st">"mid"</span>))</span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a>        .otherwise(pl.lit(<span class="st">"high"</span>))</span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a>        .alias(<span class="st">"rep_bin"</span>)</span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb28-17"><a href="#cb28-17" aria-hidden="true" tabindex="-1"></a>    .group_by(<span class="st">"rep_bin"</span>)</span>
<span id="cb28-18"><a href="#cb28-18" aria-hidden="true" tabindex="-1"></a>    .agg(pl.<span class="bu">all</span>().sample(n<span class="op">=</span><span class="dv">1</span>, seed<span class="op">=</span><span class="dv">2534</span>))</span>
<span id="cb28-19"><a href="#cb28-19" aria-hidden="true" tabindex="-1"></a>    .explode(pl.exclude(<span class="st">"rep_bin"</span>))</span>
<span id="cb28-20"><a href="#cb28-20" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb28-21"><a href="#cb28-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-22"><a href="#cb28-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate predictions for each set</span></span>
<span id="cb28-23"><a href="#cb28-23" aria-hidden="true" tabindex="-1"></a>rep_count_data <span class="op">=</span> []</span>
<span id="cb28-24"><a href="#cb28-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-25"><a href="#cb28-25" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> row <span class="kw">in</span> rep_count_athlete_data.iter_rows(named<span class="op">=</span><span class="va">True</span>):</span>
<span id="cb28-26"><a href="#cb28-26" aria-hidden="true" tabindex="-1"></a>    pred <span class="op">=</span> estimate_1rm(</span>
<span id="cb28-27"><a href="#cb28-27" aria-hidden="true" tabindex="-1"></a>        modified_epley_trace,</span>
<span id="cb28-28"><a href="#cb28-28" aria-hidden="true" tabindex="-1"></a>        athlete_id<span class="op">=</span>rep_count_plot_athlete,</span>
<span id="cb28-29"><a href="#cb28-29" aria-hidden="true" tabindex="-1"></a>        weight<span class="op">=</span>row[<span class="st">"weight"</span>],</span>
<span id="cb28-30"><a href="#cb28-30" aria-hidden="true" tabindex="-1"></a>        reps<span class="op">=</span>row[<span class="st">"reps"</span>],</span>
<span id="cb28-31"><a href="#cb28-31" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb28-32"><a href="#cb28-32" aria-hidden="true" tabindex="-1"></a>    scenario <span class="op">=</span> <span class="ss">f"</span><span class="sc">{</span>row[<span class="st">'reps'</span>]<span class="sc">}</span><span class="ss"> reps @ </span><span class="sc">{</span><span class="bu">round</span>(row[<span class="st">'weight'</span>])<span class="sc">}{</span>units<span class="sc">}</span><span class="ss">"</span></span>
<span id="cb28-33"><a href="#cb28-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-34"><a href="#cb28-34" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> est <span class="kw">in</span> pred[<span class="st">"est_1rm"</span>]:</span>
<span id="cb28-35"><a href="#cb28-35" aria-hidden="true" tabindex="-1"></a>        rep_count_data.append(</span>
<span id="cb28-36"><a href="#cb28-36" aria-hidden="true" tabindex="-1"></a>            {</span>
<span id="cb28-37"><a href="#cb28-37" aria-hidden="true" tabindex="-1"></a>                <span class="st">"reps"</span>: row[<span class="st">"reps"</span>],</span>
<span id="cb28-38"><a href="#cb28-38" aria-hidden="true" tabindex="-1"></a>                <span class="st">"scenario"</span>: scenario,</span>
<span id="cb28-39"><a href="#cb28-39" aria-hidden="true" tabindex="-1"></a>                <span class="st">"est_1RM"</span>: est,</span>
<span id="cb28-40"><a href="#cb28-40" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb28-41"><a href="#cb28-41" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb28-42"><a href="#cb28-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-43"><a href="#cb28-43" aria-hidden="true" tabindex="-1"></a>rep_count_df <span class="op">=</span> pd.DataFrame(rep_count_data)</span>
<span id="cb28-44"><a href="#cb28-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-45"><a href="#cb28-45" aria-hidden="true" tabindex="-1"></a><span class="co"># Order scenarios by rep count</span></span>
<span id="cb28-46"><a href="#cb28-46" aria-hidden="true" tabindex="-1"></a>scenario_order <span class="op">=</span> (</span>
<span id="cb28-47"><a href="#cb28-47" aria-hidden="true" tabindex="-1"></a>    rep_count_df.groupby(<span class="st">"scenario"</span>, observed<span class="op">=</span><span class="va">True</span>)[<span class="st">"reps"</span>]</span>
<span id="cb28-48"><a href="#cb28-48" aria-hidden="true" tabindex="-1"></a>    .first()</span>
<span id="cb28-49"><a href="#cb28-49" aria-hidden="true" tabindex="-1"></a>    .sort_values()</span>
<span id="cb28-50"><a href="#cb28-50" aria-hidden="true" tabindex="-1"></a>    .index.tolist()</span>
<span id="cb28-51"><a href="#cb28-51" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb28-52"><a href="#cb28-52" aria-hidden="true" tabindex="-1"></a>rep_count_df[<span class="st">"scenario"</span>] <span class="op">=</span> pd.Categorical(</span>
<span id="cb28-53"><a href="#cb28-53" aria-hidden="true" tabindex="-1"></a>    rep_count_df[<span class="st">"scenario"</span>], categories<span class="op">=</span>scenario_order, ordered<span class="op">=</span><span class="va">True</span></span>
<span id="cb28-54"><a href="#cb28-54" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb28-55"><a href="#cb28-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-56"><a href="#cb28-56" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb28-57"><a href="#cb28-57" aria-hidden="true" tabindex="-1"></a>    ggplot(rep_count_df, aes(x<span class="op">=</span><span class="st">"est_1RM"</span>))</span>
<span id="cb28-58"><a href="#cb28-58" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> geom_density(fill<span class="op">=</span><span class="st">"#a8c7e6"</span>, alpha<span class="op">=</span><span class="fl">0.8</span>)</span>
<span id="cb28-59"><a href="#cb28-59" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> geom_vline(</span>
<span id="cb28-60"><a href="#cb28-60" aria-hidden="true" tabindex="-1"></a>        rep_count_df.groupby(<span class="st">"scenario"</span>, observed<span class="op">=</span><span class="va">True</span>)[<span class="st">"est_1RM"</span>]</span>
<span id="cb28-61"><a href="#cb28-61" aria-hidden="true" tabindex="-1"></a>        .median()</span>
<span id="cb28-62"><a href="#cb28-62" aria-hidden="true" tabindex="-1"></a>        .reset_index(),</span>
<span id="cb28-63"><a href="#cb28-63" aria-hidden="true" tabindex="-1"></a>        aes(xintercept<span class="op">=</span><span class="st">"est_1RM"</span>),</span>
<span id="cb28-64"><a href="#cb28-64" aria-hidden="true" tabindex="-1"></a>        colour<span class="op">=</span><span class="st">"#134A8E"</span>,</span>
<span id="cb28-65"><a href="#cb28-65" aria-hidden="true" tabindex="-1"></a>        size<span class="op">=</span><span class="fl">0.8</span>,</span>
<span id="cb28-66"><a href="#cb28-66" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb28-67"><a href="#cb28-67" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> facet_wrap(<span class="st">"~scenario"</span>, ncol<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb28-68"><a href="#cb28-68" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> scale_x_continuous(labels<span class="op">=</span><span class="kw">lambda</span> x: [<span class="ss">f"</span><span class="sc">{</span>v<span class="sc">:.0f}{</span>units<span class="sc">}</span><span class="ss">"</span> <span class="cf">for</span> v <span class="kw">in</span> x])</span>
<span id="cb28-69"><a href="#cb28-69" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> labs(</span>
<span id="cb28-70"><a href="#cb28-70" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span><span class="st">"Estimated 1RM"</span>,</span>
<span id="cb28-71"><a href="#cb28-71" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span><span class="st">""</span>,</span>
<span id="cb28-72"><a href="#cb28-72" aria-hidden="true" tabindex="-1"></a>        title<span class="op">=</span><span class="st">"1RM estimates are more confident with lower rep sets"</span>,</span>
<span id="cb28-73"><a href="#cb28-73" aria-hidden="true" tabindex="-1"></a>        subtitle<span class="op">=</span><span class="ss">f"Athlete </span><span class="sc">{</span>rep_count_plot_athlete<span class="sc">}</span><span class="ss"> | Max rep sets from simulated training data"</span>,</span>
<span id="cb28-74"><a href="#cb28-74" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb28-75"><a href="#cb28-75" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> theme_classic()</span>
<span id="cb28-76"><a href="#cb28-76" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> theme(</span>
<span id="cb28-77"><a href="#cb28-77" aria-hidden="true" tabindex="-1"></a>        axis_text_y<span class="op">=</span>element_blank(),</span>
<span id="cb28-78"><a href="#cb28-78" aria-hidden="true" tabindex="-1"></a>        axis_ticks_major_y<span class="op">=</span>element_blank(),</span>
<span id="cb28-79"><a href="#cb28-79" aria-hidden="true" tabindex="-1"></a>        axis_title_y<span class="op">=</span>element_blank(),</span>
<span id="cb28-80"><a href="#cb28-80" aria-hidden="true" tabindex="-1"></a>        axis_line_y<span class="op">=</span>element_blank(),</span>
<span id="cb28-81"><a href="#cb28-81" aria-hidden="true" tabindex="-1"></a>        strip_text<span class="op">=</span>element_text(ha<span class="op">=</span><span class="st">"left"</span>),</span>
<span id="cb28-82"><a href="#cb28-82" aria-hidden="true" tabindex="-1"></a>        strip_background<span class="op">=</span>element_blank(),</span>
<span id="cb28-83"><a href="#cb28-83" aria-hidden="true" tabindex="-1"></a>        plot_title<span class="op">=</span>element_text(weight<span class="op">=</span><span class="st">"bold"</span>),</span>
<span id="cb28-84"><a href="#cb28-84" aria-hidden="true" tabindex="-1"></a>        plot_subtitle<span class="op">=</span>element_text(color<span class="op">=</span><span class="st">"grey"</span>),</span>
<span id="cb28-85"><a href="#cb28-85" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb28-86"><a href="#cb28-86" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-37-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="integrating-this" class="level2">
<h2 class="anchored" data-anchor-id="integrating-this">Integrating this</h2>
<p>Integrating this into a larger system would involve deploying the model to a server so that estimates can be requested on demand. Analysis tools (R, Python, Excel via Power Query, etc) would send athlete data to the model and receive 1RM estimates in return. From there, you’d set up the model to refit on a schedule so that estimates stay current and are available whenever you’re programming or reviewing training.</p>
</section>
<section id="conclusion" class="level2">
<h2 class="anchored" data-anchor-id="conclusion">Conclusion</h2>
<p>My simulated data might not align with the patterns in real training data, but I think the idea that some athletes can do heavy weight well while others do higher reps well is valid and should/can be captured when you’re estimating 1RM from a submaximal set for max reps.</p>
<p>Key takeaways:</p>
<ul>
<li><p>Athletes have different characteristics that statistical models can learn and account for when making inferences or predictions.</p></li>
<li><p>Quantifying uncertainty helps us make better decisions. Especially knowing when we don’t have enough information to act confidently.</p></li>
<li><p>Models like this can be fit to your athletes’ data, updated automatically as new training results come in, and integrated into your programming or monitoring workflows.</p></li>
</ul>


<!-- -->

</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Note that this is different, and IMO much more intuitive, to what a confidence interval tells you. Confidence intervals are confusing <a href="https://pubmed.ncbi.nlm.nih.gov/24420726/">and even trained scientists often misinterpret them</a>.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>These intervals are what you get with Bayesian model estimates and they are what I think most people want confidence intervals to be. There is x% probability that the interval contains the true value.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>This evaluation is pretty crude (holding out each athletes most recent set for testing; only 30 sets total). It’s kind of how it would work in real life though; predictions after each new session are like their own test set (assuming model is updated before each session). A stronger approach to evaluation during the research phase of something like (as opposed to ongoing use) would be to use something like <a href="https://www.youtube.com/watch?v=fSytzGwwBVw">cross validation</a>.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>Take with a big grain of salt as it’s only an average over 30 estimates.<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p>Although more data doesn’t always mean a more certain estimate, sometimes it’s just more certain that the athlete is inherently variable.<a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
    const viewSource = window.document.getElementById('quarto-view-source') ||
                       window.document.getElementById('quarto-code-tools-source');
    if (viewSource) {
      const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
      viewSource.addEventListener("click", function(e) {
        if (sourceUrl) {
          // rstudio viewer pane
          if (/\bcapabilities=\b/.test(window.location)) {
            window.open(sourceUrl);
          } else {
            window.location.href = sourceUrl;
          }
        } else {
          const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
          modal.show();
        }
        return false;
      });
    }
    function toggleCodeHandler(show) {
      return function(e) {
        const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
        for (let i=0; i<detailsSrc.length; i++) {
          const details = detailsSrc[i].parentElement;
          if (show) {
            details.open = true;
          } else {
            details.removeAttribute("open");
          }
        }
        const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
        const fromCls = show ? "hidden" : "unhidden";
        const toCls = show ? "unhidden" : "hidden";
        for (let i=0; i<cellCodeDivs.length; i++) {
          const codeDiv = cellCodeDivs[i];
          if (codeDiv.classList.contains(fromCls)) {
            codeDiv.classList.remove(fromCls);
            codeDiv.classList.add(toCls);
          } 
        }
        return false;
      }
    }
    const hideAllCode = window.document.getElementById("quarto-hide-all-code");
    if (hideAllCode) {
      hideAllCode.addEventListener("click", toggleCodeHandler(false));
    }
    const showAllCode = window.document.getElementById("quarto-show-all-code");
    if (showAllCode) {
      showAllCode.addEventListener("click", toggleCodeHandler(true));
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/www\.mitchhenderson\.dev");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<input type="hidden" id="giscus-base-theme" value="light">
<input type="hidden" id="giscus-alt-theme" value="light">
<script>
  function loadGiscus() {
    // Function to get the theme based on body class
    const getTheme = () => {
      let baseTheme = document.getElementById('giscus-base-theme').value;
      let altTheme = document.getElementById('giscus-alt-theme').value;
      return document.body.classList.contains('quarto-dark') ? altTheme : baseTheme;
    };
    const script = document.createElement("script");
    script.src = "https://giscus.app/client.js";
    script.async = true;
    script.dataset.repo = "mitchhenderson/mitchhenderson.dev";
    script.dataset.repoId = "R_kgDOJLIMQQ";
    script.dataset.category = "Announcements";
    script.dataset.categoryId = "DIC_kwDOJLIMQc4CU9Pb";
    script.dataset.mapping = "pathname";
    script.dataset.reactionsEnabled = "1";
    script.dataset.emitMetadata = "0";
    script.dataset.inputPosition = "bottom";
    script.dataset.theme = getTheme();
    script.dataset.lang = "en";
    script.crossOrigin = "anonymous";
    // Append the script to the desired div instead of at the end of the body
    document.getElementById("quarto-content").appendChild(script);
  }
  loadGiscus();
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb29" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Making 1 rep max estimates more accurate and honest"</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="an">description:</span><span class="co"> |</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="co">  Use more of the information you have.</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> Mitch Henderson</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a><span class="an">date:</span><span class="co"> 2026-01-02</span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a><span class="an">thumbnailImage:</span><span class="co"> /img/1rm_curve_thumbnail.png</span></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a><span class="an">draft:</span><span class="co"> false</span></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a><span class="an">filters:</span><span class="co"> [details]</span></span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span></span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a><span class="co">  html:</span></span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a><span class="co">    code-fold: true</span></span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a><span class="co">    code-tools: true</span></span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a><span class="co">    html-table-processing: none</span></span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a><span class="an">knitr:</span></span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a><span class="co">    opts_chunk:</span></span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a><span class="co">      dev: "ragg_png"</span></span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-20"><a href="#cb29-20" aria-hidden="true" tabindex="-1"></a>::: {.callout-note}</span>
<span id="cb29-21"><a href="#cb29-21" aria-hidden="true" tabindex="-1"></a><span class="fu">## tl;dr</span></span>
<span id="cb29-22"><a href="#cb29-22" aria-hidden="true" tabindex="-1"></a>You can get more accurate 1RM estimates by using a statistical model that accounts for differences between athletes. They can also tell you how certain their estimate are (which matters).</span>
<span id="cb29-23"><a href="#cb29-23" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb29-24"><a href="#cb29-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-25"><a href="#cb29-25" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">br</span><span class="dt">&gt;</span></span>
<span id="cb29-26"><a href="#cb29-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-27"><a href="#cb29-27" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">S&amp;C coaches</span><span class="co">](https://en.wikipedia.org/wiki/Strength_and_conditioning_coach)</span> collect training data to monitor progress and evaluate the effectiveness of their programming. A common method in strength training is to calculate an <span class="co">[</span><span class="ot">**estimated one repetition maximum**</span><span class="co">](https://en.wikipedia.org/wiki/One-repetition_maximum#Estimating_1RM)</span> (or e1RM) using a <span class="co">[</span><span class="ot">formula</span><span class="co">](https://maxcalculator.com/guides/1rm-formulas)</span> and track how it changes over time. Lots of coaches are happy to use e1RM as a progress indicator instead of testing a true 1RM during a program or in-season because they don't negatively impact training (integrates into existing training sessions), are safer (lower weight), and data can be collected more frequently (faster program refinements). <span class="co">[</span><span class="ot">True 1RM</span><span class="co">](https://en.wikipedia.org/wiki/One-repetition_maximum#Measuring_1RM)</span> testing might only be programmed a handful of times per season (if at all) so using training data to regularly estimate strength increases or detect when a program should be adjusted is a good idea.</span>
<span id="cb29-28"><a href="#cb29-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-29"><a href="#cb29-29" aria-hidden="true" tabindex="-1"></a>::: {.panel-tabset group="language"}</span>
<span id="cb29-30"><a href="#cb29-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-31"><a href="#cb29-31" aria-hidden="true" tabindex="-1"></a><span class="fu">## ![](/img/Rlogo.svg){height=25}</span></span>
<span id="cb29-34"><a href="#cb29-34" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb29-35"><a href="#cb29-35" aria-hidden="true" tabindex="-1"></a><span class="co">#| output: false</span></span>
<span id="cb29-36"><a href="#cb29-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-37"><a href="#cb29-37" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb29-38"><a href="#cb29-38" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gganimate)</span>
<span id="cb29-39"><a href="#cb29-39" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(scales)</span>
<span id="cb29-40"><a href="#cb29-40" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggtext)</span>
<span id="cb29-41"><a href="#cb29-41" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gt)</span>
<span id="cb29-42"><a href="#cb29-42" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gtExtras)</span>
<span id="cb29-43"><a href="#cb29-43" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(geomtextpath)</span>
<span id="cb29-44"><a href="#cb29-44" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(brms)</span>
<span id="cb29-45"><a href="#cb29-45" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidybayes)</span>
<span id="cb29-46"><a href="#cb29-46" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggdist)</span>
<span id="cb29-47"><a href="#cb29-47" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(colorspace)</span>
<span id="cb29-48"><a href="#cb29-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-49"><a href="#cb29-49" aria-hidden="true" tabindex="-1"></a>mitchhenderson<span class="sc">::</span><span class="fu">font_hoist</span>(<span class="st">"Myriad Pro"</span>)</span>
<span id="cb29-50"><a href="#cb29-50" aria-hidden="true" tabindex="-1"></a>socials <span class="ot">&lt;-</span> mitchhenderson<span class="sc">::</span><span class="fu">social_caption</span>(<span class="at">icon_colour =</span> <span class="st">"dodgerblue"</span>)</span>
<span id="cb29-51"><a href="#cb29-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-52"><a href="#cb29-52" aria-hidden="true" tabindex="-1"></a>units <span class="ot">&lt;-</span> <span class="st">"kg"</span></span>
<span id="cb29-53"><a href="#cb29-53" aria-hidden="true" tabindex="-1"></a>colours <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"#E31937"</span>, <span class="st">"#134A8E"</span>, <span class="st">"#16A34A"</span>)</span>
<span id="cb29-54"><a href="#cb29-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-55"><a href="#cb29-55" aria-hidden="true" tabindex="-1"></a><span class="fu">theme_set</span>(</span>
<span id="cb29-56"><a href="#cb29-56" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>(<span class="at">base_size =</span> <span class="dv">16</span>, <span class="at">base_family =</span> <span class="st">"Myriad Pro Regular"</span>) <span class="sc">+</span></span>
<span id="cb29-57"><a href="#cb29-57" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb29-58"><a href="#cb29-58" aria-hidden="true" tabindex="-1"></a>      <span class="at">plot.title =</span> <span class="fu">element_markdown</span>(<span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb29-59"><a href="#cb29-59" aria-hidden="true" tabindex="-1"></a>      <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>, <span class="at">color =</span> <span class="st">"grey40"</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb29-60"><a href="#cb29-60" aria-hidden="true" tabindex="-1"></a>      <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>, <span class="at">color =</span> <span class="st">"grey40"</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb29-61"><a href="#cb29-61" aria-hidden="true" tabindex="-1"></a>      <span class="at">plot.caption =</span> <span class="fu">element_markdown</span>(<span class="at">color =</span> <span class="st">"grey50"</span>, <span class="at">size =</span> <span class="dv">10</span>),</span>
<span id="cb29-62"><a href="#cb29-62" aria-hidden="true" tabindex="-1"></a>      <span class="at">axis.ticks =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb29-63"><a href="#cb29-63" aria-hidden="true" tabindex="-1"></a>      <span class="at">axis.line =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">"grey50"</span>),</span>
<span id="cb29-64"><a href="#cb29-64" aria-hidden="true" tabindex="-1"></a>      <span class="at">plot.title.position =</span> <span class="st">"plot"</span></span>
<span id="cb29-65"><a href="#cb29-65" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb29-66"><a href="#cb29-66" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-67"><a href="#cb29-67" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb29-68"><a href="#cb29-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-69"><a href="#cb29-69" aria-hidden="true" tabindex="-1"></a><span class="fu">## ![](/img/python-logo-only.svg){height=30}</span></span>
<span id="cb29-70"><a href="#cb29-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-71"><a href="#cb29-71" aria-hidden="true" tabindex="-1"></a>::: {.callout-note}</span>
<span id="cb29-72"><a href="#cb29-72" aria-hidden="true" tabindex="-1"></a><span class="fu">## Python code outputs will differ from rendered results</span></span>
<span id="cb29-73"><a href="#cb29-73" aria-hidden="true" tabindex="-1"></a>The visualisations and tables on this page are generated from the R code. Running the Python code will produce the equivalent analyses but with different styling (e.g. fonts, themes, annotations) because Python uses different plotting and table libraries. The analytical conclusions are the same though.</span>
<span id="cb29-74"><a href="#cb29-74" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb29-75"><a href="#cb29-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-78"><a href="#cb29-78" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb29-79"><a href="#cb29-79" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb29-80"><a href="#cb29-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-81"><a href="#cb29-81" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> polars <span class="im">as</span> pl</span>
<span id="cb29-82"><a href="#cb29-82" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb29-83"><a href="#cb29-83" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb29-84"><a href="#cb29-84" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.animation <span class="im">as</span> animation</span>
<span id="cb29-85"><a href="#cb29-85" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> plotnine <span class="im">import</span> <span class="op">*</span></span>
<span id="cb29-86"><a href="#cb29-86" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> great_tables <span class="im">import</span> GT, style, loc</span>
<span id="cb29-87"><a href="#cb29-87" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pymc <span class="im">as</span> pm</span>
<span id="cb29-88"><a href="#cb29-88" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> arviz <span class="im">as</span> az</span>
<span id="cb29-89"><a href="#cb29-89" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> polars.selectors <span class="im">as</span> cs</span>
<span id="cb29-90"><a href="#cb29-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-91"><a href="#cb29-91" aria-hidden="true" tabindex="-1"></a>units <span class="op">=</span> <span class="st">"kg"</span></span>
<span id="cb29-92"><a href="#cb29-92" aria-hidden="true" tabindex="-1"></a>colours <span class="op">=</span> [<span class="st">"#E31937"</span>, <span class="st">"#134A8E"</span>, <span class="st">"#16A34A"</span>]</span>
<span id="cb29-93"><a href="#cb29-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-94"><a href="#cb29-94" aria-hidden="true" tabindex="-1"></a>theme_set(</span>
<span id="cb29-95"><a href="#cb29-95" aria-hidden="true" tabindex="-1"></a>    theme_classic(base_size<span class="op">=</span><span class="dv">14</span>)</span>
<span id="cb29-96"><a href="#cb29-96" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> theme(</span>
<span id="cb29-97"><a href="#cb29-97" aria-hidden="true" tabindex="-1"></a>        plot_title<span class="op">=</span>element_text(weight<span class="op">=</span><span class="st">"bold"</span>),</span>
<span id="cb29-98"><a href="#cb29-98" aria-hidden="true" tabindex="-1"></a>        plot_subtitle<span class="op">=</span>element_text(size<span class="op">=</span><span class="dv">12</span>, color<span class="op">=</span><span class="st">"grey"</span>),</span>
<span id="cb29-99"><a href="#cb29-99" aria-hidden="true" tabindex="-1"></a>        axis_title_x<span class="op">=</span>element_text(size<span class="op">=</span><span class="dv">12</span>, color<span class="op">=</span><span class="st">"grey"</span>),</span>
<span id="cb29-100"><a href="#cb29-100" aria-hidden="true" tabindex="-1"></a>        axis_ticks<span class="op">=</span>element_blank(),</span>
<span id="cb29-101"><a href="#cb29-101" aria-hidden="true" tabindex="-1"></a>        axis_line<span class="op">=</span>element_line(colour<span class="op">=</span><span class="st">"grey"</span>),</span>
<span id="cb29-102"><a href="#cb29-102" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb29-103"><a href="#cb29-103" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-104"><a href="#cb29-104" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb29-105"><a href="#cb29-105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-106"><a href="#cb29-106" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb29-107"><a href="#cb29-107" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-108"><a href="#cb29-108" aria-hidden="true" tabindex="-1"></a><span class="fu">## The problem</span></span>
<span id="cb29-109"><a href="#cb29-109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-110"><a href="#cb29-110" aria-hidden="true" tabindex="-1"></a>There are <span class="co">[</span><span class="ot">lots of different formulas out there to estimate a 1RM</span><span class="co">](https://maxcalculator.com/guides/1rm-formulas)</span>.</span>
<span id="cb29-111"><a href="#cb29-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-112"><a href="#cb29-112" aria-hidden="true" tabindex="-1"></a>::: {.panel-tabset group="language"}</span>
<span id="cb29-113"><a href="#cb29-113" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-114"><a href="#cb29-114" aria-hidden="true" tabindex="-1"></a><span class="fu">## ![](/img/Rlogo.svg){height=25}</span></span>
<span id="cb29-117"><a href="#cb29-117" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb29-118"><a href="#cb29-118" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb29-119"><a href="#cb29-119" aria-hidden="true" tabindex="-1"></a><span class="co">#| output: false</span></span>
<span id="cb29-120"><a href="#cb29-120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-121"><a href="#cb29-121" aria-hidden="true" tabindex="-1"></a>formulas <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb29-122"><a href="#cb29-122" aria-hidden="true" tabindex="-1"></a>  <span class="at">Epley =</span> <span class="cf">function</span>(reps) {</span>
<span id="cb29-123"><a href="#cb29-123" aria-hidden="true" tabindex="-1"></a>    <span class="dv">100</span> <span class="sc">/</span> (<span class="dv">1</span> <span class="sc">+</span> reps <span class="sc">/</span> <span class="dv">30</span>)</span>
<span id="cb29-124"><a href="#cb29-124" aria-hidden="true" tabindex="-1"></a>  },</span>
<span id="cb29-125"><a href="#cb29-125" aria-hidden="true" tabindex="-1"></a>  <span class="at">Brzycki =</span> <span class="cf">function</span>(reps) {</span>
<span id="cb29-126"><a href="#cb29-126" aria-hidden="true" tabindex="-1"></a>    <span class="dv">100</span> <span class="sc">*</span> (<span class="dv">37</span> <span class="sc">-</span> reps) <span class="sc">/</span> <span class="dv">36</span></span>
<span id="cb29-127"><a href="#cb29-127" aria-hidden="true" tabindex="-1"></a>  },</span>
<span id="cb29-128"><a href="#cb29-128" aria-hidden="true" tabindex="-1"></a>  <span class="at">Mayhew =</span> <span class="cf">function</span>(reps) {</span>
<span id="cb29-129"><a href="#cb29-129" aria-hidden="true" tabindex="-1"></a>    <span class="fl">52.2</span> <span class="sc">+</span> <span class="fl">41.9</span> <span class="sc">*</span> <span class="fu">exp</span>(<span class="sc">-</span><span class="fl">0.055</span> <span class="sc">*</span> reps)</span>
<span id="cb29-130"><a href="#cb29-130" aria-hidden="true" tabindex="-1"></a>  },</span>
<span id="cb29-131"><a href="#cb29-131" aria-hidden="true" tabindex="-1"></a>  <span class="at">Lombardi =</span> <span class="cf">function</span>(reps) {</span>
<span id="cb29-132"><a href="#cb29-132" aria-hidden="true" tabindex="-1"></a>    <span class="dv">100</span> <span class="sc">/</span> (reps<span class="sc">^</span><span class="fl">0.10</span>)</span>
<span id="cb29-133"><a href="#cb29-133" aria-hidden="true" tabindex="-1"></a>  },</span>
<span id="cb29-134"><a href="#cb29-134" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">O'Conner</span><span class="st">`</span> <span class="ot">=</span> <span class="cf">function</span>(reps) {</span>
<span id="cb29-135"><a href="#cb29-135" aria-hidden="true" tabindex="-1"></a>    <span class="dv">100</span> <span class="sc">/</span> (<span class="dv">1</span> <span class="sc">+</span> reps <span class="sc">/</span> <span class="dv">40</span>)</span>
<span id="cb29-136"><a href="#cb29-136" aria-hidden="true" tabindex="-1"></a>  },</span>
<span id="cb29-137"><a href="#cb29-137" aria-hidden="true" tabindex="-1"></a>  <span class="at">Wathan =</span> <span class="cf">function</span>(reps) {</span>
<span id="cb29-138"><a href="#cb29-138" aria-hidden="true" tabindex="-1"></a>    <span class="fl">48.8</span> <span class="sc">+</span> <span class="fl">53.8</span> <span class="sc">*</span> <span class="fu">exp</span>(<span class="sc">-</span><span class="fl">0.075</span> <span class="sc">*</span> reps)</span>
<span id="cb29-139"><a href="#cb29-139" aria-hidden="true" tabindex="-1"></a>  },</span>
<span id="cb29-140"><a href="#cb29-140" aria-hidden="true" tabindex="-1"></a>  <span class="at">Lander =</span> <span class="cf">function</span>(reps) {</span>
<span id="cb29-141"><a href="#cb29-141" aria-hidden="true" tabindex="-1"></a>    <span class="fl">101.3</span> <span class="sc">-</span> <span class="fl">2.67123</span> <span class="sc">*</span> reps</span>
<span id="cb29-142"><a href="#cb29-142" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb29-143"><a href="#cb29-143" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-144"><a href="#cb29-144" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-145"><a href="#cb29-145" aria-hidden="true" tabindex="-1"></a>reps_range <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">20</span></span>
<span id="cb29-146"><a href="#cb29-146" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-147"><a href="#cb29-147" aria-hidden="true" tabindex="-1"></a>e1rm_data <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">reps =</span> reps_range) <span class="sc">|&gt;</span></span>
<span id="cb29-148"><a href="#cb29-148" aria-hidden="true" tabindex="-1"></a>  <span class="fu">crossing</span>(<span class="at">formula =</span> <span class="fu">names</span>(formulas)) <span class="sc">|&gt;</span></span>
<span id="cb29-149"><a href="#cb29-149" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb29-150"><a href="#cb29-150" aria-hidden="true" tabindex="-1"></a>    <span class="at">percent_1rm =</span> <span class="fu">map2_dbl</span>(formula, reps, <span class="sc">~</span> formulas[[.x]](.y))</span>
<span id="cb29-151"><a href="#cb29-151" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb29-152"><a href="#cb29-152" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-153"><a href="#cb29-153" aria-hidden="true" tabindex="-1"></a>e1rm_data_animated <span class="ot">&lt;-</span> e1rm_data <span class="sc">|&gt;</span></span>
<span id="cb29-154"><a href="#cb29-154" aria-hidden="true" tabindex="-1"></a>  <span class="fu">crossing</span>(<span class="at">highlight =</span> <span class="fu">unique</span>(e1rm_data<span class="sc">$</span>formula)) <span class="sc">|&gt;</span></span>
<span id="cb29-155"><a href="#cb29-155" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb29-156"><a href="#cb29-156" aria-hidden="true" tabindex="-1"></a>    <span class="at">is_highlighted =</span> formula <span class="sc">==</span> highlight,</span>
<span id="cb29-157"><a href="#cb29-157" aria-hidden="true" tabindex="-1"></a>    <span class="at">line_color =</span> <span class="fu">if_else</span>(is_highlighted, <span class="st">"highlighted"</span>, <span class="st">"grey"</span>),</span>
<span id="cb29-158"><a href="#cb29-158" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="fu">if_else</span>(is_highlighted <span class="sc">&amp;</span> reps <span class="sc">==</span> <span class="fu">max</span>(reps), formula, <span class="cn">NA_character_</span>),</span>
<span id="cb29-159"><a href="#cb29-159" aria-hidden="true" tabindex="-1"></a>    <span class="at">line_size =</span> <span class="fu">if_else</span>(is_highlighted, <span class="dv">2</span>, <span class="fl">0.5</span>)</span>
<span id="cb29-160"><a href="#cb29-160" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb29-161"><a href="#cb29-161" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-162"><a href="#cb29-162" aria-hidden="true" tabindex="-1"></a>animated_plot <span class="ot">&lt;-</span> e1rm_data_animated <span class="sc">|&gt;</span></span>
<span id="cb29-163"><a href="#cb29-163" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> reps, <span class="at">y =</span> percent_1rm, <span class="at">group =</span> formula)) <span class="sc">+</span></span>
<span id="cb29-164"><a href="#cb29-164" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">20</span>), <span class="at">clip =</span> <span class="st">"off"</span>) <span class="sc">+</span></span>
<span id="cb29-165"><a href="#cb29-165" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(</span>
<span id="cb29-166"><a href="#cb29-166" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> e1rm_data_animated <span class="sc">|&gt;</span> <span class="fu">filter</span>(<span class="sc">!</span>is_highlighted),</span>
<span id="cb29-167"><a href="#cb29-167" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">linewidth =</span> line_size),</span>
<span id="cb29-168"><a href="#cb29-168" aria-hidden="true" tabindex="-1"></a>    <span class="at">colour =</span> <span class="st">"grey70"</span></span>
<span id="cb29-169"><a href="#cb29-169" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb29-170"><a href="#cb29-170" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(</span>
<span id="cb29-171"><a href="#cb29-171" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> e1rm_data_animated <span class="sc">|&gt;</span> <span class="fu">filter</span>(is_highlighted),</span>
<span id="cb29-172"><a href="#cb29-172" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">linewidth =</span> line_size),</span>
<span id="cb29-173"><a href="#cb29-173" aria-hidden="true" tabindex="-1"></a>    <span class="at">colour =</span> <span class="st">"#E31937"</span></span>
<span id="cb29-174"><a href="#cb29-174" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb29-175"><a href="#cb29-175" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb29-176"><a href="#cb29-176" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">label =</span> label),</span>
<span id="cb29-177"><a href="#cb29-177" aria-hidden="true" tabindex="-1"></a>    <span class="at">colour =</span> <span class="st">"#E31937"</span>,</span>
<span id="cb29-178"><a href="#cb29-178" aria-hidden="true" tabindex="-1"></a>    <span class="at">family =</span> <span class="st">"Myriad Pro Regular"</span>,</span>
<span id="cb29-179"><a href="#cb29-179" aria-hidden="true" tabindex="-1"></a>    <span class="at">hjust =</span> <span class="dv">0</span>,</span>
<span id="cb29-180"><a href="#cb29-180" aria-hidden="true" tabindex="-1"></a>    <span class="at">nudge_x =</span> <span class="fl">0.5</span>,</span>
<span id="cb29-181"><a href="#cb29-181" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">6</span>,</span>
<span id="cb29-182"><a href="#cb29-182" aria-hidden="true" tabindex="-1"></a>    <span class="at">fontface =</span> <span class="st">"bold"</span>,</span>
<span id="cb29-183"><a href="#cb29-183" aria-hidden="true" tabindex="-1"></a>    <span class="at">show.legend =</span> <span class="cn">FALSE</span></span>
<span id="cb29-184"><a href="#cb29-184" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb29-185"><a href="#cb29-185" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_linewidth_identity</span>() <span class="sc">+</span></span>
<span id="cb29-186"><a href="#cb29-186" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(</span>
<span id="cb29-187"><a href="#cb29-187" aria-hidden="true" tabindex="-1"></a>    <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">20</span>, <span class="dv">1</span>)</span>
<span id="cb29-188"><a href="#cb29-188" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb29-189"><a href="#cb29-189" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(</span>
<span id="cb29-190"><a href="#cb29-190" aria-hidden="true" tabindex="-1"></a>    <span class="at">labels =</span> <span class="fu">label_percent</span>(<span class="at">scale =</span> <span class="dv">1</span>),</span>
<span id="cb29-191"><a href="#cb29-191" aria-hidden="true" tabindex="-1"></a>    <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">40</span>, <span class="dv">100</span>, <span class="dv">10</span>),</span>
<span id="cb29-192"><a href="#cb29-192" aria-hidden="true" tabindex="-1"></a>    <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">40</span>, <span class="dv">100</span>)</span>
<span id="cb29-193"><a href="#cb29-193" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb29-194"><a href="#cb29-194" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb29-195"><a href="#cb29-195" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"1RM Estimation Formulas"</span>,</span>
<span id="cb29-196"><a href="#cb29-196" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Number of Repetitions"</span>,</span>
<span id="cb29-197"><a href="#cb29-197" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="cn">NULL</span>,</span>
<span id="cb29-198"><a href="#cb29-198" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"% of 1RM"</span>,</span>
<span id="cb29-199"><a href="#cb29-199" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> socials</span>
<span id="cb29-200"><a href="#cb29-200" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb29-201"><a href="#cb29-201" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb29-202"><a href="#cb29-202" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.margin =</span> <span class="fu">margin</span>(<span class="dv">10</span>, <span class="dv">100</span>, <span class="dv">10</span>, <span class="dv">10</span>),</span>
<span id="cb29-203"><a href="#cb29-203" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"none"</span></span>
<span id="cb29-204"><a href="#cb29-204" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb29-205"><a href="#cb29-205" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transition_manual</span>(</span>
<span id="cb29-206"><a href="#cb29-206" aria-hidden="true" tabindex="-1"></a>    highlight,</span>
<span id="cb29-207"><a href="#cb29-207" aria-hidden="true" tabindex="-1"></a>    <span class="at">cumulative =</span> <span class="cn">FALSE</span></span>
<span id="cb29-208"><a href="#cb29-208" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb29-209"><a href="#cb29-209" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-210"><a href="#cb29-210" aria-hidden="true" tabindex="-1"></a><span class="fu">animate</span>(</span>
<span id="cb29-211"><a href="#cb29-211" aria-hidden="true" tabindex="-1"></a>  animated_plot,</span>
<span id="cb29-212"><a href="#cb29-212" aria-hidden="true" tabindex="-1"></a>   <span class="at">nframes =</span> <span class="dv">80</span>,</span>
<span id="cb29-213"><a href="#cb29-213" aria-hidden="true" tabindex="-1"></a>   <span class="at">fps =</span> <span class="dv">10</span>,</span>
<span id="cb29-214"><a href="#cb29-214" aria-hidden="true" tabindex="-1"></a>   <span class="at">width =</span> <span class="dv">8</span>,</span>
<span id="cb29-215"><a href="#cb29-215" aria-hidden="true" tabindex="-1"></a>   <span class="at">height =</span> <span class="fl">4.5</span>,</span>
<span id="cb29-216"><a href="#cb29-216" aria-hidden="true" tabindex="-1"></a>   <span class="at">device =</span> <span class="st">"ragg_png"</span></span>
<span id="cb29-217"><a href="#cb29-217" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-218"><a href="#cb29-218" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb29-219"><a href="#cb29-219" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-220"><a href="#cb29-220" aria-hidden="true" tabindex="-1"></a><span class="fu">## ![](/img/python-logo-only.svg){height=30}</span></span>
<span id="cb29-223"><a href="#cb29-223" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb29-224"><a href="#cb29-224" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb29-225"><a href="#cb29-225" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-226"><a href="#cb29-226" aria-hidden="true" tabindex="-1"></a>formulas <span class="op">=</span> {</span>
<span id="cb29-227"><a href="#cb29-227" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Epley"</span>: <span class="kw">lambda</span> reps: <span class="dv">100</span> <span class="op">/</span> (<span class="dv">1</span> <span class="op">+</span> reps <span class="op">/</span> <span class="dv">30</span>),</span>
<span id="cb29-228"><a href="#cb29-228" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Brzycki"</span>: <span class="kw">lambda</span> reps: <span class="dv">100</span> <span class="op">*</span> (<span class="dv">37</span> <span class="op">-</span> reps) <span class="op">/</span> <span class="dv">36</span>,</span>
<span id="cb29-229"><a href="#cb29-229" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Mayhew"</span>: <span class="kw">lambda</span> reps: <span class="fl">52.2</span> <span class="op">+</span> <span class="fl">41.9</span> <span class="op">*</span> np.exp(<span class="op">-</span><span class="fl">0.055</span> <span class="op">*</span> reps),</span>
<span id="cb29-230"><a href="#cb29-230" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Lombardi"</span>: <span class="kw">lambda</span> reps: <span class="dv">100</span> <span class="op">/</span> (reps<span class="op">**</span><span class="fl">0.10</span>),</span>
<span id="cb29-231"><a href="#cb29-231" aria-hidden="true" tabindex="-1"></a>    <span class="st">"O'Conner"</span>: <span class="kw">lambda</span> reps: <span class="dv">100</span> <span class="op">/</span> (<span class="dv">1</span> <span class="op">+</span> reps <span class="op">/</span> <span class="dv">40</span>),</span>
<span id="cb29-232"><a href="#cb29-232" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Wathan"</span>: <span class="kw">lambda</span> reps: <span class="fl">48.8</span> <span class="op">+</span> <span class="fl">53.8</span> <span class="op">*</span> np.exp(<span class="op">-</span><span class="fl">0.075</span> <span class="op">*</span> reps),</span>
<span id="cb29-233"><a href="#cb29-233" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Lander"</span>: <span class="kw">lambda</span> reps: <span class="fl">101.3</span> <span class="op">-</span> <span class="fl">2.67123</span> <span class="op">*</span> reps,</span>
<span id="cb29-234"><a href="#cb29-234" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb29-235"><a href="#cb29-235" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-236"><a href="#cb29-236" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate data</span></span>
<span id="cb29-237"><a href="#cb29-237" aria-hidden="true" tabindex="-1"></a>reps_range <span class="op">=</span> np.arange(<span class="dv">1</span>, <span class="dv">21</span>)</span>
<span id="cb29-238"><a href="#cb29-238" aria-hidden="true" tabindex="-1"></a>formula_names <span class="op">=</span> <span class="bu">list</span>(formulas.keys())</span>
<span id="cb29-239"><a href="#cb29-239" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-240"><a href="#cb29-240" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate %1RM for each formula</span></span>
<span id="cb29-241"><a href="#cb29-241" aria-hidden="true" tabindex="-1"></a>e1rm_data <span class="op">=</span> {name: func(reps_range) <span class="cf">for</span> name, func <span class="kw">in</span> formulas.items()}</span>
<span id="cb29-242"><a href="#cb29-242" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-243"><a href="#cb29-243" aria-hidden="true" tabindex="-1"></a><span class="co"># Create figure and initial empty lines</span></span>
<span id="cb29-244"><a href="#cb29-244" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="fl">5.5</span>))</span>
<span id="cb29-245"><a href="#cb29-245" aria-hidden="true" tabindex="-1"></a>fig.subplots_adjust(right<span class="op">=</span><span class="fl">0.85</span>)</span>
<span id="cb29-246"><a href="#cb29-246" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-247"><a href="#cb29-247" aria-hidden="true" tabindex="-1"></a><span class="co"># Store line objects</span></span>
<span id="cb29-248"><a href="#cb29-248" aria-hidden="true" tabindex="-1"></a>grey_lines <span class="op">=</span> []</span>
<span id="cb29-249"><a href="#cb29-249" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> name <span class="kw">in</span> formula_names:</span>
<span id="cb29-250"><a href="#cb29-250" aria-hidden="true" tabindex="-1"></a>    (line,) <span class="op">=</span> ax.plot([], [], color<span class="op">=</span><span class="st">"lightgrey"</span>, linewidth<span class="op">=</span><span class="fl">0.8</span>)</span>
<span id="cb29-251"><a href="#cb29-251" aria-hidden="true" tabindex="-1"></a>    grey_lines.append(line)</span>
<span id="cb29-252"><a href="#cb29-252" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-253"><a href="#cb29-253" aria-hidden="true" tabindex="-1"></a>(highlight_line,) <span class="op">=</span> ax.plot([], [], color<span class="op">=</span><span class="st">"#E31937"</span>, linewidth<span class="op">=</span><span class="fl">2.5</span>)</span>
<span id="cb29-254"><a href="#cb29-254" aria-hidden="true" tabindex="-1"></a>label_text <span class="op">=</span> ax.text(</span>
<span id="cb29-255"><a href="#cb29-255" aria-hidden="true" tabindex="-1"></a>    <span class="fl">20.5</span>, <span class="dv">50</span>, <span class="st">""</span>, color<span class="op">=</span><span class="st">"#E31937"</span>, fontsize<span class="op">=</span><span class="dv">12</span>, fontweight<span class="op">=</span><span class="st">"bold"</span>, va<span class="op">=</span><span class="st">"center"</span></span>
<span id="cb29-256"><a href="#cb29-256" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-257"><a href="#cb29-257" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-258"><a href="#cb29-258" aria-hidden="true" tabindex="-1"></a>ax.set_xlim(<span class="dv">1</span>, <span class="dv">23</span>)</span>
<span id="cb29-259"><a href="#cb29-259" aria-hidden="true" tabindex="-1"></a>ax.set_ylim(<span class="dv">40</span>, <span class="dv">100</span>)</span>
<span id="cb29-260"><a href="#cb29-260" aria-hidden="true" tabindex="-1"></a>ax.set_xticks(<span class="bu">range</span>(<span class="dv">1</span>, <span class="dv">21</span>))</span>
<span id="cb29-261"><a href="#cb29-261" aria-hidden="true" tabindex="-1"></a>ax.set_yticks(<span class="bu">range</span>(<span class="dv">40</span>, <span class="dv">101</span>, <span class="dv">10</span>))</span>
<span id="cb29-262"><a href="#cb29-262" aria-hidden="true" tabindex="-1"></a>ax.set_yticklabels([<span class="ss">f"</span><span class="sc">{</span>y<span class="sc">}</span><span class="ss">%"</span> <span class="cf">for</span> y <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">40</span>, <span class="dv">101</span>, <span class="dv">10</span>)])</span>
<span id="cb29-263"><a href="#cb29-263" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">"Number of Repetitions"</span>)</span>
<span id="cb29-264"><a href="#cb29-264" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="st">"1RM Estimation Formulas"</span>, fontweight<span class="op">=</span><span class="st">"bold"</span>, fontsize<span class="op">=</span><span class="dv">14</span>)</span>
<span id="cb29-265"><a href="#cb29-265" aria-hidden="true" tabindex="-1"></a>ax.spines[[<span class="st">"top"</span>, <span class="st">"right"</span>]].set_visible(<span class="va">False</span>)</span>
<span id="cb29-266"><a href="#cb29-266" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-267"><a href="#cb29-267" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-268"><a href="#cb29-268" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> init():</span>
<span id="cb29-269"><a href="#cb29-269" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> line <span class="kw">in</span> grey_lines:</span>
<span id="cb29-270"><a href="#cb29-270" aria-hidden="true" tabindex="-1"></a>        line.set_data([], [])</span>
<span id="cb29-271"><a href="#cb29-271" aria-hidden="true" tabindex="-1"></a>    highlight_line.set_data([], [])</span>
<span id="cb29-272"><a href="#cb29-272" aria-hidden="true" tabindex="-1"></a>    label_text.set_text(<span class="st">""</span>)</span>
<span id="cb29-273"><a href="#cb29-273" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> grey_lines <span class="op">+</span> [highlight_line, label_text]</span>
<span id="cb29-274"><a href="#cb29-274" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-275"><a href="#cb29-275" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-276"><a href="#cb29-276" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> animate(frame):</span>
<span id="cb29-277"><a href="#cb29-277" aria-hidden="true" tabindex="-1"></a>    highlighted <span class="op">=</span> formula_names[frame]</span>
<span id="cb29-278"><a href="#cb29-278" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-279"><a href="#cb29-279" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Update all lines</span></span>
<span id="cb29-280"><a href="#cb29-280" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i, name <span class="kw">in</span> <span class="bu">enumerate</span>(formula_names):</span>
<span id="cb29-281"><a href="#cb29-281" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> name <span class="op">!=</span> highlighted:</span>
<span id="cb29-282"><a href="#cb29-282" aria-hidden="true" tabindex="-1"></a>            grey_lines[i].set_data(reps_range, e1rm_data[name])</span>
<span id="cb29-283"><a href="#cb29-283" aria-hidden="true" tabindex="-1"></a>            grey_lines[i].set_color(<span class="st">"lightgrey"</span>)</span>
<span id="cb29-284"><a href="#cb29-284" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb29-285"><a href="#cb29-285" aria-hidden="true" tabindex="-1"></a>            grey_lines[i].set_data([], [])</span>
<span id="cb29-286"><a href="#cb29-286" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-287"><a href="#cb29-287" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Update highlighted line</span></span>
<span id="cb29-288"><a href="#cb29-288" aria-hidden="true" tabindex="-1"></a>    highlight_line.set_data(reps_range, e1rm_data[highlighted])</span>
<span id="cb29-289"><a href="#cb29-289" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-290"><a href="#cb29-290" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Update label</span></span>
<span id="cb29-291"><a href="#cb29-291" aria-hidden="true" tabindex="-1"></a>    label_text.set_position((<span class="fl">20.5</span>, e1rm_data[highlighted][<span class="op">-</span><span class="dv">1</span>]))</span>
<span id="cb29-292"><a href="#cb29-292" aria-hidden="true" tabindex="-1"></a>    label_text.set_text(highlighted)</span>
<span id="cb29-293"><a href="#cb29-293" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-294"><a href="#cb29-294" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> grey_lines <span class="op">+</span> [highlight_line, label_text]</span>
<span id="cb29-295"><a href="#cb29-295" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-296"><a href="#cb29-296" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-297"><a href="#cb29-297" aria-hidden="true" tabindex="-1"></a>anim <span class="op">=</span> animation.FuncAnimation(</span>
<span id="cb29-298"><a href="#cb29-298" aria-hidden="true" tabindex="-1"></a>    fig, animate, init_func<span class="op">=</span>init, frames<span class="op">=</span><span class="bu">len</span>(formula_names), interval<span class="op">=</span><span class="dv">1000</span>, blit<span class="op">=</span><span class="va">True</span></span>
<span id="cb29-299"><a href="#cb29-299" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-300"><a href="#cb29-300" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-301"><a href="#cb29-301" aria-hidden="true" tabindex="-1"></a>anim.save(<span class="st">"1rm_formulas.gif"</span>, writer<span class="op">=</span><span class="st">"pillow"</span>, fps<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb29-302"><a href="#cb29-302" aria-hidden="true" tabindex="-1"></a>plt.close()</span>
<span id="cb29-303"><a href="#cb29-303" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb29-304"><a href="#cb29-304" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-305"><a href="#cb29-305" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb29-306"><a href="#cb29-306" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-309"><a href="#cb29-309" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb29-310"><a href="#cb29-310" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb29-311"><a href="#cb29-311" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb29-312"><a href="#cb29-312" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-313"><a href="#cb29-313" aria-hidden="true" tabindex="-1"></a><span class="fu">animate</span>(</span>
<span id="cb29-314"><a href="#cb29-314" aria-hidden="true" tabindex="-1"></a>  animated_plot,</span>
<span id="cb29-315"><a href="#cb29-315" aria-hidden="true" tabindex="-1"></a>  <span class="at">nframes =</span> <span class="dv">80</span>,</span>
<span id="cb29-316"><a href="#cb29-316" aria-hidden="true" tabindex="-1"></a>  <span class="at">fps =</span> <span class="dv">10</span>,</span>
<span id="cb29-317"><a href="#cb29-317" aria-hidden="true" tabindex="-1"></a>  <span class="at">width =</span> <span class="dv">8</span>,</span>
<span id="cb29-318"><a href="#cb29-318" aria-hidden="true" tabindex="-1"></a>  <span class="at">height =</span> <span class="fl">4.5</span>,</span>
<span id="cb29-319"><a href="#cb29-319" aria-hidden="true" tabindex="-1"></a>  <span class="at">device =</span> <span class="st">"ragg_png"</span></span>
<span id="cb29-320"><a href="#cb29-320" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-321"><a href="#cb29-321" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb29-322"><a href="#cb29-322" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-323"><a href="#cb29-323" aria-hidden="true" tabindex="-1"></a>But none of these:</span>
<span id="cb29-324"><a href="#cb29-324" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-325"><a href="#cb29-325" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Account for strength endurance differences between athletes</span>
<span id="cb29-326"><a href="#cb29-326" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-327"><a href="#cb29-327" aria-hidden="true" tabindex="-1"></a>    Some athletes (fast twitch, higher metabolic cost per rep) have high 1RMs but find higher rep sets challenging. Other athletes (better oxidative capacity, lower metabolic cost per rep) can perform many reps at moderate intensities but quickly hit their 1RM ceiling with more weight. **A better 1RM estimate would take into account what's known about the physiological characteristics of the athlete**. This directly impacts how accurate the e1RM will be. If a fast twitch athlete does a max reps set of 14 x 100<span class="in">`r units`</span>, I'd expect their 1RM to be higher than a more oxidative athlete performing the same 14 x 100<span class="in">`r units`</span> because they're better suited to high intensity work.</span>
<span id="cb29-328"><a href="#cb29-328" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-329"><a href="#cb29-329" aria-hidden="true" tabindex="-1"></a>    *The standard formulas don't do this*.</span>
<span id="cb29-330"><a href="#cb29-330" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-331"><a href="#cb29-331" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">br</span><span class="dt">&gt;</span></span>
<span id="cb29-332"><a href="#cb29-332" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-333"><a href="#cb29-333" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Tell me how certain they are in their estimate</span>
<span id="cb29-334"><a href="#cb29-334" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-335"><a href="#cb29-335" aria-hidden="true" tabindex="-1"></a>    The standard formulas WILL ALWAYS give you a 1RM estimate, doesn't matter how confident or UNconfident they are. The 1RM estimate will also always just be a single value. There's a big difference in how I'd interpret a 100kg e1RM if it's 80% certain of being between 98–102<span class="in">`r units`</span> (pretty precise) versus 80% certain of being between 77.5–122.5<span class="in">`r units`</span> (practically useless). There's also a big difference in 1RM certainty when the estimate is based on an athlete doing a max rep set completing 2-5 reps (closer to true 1RM; higher certainty) compared 10+ reps (further from true 1RM; lower certainty).</span>
<span id="cb29-336"><a href="#cb29-336" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-337"><a href="#cb29-337" aria-hidden="true" tabindex="-1"></a>    We also become more familiar about an athlete's ability the more we work with them and get to know them. I'd have a lot more confidence predicting the 1RM of an athlete I'd worked with, gotten to know, and collected training data on for years compared to someone new without much training data available. **A better 1RM estimate would incorporate all these sources of uncertainty and honestly express how confident it is**.</span>
<span id="cb29-338"><a href="#cb29-338" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-339"><a href="#cb29-339" aria-hidden="true" tabindex="-1"></a>    *The standard formulas don't do this*.</span>
<span id="cb29-340"><a href="#cb29-340" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-341"><a href="#cb29-341" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">br</span><span class="dt">&gt;</span></span>
<span id="cb29-342"><a href="#cb29-342" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-343"><a href="#cb29-343" aria-hidden="true" tabindex="-1"></a><span class="fu">## My solution</span></span>
<span id="cb29-344"><a href="#cb29-344" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-345"><a href="#cb29-345" aria-hidden="true" tabindex="-1"></a>The idea is to extend one of the standard e1RM formulas by building it into a statistical model that takes the athlete it's estimating the 1RM for into account. It'll be fit using the athlete's past data so it learns how they handle higher weight vs higher reps. It's like a smarter version of the standard formula tailored to the athlete. Having this extra information helps it make more accurate predictions.</span>
<span id="cb29-346"><a href="#cb29-346" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-347"><a href="#cb29-347" aria-hidden="true" tabindex="-1"></a>The model will also be a <span class="co">[</span><span class="ot">*Bayesian*</span><span class="co">](https://en.wikipedia.org/wiki/Bayesian_statistics)</span> model. These have advantages over <span class="co">[</span><span class="ot">conventional</span><span class="co">](https://en.wikipedia.org/wiki/Frequentist_probability)</span> statistical models when it comes to expressing uncertainty (<span class="co">[</span><span class="ot">among other things</span><span class="co">](https://www.youtube.com/watch?v=R6d-AbkhBQ8)</span>). So instead of just getting one number, you get a full distribution representing the uncertainty in the 1RM estimate (e.g., "The 1RM estimate is 100<span class="in">`r units`</span> with 80% probability of it being between 98 and 102<span class="in">`r units`</span>").<span class="ot">[^1]</span> This distribution accounts for all the sources of upstream uncertainty (amount of data available on the athlete lifting, number of reps they completed, etc).</span>
<span id="cb29-348"><a href="#cb29-348" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-349"><a href="#cb29-349" aria-hidden="true" tabindex="-1"></a><span class="ot">[^1]: </span>Note that this is different, and IMO much more intuitive, to what a confidence interval tells you. Confidence intervals are confusing <span class="co">[</span><span class="ot">and even trained scientists often misinterpret them</span><span class="co">](https://pubmed.ncbi.nlm.nih.gov/24420726/)</span>.</span>
<span id="cb29-350"><a href="#cb29-350" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-351"><a href="#cb29-351" aria-hidden="true" tabindex="-1"></a>To show you what I mean, we need some data.</span>
<span id="cb29-352"><a href="#cb29-352" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-353"><a href="#cb29-353" aria-hidden="true" tabindex="-1"></a><span class="fu">### Simulate data</span></span>
<span id="cb29-354"><a href="#cb29-354" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-355"><a href="#cb29-355" aria-hidden="true" tabindex="-1"></a>::: {.panel-tabset group="language"}</span>
<span id="cb29-356"><a href="#cb29-356" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-357"><a href="#cb29-357" aria-hidden="true" tabindex="-1"></a><span class="fu">## ![](/img/Rlogo.svg){height=25}</span></span>
<span id="cb29-360"><a href="#cb29-360" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb29-361"><a href="#cb29-361" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">2534</span>)</span>
<span id="cb29-362"><a href="#cb29-362" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-363"><a href="#cb29-363" aria-hidden="true" tabindex="-1"></a><span class="co"># Population hyperparameters (ground truth)</span></span>
<span id="cb29-364"><a href="#cb29-364" aria-hidden="true" tabindex="-1"></a>n_athletes <span class="ot">&lt;-</span> <span class="dv">30</span></span>
<span id="cb29-365"><a href="#cb29-365" aria-hidden="true" tabindex="-1"></a>mean_n_obs_per_athlete <span class="ot">&lt;-</span> <span class="dv">15</span></span>
<span id="cb29-366"><a href="#cb29-366" aria-hidden="true" tabindex="-1"></a>min_n_obs <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb29-367"><a href="#cb29-367" aria-hidden="true" tabindex="-1"></a>max_n_obs <span class="ot">&lt;-</span> <span class="dv">30</span></span>
<span id="cb29-368"><a href="#cb29-368" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-369"><a href="#cb29-369" aria-hidden="true" tabindex="-1"></a><span class="co"># True 1RM population parameters</span></span>
<span id="cb29-370"><a href="#cb29-370" aria-hidden="true" tabindex="-1"></a>pop_mean_1rm <span class="ot">&lt;-</span> <span class="dv">140</span></span>
<span id="cb29-371"><a href="#cb29-371" aria-hidden="true" tabindex="-1"></a>pop_sd_1rm <span class="ot">&lt;-</span> <span class="dv">15</span></span>
<span id="cb29-372"><a href="#cb29-372" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-373"><a href="#cb29-373" aria-hidden="true" tabindex="-1"></a><span class="co"># Endurance coefficient population parameters</span></span>
<span id="cb29-374"><a href="#cb29-374" aria-hidden="true" tabindex="-1"></a>pop_mean_endurance <span class="ot">&lt;-</span> <span class="dv">30</span></span>
<span id="cb29-375"><a href="#cb29-375" aria-hidden="true" tabindex="-1"></a>pop_sd_endurance <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb29-376"><a href="#cb29-376" aria-hidden="true" tabindex="-1"></a><span class="co"># Maybe discuss importance of this on results (heterogenous endurance profiles = bigger gain from player specific parameters)</span></span>
<span id="cb29-377"><a href="#cb29-377" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-378"><a href="#cb29-378" aria-hidden="true" tabindex="-1"></a>min_reps <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb29-379"><a href="#cb29-379" aria-hidden="true" tabindex="-1"></a>max_reps <span class="ot">&lt;-</span> <span class="dv">15</span></span>
<span id="cb29-380"><a href="#cb29-380" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-381"><a href="#cb29-381" aria-hidden="true" tabindex="-1"></a><span class="co"># Observation noise</span></span>
<span id="cb29-382"><a href="#cb29-382" aria-hidden="true" tabindex="-1"></a>obs_noise_sd <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb29-383"><a href="#cb29-383" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-384"><a href="#cb29-384" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate athlete-level ground truth</span></span>
<span id="cb29-385"><a href="#cb29-385" aria-hidden="true" tabindex="-1"></a>athletes <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb29-386"><a href="#cb29-386" aria-hidden="true" tabindex="-1"></a>  <span class="at">athlete_id =</span> <span class="dv">1</span><span class="sc">:</span>n_athletes,</span>
<span id="cb29-387"><a href="#cb29-387" aria-hidden="true" tabindex="-1"></a>  <span class="at">true_1rm =</span> <span class="fu">rnorm</span>(n_athletes, <span class="at">mean =</span> pop_mean_1rm, <span class="at">sd =</span> pop_sd_1rm),</span>
<span id="cb29-388"><a href="#cb29-388" aria-hidden="true" tabindex="-1"></a>  <span class="at">true_endurance =</span> <span class="fu">rnorm</span>(</span>
<span id="cb29-389"><a href="#cb29-389" aria-hidden="true" tabindex="-1"></a>    n_athletes,</span>
<span id="cb29-390"><a href="#cb29-390" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean =</span> pop_mean_endurance,</span>
<span id="cb29-391"><a href="#cb29-391" aria-hidden="true" tabindex="-1"></a>    <span class="at">sd =</span> pop_sd_endurance</span>
<span id="cb29-392"><a href="#cb29-392" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb29-393"><a href="#cb29-393" aria-hidden="true" tabindex="-1"></a>  <span class="at">n_observations =</span> <span class="fu">sample</span>(min_n_obs<span class="sc">:</span>max_n_obs, n_athletes, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb29-394"><a href="#cb29-394" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-395"><a href="#cb29-395" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-396"><a href="#cb29-396" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate observations</span></span>
<span id="cb29-397"><a href="#cb29-397" aria-hidden="true" tabindex="-1"></a>simulated_data <span class="ot">&lt;-</span> athletes <span class="sc">|&gt;</span></span>
<span id="cb29-398"><a href="#cb29-398" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rowwise</span>() <span class="sc">|&gt;</span></span>
<span id="cb29-399"><a href="#cb29-399" aria-hidden="true" tabindex="-1"></a>  <span class="fu">reframe</span>(</span>
<span id="cb29-400"><a href="#cb29-400" aria-hidden="true" tabindex="-1"></a>    <span class="at">athlete_id =</span> athlete_id,</span>
<span id="cb29-401"><a href="#cb29-401" aria-hidden="true" tabindex="-1"></a>    <span class="at">true_1rm =</span> true_1rm,</span>
<span id="cb29-402"><a href="#cb29-402" aria-hidden="true" tabindex="-1"></a>    <span class="at">true_endurance =</span> true_endurance,</span>
<span id="cb29-403"><a href="#cb29-403" aria-hidden="true" tabindex="-1"></a>    <span class="at">session_id =</span> <span class="fu">seq_len</span>(n_observations),</span>
<span id="cb29-404"><a href="#cb29-404" aria-hidden="true" tabindex="-1"></a>    <span class="at">reps =</span> <span class="fu">sample</span>(min_reps<span class="sc">:</span>max_reps, n_observations, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb29-405"><a href="#cb29-405" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb29-406"><a href="#cb29-406" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb29-407"><a href="#cb29-407" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Theoretical weight from modified Epley formula</span></span>
<span id="cb29-408"><a href="#cb29-408" aria-hidden="true" tabindex="-1"></a>    <span class="at">weight_theoretical =</span> true_1rm <span class="sc">/</span> (<span class="dv">1</span> <span class="sc">+</span> reps <span class="sc">/</span> true_endurance),</span>
<span id="cb29-409"><a href="#cb29-409" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-410"><a href="#cb29-410" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Add normally distributed noise</span></span>
<span id="cb29-411"><a href="#cb29-411" aria-hidden="true" tabindex="-1"></a>    <span class="at">weight_observed =</span> weight_theoretical <span class="sc">+</span> <span class="fu">rnorm</span>(<span class="fu">n</span>(), <span class="dv">0</span>, obs_noise_sd)</span>
<span id="cb29-412"><a href="#cb29-412" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb29-413"><a href="#cb29-413" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb29-414"><a href="#cb29-414" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-415"><a href="#cb29-415" aria-hidden="true" tabindex="-1"></a><span class="fu">## ![](/img/python-logo-only.svg){height=30}</span></span>
<span id="cb29-416"><a href="#cb29-416" aria-hidden="true" tabindex="-1"></a>::: {.callout-note}</span>
<span id="cb29-417"><a href="#cb29-417" aria-hidden="true" tabindex="-1"></a><span class="fu">## Different random number generators</span></span>
<span id="cb29-418"><a href="#cb29-418" aria-hidden="true" tabindex="-1"></a>R and Python use different random number generation algorithms, so even with the same seed value, the simulated data will differ between languages. This means specific values (e.g. individual athlete 1RMs, credible intervals) won't match exactly. The overall patterns will be consistent, and the same analytical conclusions apply.</span>
<span id="cb29-419"><a href="#cb29-419" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb29-422"><a href="#cb29-422" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb29-423"><a href="#cb29-423" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb29-424"><a href="#cb29-424" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-425"><a href="#cb29-425" aria-hidden="true" tabindex="-1"></a>np.random.seed(<span class="dv">2534</span>)</span>
<span id="cb29-426"><a href="#cb29-426" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-427"><a href="#cb29-427" aria-hidden="true" tabindex="-1"></a><span class="co"># Population hyperparameters (ground truth)</span></span>
<span id="cb29-428"><a href="#cb29-428" aria-hidden="true" tabindex="-1"></a>n_athletes <span class="op">=</span> <span class="dv">30</span></span>
<span id="cb29-429"><a href="#cb29-429" aria-hidden="true" tabindex="-1"></a>mean_n_obs_per_athlete <span class="op">=</span> <span class="dv">15</span></span>
<span id="cb29-430"><a href="#cb29-430" aria-hidden="true" tabindex="-1"></a>min_n_obs <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb29-431"><a href="#cb29-431" aria-hidden="true" tabindex="-1"></a>max_n_obs <span class="op">=</span> <span class="dv">30</span></span>
<span id="cb29-432"><a href="#cb29-432" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-433"><a href="#cb29-433" aria-hidden="true" tabindex="-1"></a><span class="co"># True 1RM population parameters</span></span>
<span id="cb29-434"><a href="#cb29-434" aria-hidden="true" tabindex="-1"></a>pop_mean_1rm <span class="op">=</span> <span class="dv">140</span></span>
<span id="cb29-435"><a href="#cb29-435" aria-hidden="true" tabindex="-1"></a>pop_sd_1rm <span class="op">=</span> <span class="dv">15</span></span>
<span id="cb29-436"><a href="#cb29-436" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-437"><a href="#cb29-437" aria-hidden="true" tabindex="-1"></a><span class="co"># Endurance coefficient population parameters</span></span>
<span id="cb29-438"><a href="#cb29-438" aria-hidden="true" tabindex="-1"></a>pop_mean_endurance <span class="op">=</span> <span class="dv">30</span></span>
<span id="cb29-439"><a href="#cb29-439" aria-hidden="true" tabindex="-1"></a>pop_sd_endurance <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb29-440"><a href="#cb29-440" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-441"><a href="#cb29-441" aria-hidden="true" tabindex="-1"></a>min_reps <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb29-442"><a href="#cb29-442" aria-hidden="true" tabindex="-1"></a>max_reps <span class="op">=</span> <span class="dv">15</span></span>
<span id="cb29-443"><a href="#cb29-443" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-444"><a href="#cb29-444" aria-hidden="true" tabindex="-1"></a><span class="co"># Observation noise</span></span>
<span id="cb29-445"><a href="#cb29-445" aria-hidden="true" tabindex="-1"></a>obs_noise_sd <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb29-446"><a href="#cb29-446" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-447"><a href="#cb29-447" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate athlete-level ground truth</span></span>
<span id="cb29-448"><a href="#cb29-448" aria-hidden="true" tabindex="-1"></a>athletes <span class="op">=</span> pl.DataFrame(</span>
<span id="cb29-449"><a href="#cb29-449" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb29-450"><a href="#cb29-450" aria-hidden="true" tabindex="-1"></a>        <span class="st">"athlete_id"</span>: <span class="bu">range</span>(<span class="dv">1</span>, n_athletes <span class="op">+</span> <span class="dv">1</span>),</span>
<span id="cb29-451"><a href="#cb29-451" aria-hidden="true" tabindex="-1"></a>        <span class="st">"true_1rm"</span>: np.random.normal(pop_mean_1rm, pop_sd_1rm, n_athletes),</span>
<span id="cb29-452"><a href="#cb29-452" aria-hidden="true" tabindex="-1"></a>        <span class="st">"true_endurance"</span>: np.random.normal(</span>
<span id="cb29-453"><a href="#cb29-453" aria-hidden="true" tabindex="-1"></a>            pop_mean_endurance, pop_sd_endurance, n_athletes</span>
<span id="cb29-454"><a href="#cb29-454" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb29-455"><a href="#cb29-455" aria-hidden="true" tabindex="-1"></a>        <span class="st">"n_observations"</span>: np.random.randint(min_n_obs, max_n_obs <span class="op">+</span> <span class="dv">1</span>, n_athletes),</span>
<span id="cb29-456"><a href="#cb29-456" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb29-457"><a href="#cb29-457" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-458"><a href="#cb29-458" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-459"><a href="#cb29-459" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate observations by expanding each athlete's rows</span></span>
<span id="cb29-460"><a href="#cb29-460" aria-hidden="true" tabindex="-1"></a>n_total <span class="op">=</span> athletes[<span class="st">"n_observations"</span>].<span class="bu">sum</span>()</span>
<span id="cb29-461"><a href="#cb29-461" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-462"><a href="#cb29-462" aria-hidden="true" tabindex="-1"></a>simulated_data <span class="op">=</span> (</span>
<span id="cb29-463"><a href="#cb29-463" aria-hidden="true" tabindex="-1"></a>    athletes.select(</span>
<span id="cb29-464"><a href="#cb29-464" aria-hidden="true" tabindex="-1"></a>        pl.col(<span class="st">"athlete_id"</span>).repeat_by(<span class="st">"n_observations"</span>).explode(),</span>
<span id="cb29-465"><a href="#cb29-465" aria-hidden="true" tabindex="-1"></a>        pl.col(<span class="st">"true_1rm"</span>).repeat_by(<span class="st">"n_observations"</span>).explode(),</span>
<span id="cb29-466"><a href="#cb29-466" aria-hidden="true" tabindex="-1"></a>        pl.col(<span class="st">"true_endurance"</span>).repeat_by(<span class="st">"n_observations"</span>).explode(),</span>
<span id="cb29-467"><a href="#cb29-467" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb29-468"><a href="#cb29-468" aria-hidden="true" tabindex="-1"></a>    .with_columns(</span>
<span id="cb29-469"><a href="#cb29-469" aria-hidden="true" tabindex="-1"></a>        session_id<span class="op">=</span>pl.int_range(pl.<span class="bu">len</span>()).over(<span class="st">"athlete_id"</span>) <span class="op">+</span> <span class="dv">1</span>,</span>
<span id="cb29-470"><a href="#cb29-470" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb29-471"><a href="#cb29-471" aria-hidden="true" tabindex="-1"></a>    .with_columns(</span>
<span id="cb29-472"><a href="#cb29-472" aria-hidden="true" tabindex="-1"></a>        reps<span class="op">=</span>pl.Series(np.random.randint(min_reps, max_reps <span class="op">+</span> <span class="dv">1</span>, n_total)),</span>
<span id="cb29-473"><a href="#cb29-473" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb29-474"><a href="#cb29-474" aria-hidden="true" tabindex="-1"></a>    .with_columns(</span>
<span id="cb29-475"><a href="#cb29-475" aria-hidden="true" tabindex="-1"></a>        weight_theoretical<span class="op">=</span>pl.col(<span class="st">"true_1rm"</span>)</span>
<span id="cb29-476"><a href="#cb29-476" aria-hidden="true" tabindex="-1"></a>        <span class="op">/</span> (<span class="dv">1</span> <span class="op">+</span> pl.col(<span class="st">"reps"</span>) <span class="op">/</span> pl.col(<span class="st">"true_endurance"</span>)),</span>
<span id="cb29-477"><a href="#cb29-477" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb29-478"><a href="#cb29-478" aria-hidden="true" tabindex="-1"></a>    .with_columns(</span>
<span id="cb29-479"><a href="#cb29-479" aria-hidden="true" tabindex="-1"></a>        weight_observed<span class="op">=</span>pl.col(<span class="st">"weight_theoretical"</span>)</span>
<span id="cb29-480"><a href="#cb29-480" aria-hidden="true" tabindex="-1"></a>        <span class="op">+</span> pl.Series(np.random.normal(<span class="dv">0</span>, obs_noise_sd, n_total)),</span>
<span id="cb29-481"><a href="#cb29-481" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb29-482"><a href="#cb29-482" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-483"><a href="#cb29-483" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb29-484"><a href="#cb29-484" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-485"><a href="#cb29-485" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb29-486"><a href="#cb29-486" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-487"><a href="#cb29-487" aria-hidden="true" tabindex="-1"></a>I've simulated <span class="in">`r n_athletes`</span> fake athletes, each with their own 1RM, strength endurance capacity, and number of previous sessions of data where they've performed a max reps set for this given exercise.</span>
<span id="cb29-488"><a href="#cb29-488" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-489"><a href="#cb29-489" aria-hidden="true" tabindex="-1"></a>::: callout-note</span>
<span id="cb29-490"><a href="#cb29-490" aria-hidden="true" tabindex="-1"></a>I'm going light on simulation details here to keep this accessible. Expand the section below to get more statistical details on the parameters of the simulated data.</span>
<span id="cb29-491"><a href="#cb29-491" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb29-492"><a href="#cb29-492" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-493"><a href="#cb29-493" aria-hidden="true" tabindex="-1"></a>::: {.details summary="Simulation technical details (optional)"}</span>
<span id="cb29-494"><a href="#cb29-494" aria-hidden="true" tabindex="-1"></a>I've defined the "squad" (<span class="in">`r n_athletes`</span> athletes) to have a mean 1RM of <span class="in">`r paste0(pop_mean_1rm, units)`</span> and standard deviation of <span class="in">`r paste0(pop_sd_1rm, units)`</span> drawn from a random normal distribution. I also assign them an **endurance ability** (also drawn from a normal distribution with a mean of <span class="in">`r pop_mean_endurance`</span> and standard deviation of <span class="in">`r pop_sd_endurance`</span>).</span>
<span id="cb29-495"><a href="#cb29-495" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-496"><a href="#cb29-496" aria-hidden="true" tabindex="-1"></a>Each athlete will have data from somewhere between <span class="in">`r min_n_obs`</span> and <span class="in">`r max_n_obs`</span> previous training sessions where they've done this exercises til failure.</span>
<span id="cb29-497"><a href="#cb29-497" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-498"><a href="#cb29-498" aria-hidden="true" tabindex="-1"></a>For each of these max rep sets, the athletes complete somewhere between <span class="in">`r min_reps`</span> and <span class="in">`r max_reps`</span> reps (randomly sampled with replacement from a uniform distribution). I calculate a theoretical weight they should be able to complete for the set given their simulated 1RM and reps performed based on a modified Epley formula (probably most commonly used e1RM formula, modified to account for variable endurance ability).</span>
<span id="cb29-499"><a href="#cb29-499" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-500"><a href="#cb29-500" aria-hidden="true" tabindex="-1"></a>I finally simulate the actual weight they lifted for the set by taking the weight they theoretically could lift given their simulated 1RM and reps, added some random noise (because humans work like that) drawn randomly from a normal distribution (mean of 0, SD of <span class="in">`r obs_noise_sd`</span>).</span>
<span id="cb29-501"><a href="#cb29-501" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb29-502"><a href="#cb29-502" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-503"><a href="#cb29-503" aria-hidden="true" tabindex="-1"></a>The simulated athlete data looks like this:</span>
<span id="cb29-504"><a href="#cb29-504" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-505"><a href="#cb29-505" aria-hidden="true" tabindex="-1"></a>::: {.panel-tabset group="language"}</span>
<span id="cb29-506"><a href="#cb29-506" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-507"><a href="#cb29-507" aria-hidden="true" tabindex="-1"></a><span class="fu">## ![](/img/Rlogo.svg){height=25}</span></span>
<span id="cb29-510"><a href="#cb29-510" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb29-511"><a href="#cb29-511" aria-hidden="true" tabindex="-1"></a><span class="co">#| output: false</span></span>
<span id="cb29-512"><a href="#cb29-512" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-513"><a href="#cb29-513" aria-hidden="true" tabindex="-1"></a>athletes <span class="sc">|&gt;</span></span>
<span id="cb29-514"><a href="#cb29-514" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), \(x) <span class="fu">round</span>(x, <span class="dv">1</span>))) <span class="sc">|&gt;</span></span>
<span id="cb29-515"><a href="#cb29-515" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt_preview</span>() <span class="sc">|&gt;</span></span>
<span id="cb29-516"><a href="#cb29-516" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt_theme_538</span>(<span class="at">quiet =</span> <span class="cn">TRUE</span>)</span>
<span id="cb29-517"><a href="#cb29-517" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb29-518"><a href="#cb29-518" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-519"><a href="#cb29-519" aria-hidden="true" tabindex="-1"></a><span class="fu">## ![](/img/python-logo-only.svg){height=30}</span></span>
<span id="cb29-522"><a href="#cb29-522" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb29-523"><a href="#cb29-523" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb29-524"><a href="#cb29-524" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-525"><a href="#cb29-525" aria-hidden="true" tabindex="-1"></a>preview_df <span class="op">=</span> pl.concat(</span>
<span id="cb29-526"><a href="#cb29-526" aria-hidden="true" tabindex="-1"></a>    [</span>
<span id="cb29-527"><a href="#cb29-527" aria-hidden="true" tabindex="-1"></a>        athletes.head(<span class="dv">5</span>).with_columns(cs.by_dtype(pl.Float64).<span class="bu">round</span>(<span class="dv">1</span>)).cast(pl.String),</span>
<span id="cb29-528"><a href="#cb29-528" aria-hidden="true" tabindex="-1"></a>        pl.DataFrame({col: [<span class="st">"⋮"</span>] <span class="cf">for</span> col <span class="kw">in</span> athletes.columns}),</span>
<span id="cb29-529"><a href="#cb29-529" aria-hidden="true" tabindex="-1"></a>        athletes.tail(<span class="dv">1</span>).with_columns(cs.by_dtype(pl.Float64).<span class="bu">round</span>(<span class="dv">1</span>)).cast(pl.String),</span>
<span id="cb29-530"><a href="#cb29-530" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb29-531"><a href="#cb29-531" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-532"><a href="#cb29-532" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-533"><a href="#cb29-533" aria-hidden="true" tabindex="-1"></a>GT(preview_df)</span>
<span id="cb29-534"><a href="#cb29-534" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb29-535"><a href="#cb29-535" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-536"><a href="#cb29-536" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb29-537"><a href="#cb29-537" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-540"><a href="#cb29-540" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb29-541"><a href="#cb29-541" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb29-542"><a href="#cb29-542" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-543"><a href="#cb29-543" aria-hidden="true" tabindex="-1"></a>athletes <span class="sc">|&gt;</span></span>
<span id="cb29-544"><a href="#cb29-544" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), \(x) <span class="fu">round</span>(x, <span class="dv">1</span>))) <span class="sc">|&gt;</span></span>
<span id="cb29-545"><a href="#cb29-545" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt_preview</span>() <span class="sc">|&gt;</span></span>
<span id="cb29-546"><a href="#cb29-546" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt_theme_538</span>(<span class="at">quiet =</span> <span class="cn">TRUE</span>)</span>
<span id="cb29-547"><a href="#cb29-547" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb29-548"><a href="#cb29-548" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-549"><a href="#cb29-549" aria-hidden="true" tabindex="-1"></a>I use these athletes and their characteristics to simulate realistic weights and reps. This gives me <span class="in">`r nrow(simulated_data)`</span> simulated max rep sets across the <span class="in">`r n_athletes`</span> athletes.</span>
<span id="cb29-550"><a href="#cb29-550" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-551"><a href="#cb29-551" aria-hidden="true" tabindex="-1"></a>The simulated sets data looks like this:</span>
<span id="cb29-552"><a href="#cb29-552" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-553"><a href="#cb29-553" aria-hidden="true" tabindex="-1"></a>::: {.panel-tabset group="language"}</span>
<span id="cb29-554"><a href="#cb29-554" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-555"><a href="#cb29-555" aria-hidden="true" tabindex="-1"></a><span class="fu">## ![](/img/Rlogo.svg){height=25}</span></span>
<span id="cb29-558"><a href="#cb29-558" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb29-559"><a href="#cb29-559" aria-hidden="true" tabindex="-1"></a><span class="co">#| output: false</span></span>
<span id="cb29-560"><a href="#cb29-560" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-561"><a href="#cb29-561" aria-hidden="true" tabindex="-1"></a>simulated_data <span class="sc">|&gt;</span></span>
<span id="cb29-562"><a href="#cb29-562" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">starts_with</span>(<span class="st">"true"</span>), <span class="sc">-</span>weight_theoretical) <span class="sc">|&gt;</span></span>
<span id="cb29-563"><a href="#cb29-563" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), \(x) <span class="fu">round</span>(x, <span class="dv">1</span>))) <span class="sc">|&gt;</span></span>
<span id="cb29-564"><a href="#cb29-564" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt_preview</span>() <span class="sc">|&gt;</span></span>
<span id="cb29-565"><a href="#cb29-565" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt_theme_538</span>(<span class="at">quiet =</span> <span class="cn">TRUE</span>)</span>
<span id="cb29-566"><a href="#cb29-566" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb29-567"><a href="#cb29-567" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-568"><a href="#cb29-568" aria-hidden="true" tabindex="-1"></a><span class="fu">## ![](/img/python-logo-only.svg){height=30}</span></span>
<span id="cb29-571"><a href="#cb29-571" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb29-572"><a href="#cb29-572" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb29-573"><a href="#cb29-573" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-574"><a href="#cb29-574" aria-hidden="true" tabindex="-1"></a>sets_preview <span class="op">=</span> simulated_data.select(</span>
<span id="cb29-575"><a href="#cb29-575" aria-hidden="true" tabindex="-1"></a>    pl.exclude(<span class="st">"^true.*$"</span>, <span class="st">"weight_theoretical"</span>)</span>
<span id="cb29-576"><a href="#cb29-576" aria-hidden="true" tabindex="-1"></a>).with_columns(cs.by_dtype(pl.Float64).<span class="bu">round</span>(<span class="dv">1</span>))</span>
<span id="cb29-577"><a href="#cb29-577" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-578"><a href="#cb29-578" aria-hidden="true" tabindex="-1"></a>preview_df <span class="op">=</span> pl.concat(</span>
<span id="cb29-579"><a href="#cb29-579" aria-hidden="true" tabindex="-1"></a>    [</span>
<span id="cb29-580"><a href="#cb29-580" aria-hidden="true" tabindex="-1"></a>        sets_preview.head(<span class="dv">5</span>).cast(pl.String),</span>
<span id="cb29-581"><a href="#cb29-581" aria-hidden="true" tabindex="-1"></a>        pl.DataFrame({col: [<span class="st">"⋮"</span>] <span class="cf">for</span> col <span class="kw">in</span> sets_preview.columns}),</span>
<span id="cb29-582"><a href="#cb29-582" aria-hidden="true" tabindex="-1"></a>        sets_preview.tail(<span class="dv">1</span>).cast(pl.String),</span>
<span id="cb29-583"><a href="#cb29-583" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb29-584"><a href="#cb29-584" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-585"><a href="#cb29-585" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-586"><a href="#cb29-586" aria-hidden="true" tabindex="-1"></a>GT(preview_df)</span>
<span id="cb29-587"><a href="#cb29-587" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb29-588"><a href="#cb29-588" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-589"><a href="#cb29-589" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb29-590"><a href="#cb29-590" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-593"><a href="#cb29-593" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb29-594"><a href="#cb29-594" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb29-595"><a href="#cb29-595" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-596"><a href="#cb29-596" aria-hidden="true" tabindex="-1"></a>simulated_data <span class="sc">|&gt;</span></span>
<span id="cb29-597"><a href="#cb29-597" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">starts_with</span>(<span class="st">"true"</span>), <span class="sc">-</span>weight_theoretical) <span class="sc">|&gt;</span></span>
<span id="cb29-598"><a href="#cb29-598" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), \(x) <span class="fu">round</span>(x, <span class="dv">1</span>))) <span class="sc">|&gt;</span></span>
<span id="cb29-599"><a href="#cb29-599" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt_preview</span>() <span class="sc">|&gt;</span></span>
<span id="cb29-600"><a href="#cb29-600" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt_theme_538</span>(<span class="at">quiet =</span> <span class="cn">TRUE</span>)</span>
<span id="cb29-601"><a href="#cb29-601" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb29-602"><a href="#cb29-602" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-603"><a href="#cb29-603" aria-hidden="true" tabindex="-1"></a><span class="fu">### The model</span></span>
<span id="cb29-604"><a href="#cb29-604" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-605"><a href="#cb29-605" aria-hidden="true" tabindex="-1"></a>I'll specify the model to follow a modified <span class="co">[</span><span class="ot">Epley formula</span><span class="co">](https://1repmaxcalculator.net/topics/epley-formula)</span>.</span>
<span id="cb29-606"><a href="#cb29-606" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-607"><a href="#cb29-607" aria-hidden="true" tabindex="-1"></a>Reasons for this:</span>
<span id="cb29-608"><a href="#cb29-608" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-609"><a href="#cb29-609" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>It's probably the most commonly used of the standard 1RM estimate formulas</span>
<span id="cb29-610"><a href="#cb29-610" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-611"><a href="#cb29-611" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>It's fairly simple (good for demo purposes)</span>
<span id="cb29-612"><a href="#cb29-612" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-613"><a href="#cb29-613" aria-hidden="true" tabindex="-1"></a><span class="ss">3.  </span>I used it as part of how the data was simulated, so seeing how the model's performance compares to the standard Epley formula for predicting the true (albeit simulated) 1RMs will be a good test.</span>
<span id="cb29-614"><a href="#cb29-614" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-615"><a href="#cb29-615" aria-hidden="true" tabindex="-1"></a>::: callout-tip</span>
<span id="cb29-616"><a href="#cb29-616" aria-hidden="true" tabindex="-1"></a>If I had real training data (instead of simulated), I would fit a bunch of different model specifications to see which one performs best.</span>
<span id="cb29-617"><a href="#cb29-617" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb29-618"><a href="#cb29-618" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-619"><a href="#cb29-619" aria-hidden="true" tabindex="-1"></a>The standard Epley is <span class="in">`weight * (1 + reps / 30)`</span>.</span>
<span id="cb29-620"><a href="#cb29-620" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-621"><a href="#cb29-621" aria-hidden="true" tabindex="-1"></a>The modification I'm using just changes the <span class="in">`30`</span> (fixed constant representing how quickly strength drops off with more reps; same for everyone) to a parameter the model will optimise based on the data for each athlete. Each athlete gets their own value for this based on how they handle high intensity sets or high volume sets.</span>
<span id="cb29-622"><a href="#cb29-622" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-623"><a href="#cb29-623" aria-hidden="true" tabindex="-1"></a>I'll fit the model on all the simulated data *except the most recent set for each athlete*. I'll keep these sets as a small holdout or test data for comparing predictive performance between my model and the standard Epley formula.</span>
<span id="cb29-624"><a href="#cb29-624" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-625"><a href="#cb29-625" aria-hidden="true" tabindex="-1"></a>::: {.details summary="Stats details about the model (optional)"}</span>
<span id="cb29-626"><a href="#cb29-626" aria-hidden="true" tabindex="-1"></a>The standard Epley formula estimates 1RM from a submaximal lift, but this treats 1RM as the outcome (which we don't observe directly). What we actually observe is the weight lifted for a given number of reps. Solving for weight, the formula becomes <span class="in">`weight = 1RM / (1 + reps / 30)`</span>. This makes weight the outcome, matching the data that's observed in reality. The 1RM becomes a latent parameter we estimate, and we replace the fixed constant 30 with an estimated *endurance parameter*, which is log-transformed to ensure positivity and improve sampling efficiency.</span>
<span id="cb29-627"><a href="#cb29-627" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-628"><a href="#cb29-628" aria-hidden="true" tabindex="-1"></a>The hierarchical structure specifies that both 1RM and endurance vary by athlete with partial pooling. The amount of regularisation or shrinkage is adaptive. Athletes with less data get pulled more toward the group mean and athletes with more data retain more of their individual signal.</span>
<span id="cb29-629"><a href="#cb29-629" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-630"><a href="#cb29-630" aria-hidden="true" tabindex="-1"></a>Weakly informative priors regularise the model (preventing overfitting and improving convergence) without dominating the likelihood. With reasonable data, the posterior will be driven primarily by the observed (simulated) data.</span>
<span id="cb29-631"><a href="#cb29-631" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-632"><a href="#cb29-632" aria-hidden="true" tabindex="-1"></a>Although they're not included in this post (I wanted to keep it tight), I did do prior predictive checks (to ensure my priors were plausible), model diagnostic checks (to ensure no issues during sampling), and posterior predictive checks (to ensure the model's assumptions adequately captured the features of the observed data).</span>
<span id="cb29-633"><a href="#cb29-633" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb29-634"><a href="#cb29-634" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-635"><a href="#cb29-635" aria-hidden="true" tabindex="-1"></a>::: {.panel-tabset group="language"}</span>
<span id="cb29-636"><a href="#cb29-636" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-637"><a href="#cb29-637" aria-hidden="true" tabindex="-1"></a><span class="fu">## ![](/img/Rlogo.svg){height=25}</span></span>
<span id="cb29-640"><a href="#cb29-640" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb29-641"><a href="#cb29-641" aria-hidden="true" tabindex="-1"></a><span class="co">#| output: false</span></span>
<span id="cb29-642"><a href="#cb29-642" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-643"><a href="#cb29-643" aria-hidden="true" tabindex="-1"></a><span class="co"># Data prep</span></span>
<span id="cb29-644"><a href="#cb29-644" aria-hidden="true" tabindex="-1"></a>model_data <span class="ot">&lt;-</span> simulated_data <span class="sc">|&gt;</span></span>
<span id="cb29-645"><a href="#cb29-645" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb29-646"><a href="#cb29-646" aria-hidden="true" tabindex="-1"></a>    <span class="co"># brms doesn't like underscores or . in variable names</span></span>
<span id="cb29-647"><a href="#cb29-647" aria-hidden="true" tabindex="-1"></a>    <span class="at">athlete =</span> athlete_id,</span>
<span id="cb29-648"><a href="#cb29-648" aria-hidden="true" tabindex="-1"></a>    <span class="at">orm =</span> true_1rm,</span>
<span id="cb29-649"><a href="#cb29-649" aria-hidden="true" tabindex="-1"></a>    <span class="at">weight =</span> weight_observed</span>
<span id="cb29-650"><a href="#cb29-650" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb29-651"><a href="#cb29-651" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-652"><a href="#cb29-652" aria-hidden="true" tabindex="-1"></a><span class="co"># Train/test split: hold out last observation per athlete</span></span>
<span id="cb29-653"><a href="#cb29-653" aria-hidden="true" tabindex="-1"></a>holdout <span class="ot">&lt;-</span> model_data <span class="sc">|&gt;</span></span>
<span id="cb29-654"><a href="#cb29-654" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(athlete) <span class="sc">|&gt;</span></span>
<span id="cb29-655"><a href="#cb29-655" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(session_id, <span class="at">n =</span> <span class="dv">1</span>) <span class="sc">|&gt;</span></span>
<span id="cb29-656"><a href="#cb29-656" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb29-657"><a href="#cb29-657" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-658"><a href="#cb29-658" aria-hidden="true" tabindex="-1"></a>train <span class="ot">&lt;-</span> model_data <span class="sc">|&gt;</span></span>
<span id="cb29-659"><a href="#cb29-659" aria-hidden="true" tabindex="-1"></a>  <span class="fu">anti_join</span>(holdout, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"athlete"</span>, <span class="st">"session_id"</span>))</span>
<span id="cb29-660"><a href="#cb29-660" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-661"><a href="#cb29-661" aria-hidden="true" tabindex="-1"></a><span class="co"># Model specification</span></span>
<span id="cb29-662"><a href="#cb29-662" aria-hidden="true" tabindex="-1"></a>modified_epley_formula <span class="ot">&lt;-</span> <span class="fu">bf</span>(</span>
<span id="cb29-663"><a href="#cb29-663" aria-hidden="true" tabindex="-1"></a>  weight <span class="sc">~</span> orm <span class="sc">/</span> (<span class="dv">1</span> <span class="sc">+</span> reps <span class="sc">/</span> <span class="fu">exp</span>(logk)),</span>
<span id="cb29-664"><a href="#cb29-664" aria-hidden="true" tabindex="-1"></a>  orm <span class="sc">~</span> <span class="dv">1</span> <span class="sc">+</span> (<span class="dv">1</span> <span class="sc">|</span> athlete),</span>
<span id="cb29-665"><a href="#cb29-665" aria-hidden="true" tabindex="-1"></a>  logk <span class="sc">~</span> <span class="dv">1</span> <span class="sc">+</span> (<span class="dv">1</span> <span class="sc">|</span> athlete),</span>
<span id="cb29-666"><a href="#cb29-666" aria-hidden="true" tabindex="-1"></a>  <span class="at">nl =</span> <span class="cn">TRUE</span></span>
<span id="cb29-667"><a href="#cb29-667" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-668"><a href="#cb29-668" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-669"><a href="#cb29-669" aria-hidden="true" tabindex="-1"></a><span class="co"># Prior specification</span></span>
<span id="cb29-670"><a href="#cb29-670" aria-hidden="true" tabindex="-1"></a>modified_epley_priors <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb29-671"><a href="#cb29-671" aria-hidden="true" tabindex="-1"></a>  <span class="fu">prior</span>(<span class="fu">normal</span>(<span class="dv">140</span>, <span class="dv">30</span>), <span class="at">nlpar =</span> <span class="st">"orm"</span>, <span class="at">coef =</span> <span class="st">"Intercept"</span>),</span>
<span id="cb29-672"><a href="#cb29-672" aria-hidden="true" tabindex="-1"></a>  <span class="fu">prior</span>(<span class="fu">normal</span>(<span class="fl">3.4</span>, <span class="fl">0.3</span>), <span class="at">nlpar =</span> <span class="st">"logk"</span>, <span class="at">coef =</span> <span class="st">"Intercept"</span>), <span class="co"># log(30) ≈ 3.4</span></span>
<span id="cb29-673"><a href="#cb29-673" aria-hidden="true" tabindex="-1"></a>  <span class="fu">prior</span>(<span class="fu">exponential</span>(<span class="fl">0.05</span>), <span class="at">class =</span> <span class="st">"sd"</span>, <span class="at">nlpar =</span> <span class="st">"orm"</span>),</span>
<span id="cb29-674"><a href="#cb29-674" aria-hidden="true" tabindex="-1"></a>  <span class="fu">prior</span>(<span class="fu">exponential</span>(<span class="dv">2</span>), <span class="at">class =</span> <span class="st">"sd"</span>, <span class="at">nlpar =</span> <span class="st">"logk"</span>),</span>
<span id="cb29-675"><a href="#cb29-675" aria-hidden="true" tabindex="-1"></a>  <span class="fu">prior</span>(<span class="fu">exponential</span>(<span class="fl">0.2</span>), <span class="at">class =</span> <span class="st">"sigma"</span>)</span>
<span id="cb29-676"><a href="#cb29-676" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-677"><a href="#cb29-677" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-678"><a href="#cb29-678" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-679"><a href="#cb29-679" aria-hidden="true" tabindex="-1"></a>modified_epley_model_fit <span class="ot">&lt;-</span> <span class="fu">brm</span>(</span>
<span id="cb29-680"><a href="#cb29-680" aria-hidden="true" tabindex="-1"></a>  <span class="at">formula =</span> modified_epley_formula,</span>
<span id="cb29-681"><a href="#cb29-681" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> train,</span>
<span id="cb29-682"><a href="#cb29-682" aria-hidden="true" tabindex="-1"></a>  <span class="at">prior =</span> modified_epley_priors,</span>
<span id="cb29-683"><a href="#cb29-683" aria-hidden="true" tabindex="-1"></a>  <span class="at">family =</span> <span class="fu">gaussian</span>(),</span>
<span id="cb29-684"><a href="#cb29-684" aria-hidden="true" tabindex="-1"></a>  <span class="at">cores =</span> <span class="dv">4</span>,</span>
<span id="cb29-685"><a href="#cb29-685" aria-hidden="true" tabindex="-1"></a>  <span class="at">chains =</span> <span class="dv">4</span>,</span>
<span id="cb29-686"><a href="#cb29-686" aria-hidden="true" tabindex="-1"></a>  <span class="at">iter =</span> <span class="dv">4000</span>,</span>
<span id="cb29-687"><a href="#cb29-687" aria-hidden="true" tabindex="-1"></a>  <span class="at">warmup =</span> <span class="dv">2000</span>,</span>
<span id="cb29-688"><a href="#cb29-688" aria-hidden="true" tabindex="-1"></a>  <span class="at">control =</span> <span class="fu">list</span>(<span class="at">adapt_delta =</span> <span class="fl">0.95</span>, <span class="at">max_treedepth =</span> <span class="dv">12</span>),</span>
<span id="cb29-689"><a href="#cb29-689" aria-hidden="true" tabindex="-1"></a>  <span class="at">seed =</span> <span class="dv">2534</span>,</span>
<span id="cb29-690"><a href="#cb29-690" aria-hidden="true" tabindex="-1"></a>  <span class="at">file =</span> <span class="st">"modified_epley_model_fit"</span></span>
<span id="cb29-691"><a href="#cb29-691" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-692"><a href="#cb29-692" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-693"><a href="#cb29-693" aria-hidden="true" tabindex="-1"></a>estimate_1rm <span class="ot">&lt;-</span> <span class="cf">function</span>(model, athlete_id, weight, reps) {</span>
<span id="cb29-694"><a href="#cb29-694" aria-hidden="true" tabindex="-1"></a>  model <span class="sc">|&gt;</span></span>
<span id="cb29-695"><a href="#cb29-695" aria-hidden="true" tabindex="-1"></a>    <span class="fu">spread_draws</span>(b_logk_Intercept, r_athlete__logk[athlete, ]) <span class="sc">|&gt;</span></span>
<span id="cb29-696"><a href="#cb29-696" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(athlete <span class="sc">==</span> athlete_id) <span class="sc">|&gt;</span></span>
<span id="cb29-697"><a href="#cb29-697" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb29-698"><a href="#cb29-698" aria-hidden="true" tabindex="-1"></a>      <span class="at">est_endurance =</span> <span class="fu">exp</span>(b_logk_Intercept <span class="sc">+</span> r_athlete__logk),</span>
<span id="cb29-699"><a href="#cb29-699" aria-hidden="true" tabindex="-1"></a>      <span class="at">est_1RM =</span> weight <span class="sc">*</span> (<span class="dv">1</span> <span class="sc">+</span> reps <span class="sc">/</span> est_endurance)</span>
<span id="cb29-700"><a href="#cb29-700" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span></span>
<span id="cb29-701"><a href="#cb29-701" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(.draw, athlete, est_endurance, est_1RM)</span>
<span id="cb29-702"><a href="#cb29-702" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb29-703"><a href="#cb29-703" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb29-704"><a href="#cb29-704" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-705"><a href="#cb29-705" aria-hidden="true" tabindex="-1"></a><span class="fu">## ![](/img/python-logo-only.svg){height=30}</span></span>
<span id="cb29-708"><a href="#cb29-708" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb29-709"><a href="#cb29-709" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb29-710"><a href="#cb29-710" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-711"><a href="#cb29-711" aria-hidden="true" tabindex="-1"></a><span class="co"># Data prep</span></span>
<span id="cb29-712"><a href="#cb29-712" aria-hidden="true" tabindex="-1"></a>model_data <span class="op">=</span> simulated_data.rename(</span>
<span id="cb29-713"><a href="#cb29-713" aria-hidden="true" tabindex="-1"></a>    {<span class="st">"athlete_id"</span>: <span class="st">"athlete"</span>, <span class="st">"true_1rm"</span>: <span class="st">"orm"</span>, <span class="st">"weight_observed"</span>: <span class="st">"weight"</span>}</span>
<span id="cb29-714"><a href="#cb29-714" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-715"><a href="#cb29-715" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-716"><a href="#cb29-716" aria-hidden="true" tabindex="-1"></a><span class="co"># Train/test split: hold out last observation per athlete</span></span>
<span id="cb29-717"><a href="#cb29-717" aria-hidden="true" tabindex="-1"></a>holdout <span class="op">=</span> model_data.sort(<span class="st">"session_id"</span>).group_by(<span class="st">"athlete"</span>).last()</span>
<span id="cb29-718"><a href="#cb29-718" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-719"><a href="#cb29-719" aria-hidden="true" tabindex="-1"></a>train <span class="op">=</span> model_data.join(</span>
<span id="cb29-720"><a href="#cb29-720" aria-hidden="true" tabindex="-1"></a>    holdout.select(<span class="st">"athlete"</span>, <span class="st">"session_id"</span>), on<span class="op">=</span>[<span class="st">"athlete"</span>, <span class="st">"session_id"</span>], how<span class="op">=</span><span class="st">"anti"</span></span>
<span id="cb29-721"><a href="#cb29-721" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-722"><a href="#cb29-722" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-723"><a href="#cb29-723" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert to numpy for PyMC</span></span>
<span id="cb29-724"><a href="#cb29-724" aria-hidden="true" tabindex="-1"></a>athlete_idx, athlete_codes <span class="op">=</span> (</span>
<span id="cb29-725"><a href="#cb29-725" aria-hidden="true" tabindex="-1"></a>    train[<span class="st">"athlete"</span>].to_numpy(),</span>
<span id="cb29-726"><a href="#cb29-726" aria-hidden="true" tabindex="-1"></a>    np.unique(train[<span class="st">"athlete"</span>].to_numpy()),</span>
<span id="cb29-727"><a href="#cb29-727" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-728"><a href="#cb29-728" aria-hidden="true" tabindex="-1"></a>athlete_idx_mapped <span class="op">=</span> np.array([np.where(athlete_codes <span class="op">==</span> a)[<span class="dv">0</span>][<span class="dv">0</span>] <span class="cf">for</span> a <span class="kw">in</span> athlete_idx])</span>
<span id="cb29-729"><a href="#cb29-729" aria-hidden="true" tabindex="-1"></a>n_athletes <span class="op">=</span> <span class="bu">len</span>(athlete_codes)</span>
<span id="cb29-730"><a href="#cb29-730" aria-hidden="true" tabindex="-1"></a>weight <span class="op">=</span> train[<span class="st">"weight"</span>].to_numpy()</span>
<span id="cb29-731"><a href="#cb29-731" aria-hidden="true" tabindex="-1"></a>reps <span class="op">=</span> train[<span class="st">"reps"</span>].to_numpy()</span>
<span id="cb29-732"><a href="#cb29-732" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-733"><a href="#cb29-733" aria-hidden="true" tabindex="-1"></a><span class="co"># Model specification</span></span>
<span id="cb29-734"><a href="#cb29-734" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> pm.Model() <span class="im">as</span> modified_epley_model:</span>
<span id="cb29-735"><a href="#cb29-735" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Hyperpriors</span></span>
<span id="cb29-736"><a href="#cb29-736" aria-hidden="true" tabindex="-1"></a>    orm_mu <span class="op">=</span> pm.Normal(<span class="st">"orm_mu"</span>, mu<span class="op">=</span><span class="dv">140</span>, sigma<span class="op">=</span><span class="dv">30</span>)</span>
<span id="cb29-737"><a href="#cb29-737" aria-hidden="true" tabindex="-1"></a>    orm_sigma <span class="op">=</span> pm.Exponential(<span class="st">"orm_sigma"</span>, <span class="fl">0.05</span>)</span>
<span id="cb29-738"><a href="#cb29-738" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-739"><a href="#cb29-739" aria-hidden="true" tabindex="-1"></a>    logk_mu <span class="op">=</span> pm.Normal(<span class="st">"logk_mu"</span>, mu<span class="op">=</span><span class="fl">3.4</span>, sigma<span class="op">=</span><span class="fl">0.3</span>)  <span class="co"># log(30) ≈ 3.4</span></span>
<span id="cb29-740"><a href="#cb29-740" aria-hidden="true" tabindex="-1"></a>    logk_sigma <span class="op">=</span> pm.Exponential(<span class="st">"logk_sigma"</span>, <span class="dv">2</span>)</span>
<span id="cb29-741"><a href="#cb29-741" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-742"><a href="#cb29-742" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Athlete-level parameters</span></span>
<span id="cb29-743"><a href="#cb29-743" aria-hidden="true" tabindex="-1"></a>    orm_athlete <span class="op">=</span> pm.Normal(<span class="st">"orm_athlete"</span>, mu<span class="op">=</span>orm_mu, sigma<span class="op">=</span>orm_sigma, shape<span class="op">=</span>n_athletes)</span>
<span id="cb29-744"><a href="#cb29-744" aria-hidden="true" tabindex="-1"></a>    logk_athlete <span class="op">=</span> pm.Normal(</span>
<span id="cb29-745"><a href="#cb29-745" aria-hidden="true" tabindex="-1"></a>        <span class="st">"logk_athlete"</span>, mu<span class="op">=</span>logk_mu, sigma<span class="op">=</span>logk_sigma, shape<span class="op">=</span>n_athletes</span>
<span id="cb29-746"><a href="#cb29-746" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb29-747"><a href="#cb29-747" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-748"><a href="#cb29-748" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Observation noise</span></span>
<span id="cb29-749"><a href="#cb29-749" aria-hidden="true" tabindex="-1"></a>    sigma <span class="op">=</span> pm.Exponential(<span class="st">"sigma"</span>, <span class="fl">0.2</span>)</span>
<span id="cb29-750"><a href="#cb29-750" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-751"><a href="#cb29-751" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Modified Epley formula: weight = orm / (1 + reps / exp(logk))</span></span>
<span id="cb29-752"><a href="#cb29-752" aria-hidden="true" tabindex="-1"></a>    mu <span class="op">=</span> orm_athlete[athlete_idx_mapped] <span class="op">/</span> (</span>
<span id="cb29-753"><a href="#cb29-753" aria-hidden="true" tabindex="-1"></a>        <span class="dv">1</span> <span class="op">+</span> reps <span class="op">/</span> np.exp(logk_athlete[athlete_idx_mapped])</span>
<span id="cb29-754"><a href="#cb29-754" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb29-755"><a href="#cb29-755" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-756"><a href="#cb29-756" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Likelihood</span></span>
<span id="cb29-757"><a href="#cb29-757" aria-hidden="true" tabindex="-1"></a>    weight_obs <span class="op">=</span> pm.Normal(<span class="st">"weight_obs"</span>, mu<span class="op">=</span>mu, sigma<span class="op">=</span>sigma, observed<span class="op">=</span>weight)</span>
<span id="cb29-758"><a href="#cb29-758" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-759"><a href="#cb29-759" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Sample</span></span>
<span id="cb29-760"><a href="#cb29-760" aria-hidden="true" tabindex="-1"></a>    modified_epley_trace <span class="op">=</span> pm.sample(</span>
<span id="cb29-761"><a href="#cb29-761" aria-hidden="true" tabindex="-1"></a>        draws<span class="op">=</span><span class="dv">2000</span>,</span>
<span id="cb29-762"><a href="#cb29-762" aria-hidden="true" tabindex="-1"></a>        tune<span class="op">=</span><span class="dv">2000</span>,</span>
<span id="cb29-763"><a href="#cb29-763" aria-hidden="true" tabindex="-1"></a>        cores<span class="op">=</span><span class="dv">4</span>,</span>
<span id="cb29-764"><a href="#cb29-764" aria-hidden="true" tabindex="-1"></a>        chains<span class="op">=</span><span class="dv">4</span>,</span>
<span id="cb29-765"><a href="#cb29-765" aria-hidden="true" tabindex="-1"></a>        random_seed<span class="op">=</span><span class="dv">2534</span>,</span>
<span id="cb29-766"><a href="#cb29-766" aria-hidden="true" tabindex="-1"></a>        target_accept<span class="op">=</span><span class="fl">0.95</span>,</span>
<span id="cb29-767"><a href="#cb29-767" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb29-768"><a href="#cb29-768" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-769"><a href="#cb29-769" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-770"><a href="#cb29-770" aria-hidden="true" tabindex="-1"></a><span class="co"># Function to estimate 1RM</span></span>
<span id="cb29-771"><a href="#cb29-771" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> estimate_1rm(trace, athlete_id, weight, reps, n_samples<span class="op">=</span><span class="dv">4000</span>):</span>
<span id="cb29-772"><a href="#cb29-772" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Get athlete index</span></span>
<span id="cb29-773"><a href="#cb29-773" aria-hidden="true" tabindex="-1"></a>    athlete_idx <span class="op">=</span> np.where(athlete_codes <span class="op">==</span> athlete_id)[<span class="dv">0</span>][<span class="dv">0</span>]</span>
<span id="cb29-774"><a href="#cb29-774" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-775"><a href="#cb29-775" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Extract posterior samples</span></span>
<span id="cb29-776"><a href="#cb29-776" aria-hidden="true" tabindex="-1"></a>    logk_samples <span class="op">=</span> trace.posterior[<span class="st">"logk_athlete"</span>].values.reshape(<span class="op">-</span><span class="dv">1</span>, n_athletes)[</span>
<span id="cb29-777"><a href="#cb29-777" aria-hidden="true" tabindex="-1"></a>        :, athlete_idx</span>
<span id="cb29-778"><a href="#cb29-778" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb29-779"><a href="#cb29-779" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-780"><a href="#cb29-780" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calculate estimated 1RM for each posterior sample</span></span>
<span id="cb29-781"><a href="#cb29-781" aria-hidden="true" tabindex="-1"></a>    est_endurance <span class="op">=</span> np.exp(logk_samples)</span>
<span id="cb29-782"><a href="#cb29-782" aria-hidden="true" tabindex="-1"></a>    est_1rm <span class="op">=</span> weight <span class="op">*</span> (<span class="dv">1</span> <span class="op">+</span> reps <span class="op">/</span> est_endurance)</span>
<span id="cb29-783"><a href="#cb29-783" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-784"><a href="#cb29-784" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {</span>
<span id="cb29-785"><a href="#cb29-785" aria-hidden="true" tabindex="-1"></a>        <span class="st">"athlete"</span>: athlete_id,</span>
<span id="cb29-786"><a href="#cb29-786" aria-hidden="true" tabindex="-1"></a>        <span class="st">"est_endurance"</span>: est_endurance[:n_samples],</span>
<span id="cb29-787"><a href="#cb29-787" aria-hidden="true" tabindex="-1"></a>        <span class="st">"est_1rm"</span>: est_1rm[:n_samples],</span>
<span id="cb29-788"><a href="#cb29-788" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb29-789"><a href="#cb29-789" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb29-790"><a href="#cb29-790" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-791"><a href="#cb29-791" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb29-792"><a href="#cb29-792" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-793"><a href="#cb29-793" aria-hidden="true" tabindex="-1"></a>Now the model is fit, I use it to make 1RM estimates with the help of a custom function I've defined called <span class="in">`estimate_1rm()`</span>. It takes the model object, the athlete ID, and the weight and reps the athlete performed in the set as arguments and gives me back a distribution of predictions.</span>
<span id="cb29-794"><a href="#cb29-794" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-795"><a href="#cb29-795" aria-hidden="true" tabindex="-1"></a>::: {.panel-tabset group="language"}</span>
<span id="cb29-796"><a href="#cb29-796" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-797"><a href="#cb29-797" aria-hidden="true" tabindex="-1"></a><span class="fu">## ![](/img/Rlogo.svg){height=25}</span></span>
<span id="cb29-800"><a href="#cb29-800" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb29-801"><a href="#cb29-801" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: false</span></span>
<span id="cb29-802"><a href="#cb29-802" aria-hidden="true" tabindex="-1"></a>example_predictions <span class="ot">&lt;-</span> <span class="fu">estimate_1rm</span>(</span>
<span id="cb29-803"><a href="#cb29-803" aria-hidden="true" tabindex="-1"></a>  <span class="at">model =</span> modified_epley_model_fit,</span>
<span id="cb29-804"><a href="#cb29-804" aria-hidden="true" tabindex="-1"></a>  <span class="at">athlete_id =</span> <span class="dv">17</span>,</span>
<span id="cb29-805"><a href="#cb29-805" aria-hidden="true" tabindex="-1"></a>  <span class="at">weight =</span> <span class="fl">102.5</span>,</span>
<span id="cb29-806"><a href="#cb29-806" aria-hidden="true" tabindex="-1"></a>  <span class="at">reps =</span> <span class="dv">5</span></span>
<span id="cb29-807"><a href="#cb29-807" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-808"><a href="#cb29-808" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb29-809"><a href="#cb29-809" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-810"><a href="#cb29-810" aria-hidden="true" tabindex="-1"></a><span class="fu">## ![](/img/python-logo-only.svg){height=30}</span></span>
<span id="cb29-813"><a href="#cb29-813" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb29-814"><a href="#cb29-814" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb29-815"><a href="#cb29-815" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: false</span></span>
<span id="cb29-816"><a href="#cb29-816" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-817"><a href="#cb29-817" aria-hidden="true" tabindex="-1"></a>example_predictions <span class="op">=</span> estimate_1rm(</span>
<span id="cb29-818"><a href="#cb29-818" aria-hidden="true" tabindex="-1"></a>    trace<span class="op">=</span>modified_epley_trace, athlete_id<span class="op">=</span><span class="dv">17</span>, weight<span class="op">=</span><span class="fl">102.5</span>, reps<span class="op">=</span><span class="dv">5</span></span>
<span id="cb29-819"><a href="#cb29-819" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-820"><a href="#cb29-820" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb29-821"><a href="#cb29-821" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-822"><a href="#cb29-822" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb29-823"><a href="#cb29-823" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-824"><a href="#cb29-824" aria-hidden="true" tabindex="-1"></a>::: {.panel-tabset group="language"}</span>
<span id="cb29-825"><a href="#cb29-825" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-826"><a href="#cb29-826" aria-hidden="true" tabindex="-1"></a><span class="fu">## ![](/img/Rlogo.svg){height=25}</span></span>
<span id="cb29-829"><a href="#cb29-829" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb29-830"><a href="#cb29-830" aria-hidden="true" tabindex="-1"></a><span class="co">#| output: false</span></span>
<span id="cb29-831"><a href="#cb29-831" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-832"><a href="#cb29-832" aria-hidden="true" tabindex="-1"></a>example_dist <span class="ot">&lt;-</span> example_predictions <span class="sc">|&gt;</span></span>
<span id="cb29-833"><a href="#cb29-833" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> est_1RM)) <span class="sc">+</span></span>
<span id="cb29-834"><a href="#cb29-834" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_slab</span>(<span class="at">fill =</span> <span class="fu">lighten</span>(colours[<span class="dv">2</span>], <span class="fl">0.75</span>)) <span class="sc">+</span></span>
<span id="cb29-835"><a href="#cb29-835" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_spike</span>(<span class="at">at =</span> <span class="st">"median"</span>, <span class="at">size =</span> <span class="dv">0</span>, <span class="at">colour =</span> colours[<span class="dv">2</span>]) <span class="sc">+</span></span>
<span id="cb29-836"><a href="#cb29-836" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_thickness_shared</span>() <span class="sc">+</span></span>
<span id="cb29-837"><a href="#cb29-837" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(</span>
<span id="cb29-838"><a href="#cb29-838" aria-hidden="true" tabindex="-1"></a>    <span class="st">"curve"</span>,</span>
<span id="cb29-839"><a href="#cb29-839" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="fl">120.5</span>,</span>
<span id="cb29-840"><a href="#cb29-840" aria-hidden="true" tabindex="-1"></a>    <span class="at">xend =</span> <span class="fu">median</span>(example_predictions<span class="sc">$</span>est_1RM) <span class="sc">+</span> <span class="fl">0.1</span>,</span>
<span id="cb29-841"><a href="#cb29-841" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="dv">1</span>,</span>
<span id="cb29-842"><a href="#cb29-842" aria-hidden="true" tabindex="-1"></a>    <span class="at">yend =</span> <span class="fl">0.925</span>,</span>
<span id="cb29-843"><a href="#cb29-843" aria-hidden="true" tabindex="-1"></a>    <span class="at">curvature =</span> <span class="fl">0.25</span>,</span>
<span id="cb29-844"><a href="#cb29-844" aria-hidden="true" tabindex="-1"></a>    <span class="at">arrow =</span> <span class="fu">arrow</span>(<span class="at">length =</span> <span class="fu">unit</span>(<span class="dv">2</span>, <span class="st">"mm"</span>), <span class="at">type =</span> <span class="st">"closed"</span>),</span>
<span id="cb29-845"><a href="#cb29-845" aria-hidden="true" tabindex="-1"></a>    <span class="at">colour =</span> <span class="st">"grey60"</span></span>
<span id="cb29-846"><a href="#cb29-846" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb29-847"><a href="#cb29-847" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(</span>
<span id="cb29-848"><a href="#cb29-848" aria-hidden="true" tabindex="-1"></a>    <span class="st">"text"</span>,</span>
<span id="cb29-849"><a href="#cb29-849" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="fl">121.3</span>,</span>
<span id="cb29-850"><a href="#cb29-850" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="fl">0.95</span>,</span>
<span id="cb29-851"><a href="#cb29-851" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="st">"1RM estimate</span><span class="sc">\n</span><span class="st">(median)"</span>,</span>
<span id="cb29-852"><a href="#cb29-852" aria-hidden="true" tabindex="-1"></a>    <span class="at">hjust =</span> <span class="fl">0.5</span>,</span>
<span id="cb29-853"><a href="#cb29-853" aria-hidden="true" tabindex="-1"></a>    <span class="at">colour =</span> <span class="st">"grey35"</span>,</span>
<span id="cb29-854"><a href="#cb29-854" aria-hidden="true" tabindex="-1"></a>    <span class="at">family =</span> <span class="st">"Myriad Pro Regular"</span></span>
<span id="cb29-855"><a href="#cb29-855" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb29-856"><a href="#cb29-856" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(</span>
<span id="cb29-857"><a href="#cb29-857" aria-hidden="true" tabindex="-1"></a>    <span class="st">"text"</span>,</span>
<span id="cb29-858"><a href="#cb29-858" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="fl">116.7</span>,</span>
<span id="cb29-859"><a href="#cb29-859" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="fl">0.2</span>,</span>
<span id="cb29-860"><a href="#cb29-860" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="st">"Lower end of</span><span class="sc">\n</span><span class="st">estimates"</span>,</span>
<span id="cb29-861"><a href="#cb29-861" aria-hidden="true" tabindex="-1"></a>    <span class="at">hjust =</span> <span class="fl">0.5</span>,</span>
<span id="cb29-862"><a href="#cb29-862" aria-hidden="true" tabindex="-1"></a>    <span class="at">colour =</span> <span class="st">"grey35"</span>,</span>
<span id="cb29-863"><a href="#cb29-863" aria-hidden="true" tabindex="-1"></a>    <span class="at">family =</span> <span class="st">"Myriad Pro Regular"</span></span>
<span id="cb29-864"><a href="#cb29-864" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb29-865"><a href="#cb29-865" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(</span>
<span id="cb29-866"><a href="#cb29-866" aria-hidden="true" tabindex="-1"></a>    <span class="st">"text"</span>,</span>
<span id="cb29-867"><a href="#cb29-867" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="dv">122</span>,</span>
<span id="cb29-868"><a href="#cb29-868" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="fl">0.2</span>,</span>
<span id="cb29-869"><a href="#cb29-869" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="st">"Upper end of</span><span class="sc">\n</span><span class="st">estimates"</span>,</span>
<span id="cb29-870"><a href="#cb29-870" aria-hidden="true" tabindex="-1"></a>    <span class="at">hjust =</span> <span class="fl">0.5</span>,</span>
<span id="cb29-871"><a href="#cb29-871" aria-hidden="true" tabindex="-1"></a>    <span class="at">colour =</span> <span class="st">"grey35"</span>,</span>
<span id="cb29-872"><a href="#cb29-872" aria-hidden="true" tabindex="-1"></a>    <span class="at">family =</span> <span class="st">"Myriad Pro Regular"</span></span>
<span id="cb29-873"><a href="#cb29-873" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb29-874"><a href="#cb29-874" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb29-875"><a href="#cb29-875" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Estimated 1RM"</span>,</span>
<span id="cb29-876"><a href="#cb29-876" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> socials,</span>
<span id="cb29-877"><a href="#cb29-877" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Full distribution of 1RM estimates"</span>,</span>
<span id="cb29-878"><a href="#cb29-878" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="fu">paste0</span>(<span class="st">"Athlete 17 | Max reps set of 5 @ 102.5"</span>, units)</span>
<span id="cb29-879"><a href="#cb29-879" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb29-880"><a href="#cb29-880" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(</span>
<span id="cb29-881"><a href="#cb29-881" aria-hidden="true" tabindex="-1"></a>    <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">116</span>, <span class="dv">122</span>, <span class="dv">1</span>),</span>
<span id="cb29-882"><a href="#cb29-882" aria-hidden="true" tabindex="-1"></a>    <span class="at">labels =</span> <span class="fu">label_number</span>(<span class="at">suffix =</span> units)</span>
<span id="cb29-883"><a href="#cb29-883" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb29-884"><a href="#cb29-884" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">expand =</span> <span class="fu">expansion</span>(<span class="at">mult =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.05</span>))) <span class="sc">+</span></span>
<span id="cb29-885"><a href="#cb29-885" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb29-886"><a href="#cb29-886" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb29-887"><a href="#cb29-887" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb29-888"><a href="#cb29-888" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.line.y =</span> <span class="fu">element_blank</span>()</span>
<span id="cb29-889"><a href="#cb29-889" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb29-890"><a href="#cb29-890" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-891"><a href="#cb29-891" aria-hidden="true" tabindex="-1"></a>example_dist</span>
<span id="cb29-892"><a href="#cb29-892" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb29-893"><a href="#cb29-893" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-894"><a href="#cb29-894" aria-hidden="true" tabindex="-1"></a><span class="fu">## ![](/img/python-logo-only.svg){height=30}</span></span>
<span id="cb29-897"><a href="#cb29-897" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb29-898"><a href="#cb29-898" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb29-899"><a href="#cb29-899" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-900"><a href="#cb29-900" aria-hidden="true" tabindex="-1"></a>example_pred_df <span class="op">=</span> pd.DataFrame({<span class="st">"est_1RM"</span>: example_predictions[<span class="st">"est_1rm"</span>]})</span>
<span id="cb29-901"><a href="#cb29-901" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-902"><a href="#cb29-902" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb29-903"><a href="#cb29-903" aria-hidden="true" tabindex="-1"></a>    ggplot(example_pred_df, aes(x<span class="op">=</span><span class="st">"est_1RM"</span>))</span>
<span id="cb29-904"><a href="#cb29-904" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> geom_density(fill<span class="op">=</span><span class="st">"#a8c7e6"</span>, alpha<span class="op">=</span><span class="fl">0.8</span>)</span>
<span id="cb29-905"><a href="#cb29-905" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> geom_vline(</span>
<span id="cb29-906"><a href="#cb29-906" aria-hidden="true" tabindex="-1"></a>        xintercept<span class="op">=</span>example_pred_df[<span class="st">"est_1RM"</span>].median(), color<span class="op">=</span><span class="st">"#134A8E"</span>, size<span class="op">=</span><span class="dv">1</span></span>
<span id="cb29-907"><a href="#cb29-907" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb29-908"><a href="#cb29-908" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> labs(</span>
<span id="cb29-909"><a href="#cb29-909" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span><span class="st">"Estimated 1RM"</span>,</span>
<span id="cb29-910"><a href="#cb29-910" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb29-911"><a href="#cb29-911" aria-hidden="true" tabindex="-1"></a>        title<span class="op">=</span><span class="st">"Full distribution of 1RM estimates"</span>,</span>
<span id="cb29-912"><a href="#cb29-912" aria-hidden="true" tabindex="-1"></a>        subtitle<span class="op">=</span><span class="ss">f"Athlete 17 | Max reps set of 5 @ 102.5</span><span class="sc">{</span>units<span class="sc">}</span><span class="ss">"</span>,</span>
<span id="cb29-913"><a href="#cb29-913" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb29-914"><a href="#cb29-914" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> scale_x_continuous(labels<span class="op">=</span><span class="kw">lambda</span> x: [<span class="ss">f"</span><span class="sc">{</span>v<span class="sc">:.0f}{</span>units<span class="sc">}</span><span class="ss">"</span> <span class="cf">for</span> v <span class="kw">in</span> x])</span>
<span id="cb29-915"><a href="#cb29-915" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> theme_classic()</span>
<span id="cb29-916"><a href="#cb29-916" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> theme(</span>
<span id="cb29-917"><a href="#cb29-917" aria-hidden="true" tabindex="-1"></a>        axis_text_y<span class="op">=</span>element_blank(),</span>
<span id="cb29-918"><a href="#cb29-918" aria-hidden="true" tabindex="-1"></a>        axis_ticks_major_y<span class="op">=</span>element_blank(),</span>
<span id="cb29-919"><a href="#cb29-919" aria-hidden="true" tabindex="-1"></a>        axis_line_y<span class="op">=</span>element_blank(),</span>
<span id="cb29-920"><a href="#cb29-920" aria-hidden="true" tabindex="-1"></a>        axis_title_y<span class="op">=</span>element_blank(),</span>
<span id="cb29-921"><a href="#cb29-921" aria-hidden="true" tabindex="-1"></a>        plot_title<span class="op">=</span>element_text(weight<span class="op">=</span><span class="st">"bold"</span>),</span>
<span id="cb29-922"><a href="#cb29-922" aria-hidden="true" tabindex="-1"></a>        plot_subtitle<span class="op">=</span>element_text(color<span class="op">=</span><span class="st">"grey"</span>),</span>
<span id="cb29-923"><a href="#cb29-923" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb29-924"><a href="#cb29-924" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-925"><a href="#cb29-925" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb29-926"><a href="#cb29-926" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-927"><a href="#cb29-927" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb29-928"><a href="#cb29-928" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-931"><a href="#cb29-931" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb29-932"><a href="#cb29-932" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb29-933"><a href="#cb29-933" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-934"><a href="#cb29-934" aria-hidden="true" tabindex="-1"></a>example_dist</span>
<span id="cb29-935"><a href="#cb29-935" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb29-936"><a href="#cb29-936" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-937"><a href="#cb29-937" aria-hidden="true" tabindex="-1"></a>Sometimes the full distribution is a bit much and you just want a summary (e.g. median with 80% credible intervals).<span class="ot">[^2]</span> Easy.</span>
<span id="cb29-938"><a href="#cb29-938" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-939"><a href="#cb29-939" aria-hidden="true" tabindex="-1"></a><span class="ot">[^2]: </span>These intervals are what you get with Bayesian model estimates and they are what I think most people want confidence intervals to be. There is x% probability that the interval contains the true value.</span>
<span id="cb29-940"><a href="#cb29-940" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-941"><a href="#cb29-941" aria-hidden="true" tabindex="-1"></a>::: {.panel-tabset group="language"}</span>
<span id="cb29-942"><a href="#cb29-942" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-943"><a href="#cb29-943" aria-hidden="true" tabindex="-1"></a><span class="fu">## ![](/img/Rlogo.svg){height=25}</span></span>
<span id="cb29-946"><a href="#cb29-946" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb29-947"><a href="#cb29-947" aria-hidden="true" tabindex="-1"></a><span class="co">#| output: false</span></span>
<span id="cb29-948"><a href="#cb29-948" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-949"><a href="#cb29-949" aria-hidden="true" tabindex="-1"></a>example_summary <span class="ot">&lt;-</span> example_predictions <span class="sc">|&gt;</span></span>
<span id="cb29-950"><a href="#cb29-950" aria-hidden="true" tabindex="-1"></a>  <span class="fu">median_qi</span>(<span class="at">.width =</span> <span class="fl">0.8</span>) <span class="sc">|&gt;</span></span>
<span id="cb29-951"><a href="#cb29-951" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">contains</span>(<span class="st">"endurance"</span>), <span class="sc">-</span>.interval) <span class="sc">|&gt;</span></span>
<span id="cb29-952"><a href="#cb29-952" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), \(x) <span class="fu">round</span>(x, <span class="dv">1</span>))) <span class="sc">|&gt;</span></span>
<span id="cb29-953"><a href="#cb29-953" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span></span>
<span id="cb29-954"><a href="#cb29-954" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt_theme_538</span>(<span class="at">quiet =</span> <span class="cn">TRUE</span>)</span>
<span id="cb29-955"><a href="#cb29-955" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-956"><a href="#cb29-956" aria-hidden="true" tabindex="-1"></a>example_summary</span>
<span id="cb29-957"><a href="#cb29-957" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb29-958"><a href="#cb29-958" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-959"><a href="#cb29-959" aria-hidden="true" tabindex="-1"></a><span class="fu">## ![](/img/python-logo-only.svg){height=30}</span></span>
<span id="cb29-962"><a href="#cb29-962" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb29-963"><a href="#cb29-963" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb29-964"><a href="#cb29-964" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-965"><a href="#cb29-965" aria-hidden="true" tabindex="-1"></a>median_1rm <span class="op">=</span> np.median(example_predictions[<span class="st">"est_1rm"</span>])</span>
<span id="cb29-966"><a href="#cb29-966" aria-hidden="true" tabindex="-1"></a>lower_1rm <span class="op">=</span> np.percentile(example_predictions[<span class="st">"est_1rm"</span>], <span class="dv">10</span>)</span>
<span id="cb29-967"><a href="#cb29-967" aria-hidden="true" tabindex="-1"></a>upper_1rm <span class="op">=</span> np.percentile(example_predictions[<span class="st">"est_1rm"</span>], <span class="dv">90</span>)</span>
<span id="cb29-968"><a href="#cb29-968" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-969"><a href="#cb29-969" aria-hidden="true" tabindex="-1"></a>summary_df <span class="op">=</span> pl.DataFrame(</span>
<span id="cb29-970"><a href="#cb29-970" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb29-971"><a href="#cb29-971" aria-hidden="true" tabindex="-1"></a>        <span class="st">"athlete"</span>: [example_predictions[<span class="st">"athlete"</span>]],</span>
<span id="cb29-972"><a href="#cb29-972" aria-hidden="true" tabindex="-1"></a>        <span class="st">"est_1RM"</span>: [<span class="bu">round</span>(median_1rm, <span class="dv">1</span>)],</span>
<span id="cb29-973"><a href="#cb29-973" aria-hidden="true" tabindex="-1"></a>        <span class="st">"est_1RM_lower"</span>: [<span class="bu">round</span>(lower_1rm, <span class="dv">1</span>)],</span>
<span id="cb29-974"><a href="#cb29-974" aria-hidden="true" tabindex="-1"></a>        <span class="st">"est_1RM_upper"</span>: [<span class="bu">round</span>(upper_1rm, <span class="dv">1</span>)],</span>
<span id="cb29-975"><a href="#cb29-975" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb29-976"><a href="#cb29-976" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-977"><a href="#cb29-977" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-978"><a href="#cb29-978" aria-hidden="true" tabindex="-1"></a>GT(summary_df)</span>
<span id="cb29-979"><a href="#cb29-979" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb29-980"><a href="#cb29-980" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-981"><a href="#cb29-981" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb29-982"><a href="#cb29-982" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-985"><a href="#cb29-985" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb29-986"><a href="#cb29-986" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb29-987"><a href="#cb29-987" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-988"><a href="#cb29-988" aria-hidden="true" tabindex="-1"></a>example_summary</span>
<span id="cb29-989"><a href="#cb29-989" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb29-990"><a href="#cb29-990" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-991"><a href="#cb29-991" aria-hidden="true" tabindex="-1"></a><span class="fu">## How accurate is it?</span></span>
<span id="cb29-992"><a href="#cb29-992" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-993"><a href="#cb29-993" aria-hidden="true" tabindex="-1"></a>By seeing how close the model got to the true 1RM (defined in the simulation), and doing the same for the standard Epley formula, we can compare their predictive accuracy on new sets.<span class="ot">[^3]</span></span>
<span id="cb29-994"><a href="#cb29-994" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-995"><a href="#cb29-995" aria-hidden="true" tabindex="-1"></a><span class="ot">[^3]: </span>This evaluation is pretty crude (holding out each athletes most recent set for testing; only <span class="in">`r n_athletes`</span> sets total). It's kind of how it would work in real life though; predictions after each new session are like their own test set (assuming model is updated before each session). A stronger approach to evaluation during the research phase of something like (as opposed to ongoing use) would be to use something like <span class="co">[</span><span class="ot">cross validation</span><span class="co">](https://www.youtube.com/watch?v=fSytzGwwBVw)</span>.</span>
<span id="cb29-996"><a href="#cb29-996" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-997"><a href="#cb29-997" aria-hidden="true" tabindex="-1"></a>::: {.panel-tabset group="language"}</span>
<span id="cb29-998"><a href="#cb29-998" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-999"><a href="#cb29-999" aria-hidden="true" tabindex="-1"></a><span class="fu">## ![](/img/Rlogo.svg){height=25}</span></span>
<span id="cb29-1002"><a href="#cb29-1002" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb29-1003"><a href="#cb29-1003" aria-hidden="true" tabindex="-1"></a><span class="co">#| output: false</span></span>
<span id="cb29-1004"><a href="#cb29-1004" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1005"><a href="#cb29-1005" aria-hidden="true" tabindex="-1"></a>holdout_predictions <span class="ot">&lt;-</span> holdout <span class="sc">|&gt;</span></span>
<span id="cb29-1006"><a href="#cb29-1006" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rowwise</span>() <span class="sc">|&gt;</span></span>
<span id="cb29-1007"><a href="#cb29-1007" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb29-1008"><a href="#cb29-1008" aria-hidden="true" tabindex="-1"></a>    <span class="at">model_prediction =</span> <span class="fu">estimate_1rm</span>(</span>
<span id="cb29-1009"><a href="#cb29-1009" aria-hidden="true" tabindex="-1"></a>      modified_epley_model_fit,</span>
<span id="cb29-1010"><a href="#cb29-1010" aria-hidden="true" tabindex="-1"></a>      athlete,</span>
<span id="cb29-1011"><a href="#cb29-1011" aria-hidden="true" tabindex="-1"></a>      weight,</span>
<span id="cb29-1012"><a href="#cb29-1012" aria-hidden="true" tabindex="-1"></a>      reps</span>
<span id="cb29-1013"><a href="#cb29-1013" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span></span>
<span id="cb29-1014"><a href="#cb29-1014" aria-hidden="true" tabindex="-1"></a>      <span class="fu">summarise</span>(<span class="at">prediction =</span> <span class="fu">median</span>(est_1RM)) <span class="sc">|&gt;</span></span>
<span id="cb29-1015"><a href="#cb29-1015" aria-hidden="true" tabindex="-1"></a>      <span class="fu">pull</span>(prediction),</span>
<span id="cb29-1016"><a href="#cb29-1016" aria-hidden="true" tabindex="-1"></a>    <span class="at">standard_epley_prediction =</span> weight <span class="sc">*</span> (<span class="dv">1</span> <span class="sc">+</span> reps <span class="sc">/</span> <span class="dv">30</span>)</span>
<span id="cb29-1017"><a href="#cb29-1017" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb29-1018"><a href="#cb29-1018" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span></span>
<span id="cb29-1019"><a href="#cb29-1019" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(</span>
<span id="cb29-1020"><a href="#cb29-1020" aria-hidden="true" tabindex="-1"></a>    athletes <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="at">athlete =</span> athlete_id, true_1rm),</span>
<span id="cb29-1021"><a href="#cb29-1021" aria-hidden="true" tabindex="-1"></a>    <span class="at">by =</span> <span class="st">"athlete"</span></span>
<span id="cb29-1022"><a href="#cb29-1022" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb29-1023"><a href="#cb29-1023" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb29-1024"><a href="#cb29-1024" aria-hidden="true" tabindex="-1"></a>    <span class="at">model_error =</span> model_prediction <span class="sc">-</span> true_1rm,</span>
<span id="cb29-1025"><a href="#cb29-1025" aria-hidden="true" tabindex="-1"></a>    <span class="at">standard_epley_error =</span> standard_epley_prediction <span class="sc">-</span> true_1rm,</span>
<span id="cb29-1026"><a href="#cb29-1026" aria-hidden="true" tabindex="-1"></a>    <span class="at">difference =</span> <span class="fu">abs</span>(model_error) <span class="sc">-</span> <span class="fu">abs</span>(standard_epley_error),</span>
<span id="cb29-1027"><a href="#cb29-1027" aria-hidden="true" tabindex="-1"></a>    <span class="at">most_accurate_method =</span> <span class="fu">case_when</span>(</span>
<span id="cb29-1028"><a href="#cb29-1028" aria-hidden="true" tabindex="-1"></a>      <span class="fu">abs</span>(difference) <span class="sc">&lt;=</span> <span class="dv">1</span> <span class="sc">~</span> <span class="st">"Similar predictions (±1)"</span>,</span>
<span id="cb29-1029"><a href="#cb29-1029" aria-hidden="true" tabindex="-1"></a>      difference <span class="sc">&lt;</span> <span class="dv">0</span> <span class="sc">~</span> <span class="fu">paste0</span>(</span>
<span id="cb29-1030"><a href="#cb29-1030" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Model closer by "</span>,</span>
<span id="cb29-1031"><a href="#cb29-1031" aria-hidden="true" tabindex="-1"></a>        <span class="fu">round</span>(<span class="fu">abs</span>(difference), <span class="dv">1</span>),</span>
<span id="cb29-1032"><a href="#cb29-1032" aria-hidden="true" tabindex="-1"></a>        units</span>
<span id="cb29-1033"><a href="#cb29-1033" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb29-1034"><a href="#cb29-1034" aria-hidden="true" tabindex="-1"></a>      difference <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">~</span> <span class="fu">paste0</span>(</span>
<span id="cb29-1035"><a href="#cb29-1035" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Formula closer by "</span>,</span>
<span id="cb29-1036"><a href="#cb29-1036" aria-hidden="true" tabindex="-1"></a>        <span class="fu">round</span>(<span class="fu">abs</span>(difference), <span class="dv">1</span>),</span>
<span id="cb29-1037"><a href="#cb29-1037" aria-hidden="true" tabindex="-1"></a>        units</span>
<span id="cb29-1038"><a href="#cb29-1038" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb29-1039"><a href="#cb29-1039" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb29-1040"><a href="#cb29-1040" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb29-1041"><a href="#cb29-1041" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1042"><a href="#cb29-1042" aria-hidden="true" tabindex="-1"></a>tbl <span class="ot">&lt;-</span> holdout_predictions <span class="sc">|&gt;</span></span>
<span id="cb29-1043"><a href="#cb29-1043" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(</span>
<span id="cb29-1044"><a href="#cb29-1044" aria-hidden="true" tabindex="-1"></a>    athlete,</span>
<span id="cb29-1045"><a href="#cb29-1045" aria-hidden="true" tabindex="-1"></a>    weight,</span>
<span id="cb29-1046"><a href="#cb29-1046" aria-hidden="true" tabindex="-1"></a>    reps,</span>
<span id="cb29-1047"><a href="#cb29-1047" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">True 1RM</span><span class="st">`</span> <span class="ot">=</span> true_1rm,</span>
<span id="cb29-1048"><a href="#cb29-1048" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Model prediction</span><span class="st">`</span> <span class="ot">=</span> model_prediction,</span>
<span id="cb29-1049"><a href="#cb29-1049" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Formula prediction</span><span class="st">`</span> <span class="ot">=</span> standard_epley_prediction,</span>
<span id="cb29-1050"><a href="#cb29-1050" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Most accurate method</span><span class="st">`</span> <span class="ot">=</span> most_accurate_method</span>
<span id="cb29-1051"><a href="#cb29-1051" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb29-1052"><a href="#cb29-1052" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), \(x) <span class="fu">round</span>(x, <span class="dv">1</span>))) <span class="sc">|&gt;</span></span>
<span id="cb29-1053"><a href="#cb29-1053" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span></span>
<span id="cb29-1054"><a href="#cb29-1054" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt_theme_538</span>(<span class="at">quiet =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span></span>
<span id="cb29-1055"><a href="#cb29-1055" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_align</span>(</span>
<span id="cb29-1056"><a href="#cb29-1056" aria-hidden="true" tabindex="-1"></a>    <span class="at">align =</span> <span class="st">"right"</span>,</span>
<span id="cb29-1057"><a href="#cb29-1057" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> <span class="st">`</span><span class="at">Most accurate method</span><span class="st">`</span></span>
<span id="cb29-1058"><a href="#cb29-1058" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb29-1059"><a href="#cb29-1059" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb29-1060"><a href="#cb29-1060" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">cell_fill</span>(<span class="at">color =</span> <span class="st">"#DCFCE7"</span>),</span>
<span id="cb29-1061"><a href="#cb29-1061" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_body</span>(<span class="at">rows =</span> <span class="fu">startsWith</span>(<span class="st">`</span><span class="at">Most accurate method</span><span class="st">`</span>, <span class="st">"Model"</span>))</span>
<span id="cb29-1062"><a href="#cb29-1062" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb29-1063"><a href="#cb29-1063" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb29-1064"><a href="#cb29-1064" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">cell_text</span>(</span>
<span id="cb29-1065"><a href="#cb29-1065" aria-hidden="true" tabindex="-1"></a>      <span class="at">color =</span> colours[<span class="dv">3</span>],</span>
<span id="cb29-1066"><a href="#cb29-1066" aria-hidden="true" tabindex="-1"></a>      <span class="at">weight =</span> <span class="st">"bold"</span></span>
<span id="cb29-1067"><a href="#cb29-1067" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb29-1068"><a href="#cb29-1068" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_body</span>(</span>
<span id="cb29-1069"><a href="#cb29-1069" aria-hidden="true" tabindex="-1"></a>      <span class="at">columns =</span> <span class="st">`</span><span class="at">Most accurate method</span><span class="st">`</span>,</span>
<span id="cb29-1070"><a href="#cb29-1070" aria-hidden="true" tabindex="-1"></a>      <span class="at">rows =</span> <span class="fu">startsWith</span>(<span class="st">`</span><span class="at">Most accurate method</span><span class="st">`</span>, <span class="st">"Model"</span>)</span>
<span id="cb29-1071"><a href="#cb29-1071" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb29-1072"><a href="#cb29-1072" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb29-1073"><a href="#cb29-1073" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb29-1074"><a href="#cb29-1074" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">cell_fill</span>(<span class="at">color =</span> <span class="st">"#DBEAFE"</span>),</span>
<span id="cb29-1075"><a href="#cb29-1075" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_body</span>(<span class="at">rows =</span> <span class="fu">startsWith</span>(<span class="st">`</span><span class="at">Most accurate method</span><span class="st">`</span>, <span class="st">"Formula"</span>))</span>
<span id="cb29-1076"><a href="#cb29-1076" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb29-1077"><a href="#cb29-1077" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb29-1078"><a href="#cb29-1078" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">cell_text</span>(</span>
<span id="cb29-1079"><a href="#cb29-1079" aria-hidden="true" tabindex="-1"></a>      <span class="at">color =</span> <span class="st">"#2563EB"</span>,</span>
<span id="cb29-1080"><a href="#cb29-1080" aria-hidden="true" tabindex="-1"></a>      <span class="at">weight =</span> <span class="st">"bold"</span></span>
<span id="cb29-1081"><a href="#cb29-1081" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb29-1082"><a href="#cb29-1082" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_body</span>(</span>
<span id="cb29-1083"><a href="#cb29-1083" aria-hidden="true" tabindex="-1"></a>      <span class="at">columns =</span> <span class="st">`</span><span class="at">Most accurate method</span><span class="st">`</span>,</span>
<span id="cb29-1084"><a href="#cb29-1084" aria-hidden="true" tabindex="-1"></a>      <span class="at">rows =</span> <span class="fu">startsWith</span>(<span class="st">`</span><span class="at">Most accurate method</span><span class="st">`</span>, <span class="st">"Formula"</span>)</span>
<span id="cb29-1085"><a href="#cb29-1085" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb29-1086"><a href="#cb29-1086" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb29-1087"><a href="#cb29-1087" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_source_note</span>(</span>
<span id="cb29-1088"><a href="#cb29-1088" aria-hidden="true" tabindex="-1"></a>    <span class="at">source_note =</span> <span class="fu">html</span>(socials)</span>
<span id="cb29-1089"><a href="#cb29-1089" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb29-1090"><a href="#cb29-1090" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb29-1091"><a href="#cb29-1091" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">cell_text</span>(<span class="at">align =</span> <span class="st">"right"</span>),</span>
<span id="cb29-1092"><a href="#cb29-1092" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_source_notes</span>()</span>
<span id="cb29-1093"><a href="#cb29-1093" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb29-1094"><a href="#cb29-1094" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_options</span>(</span>
<span id="cb29-1095"><a href="#cb29-1095" aria-hidden="true" tabindex="-1"></a>    <span class="at">source_notes.font.size =</span> <span class="dv">15</span></span>
<span id="cb29-1096"><a href="#cb29-1096" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb29-1097"><a href="#cb29-1097" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1098"><a href="#cb29-1098" aria-hidden="true" tabindex="-1"></a>tbl</span>
<span id="cb29-1099"><a href="#cb29-1099" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb29-1100"><a href="#cb29-1100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1101"><a href="#cb29-1101" aria-hidden="true" tabindex="-1"></a><span class="fu">## ![](/img/python-logo-only.svg){height=30}</span></span>
<span id="cb29-1104"><a href="#cb29-1104" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb29-1105"><a href="#cb29-1105" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb29-1106"><a href="#cb29-1106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1107"><a href="#cb29-1107" aria-hidden="true" tabindex="-1"></a>holdout_with_truth <span class="op">=</span> holdout.join(</span>
<span id="cb29-1108"><a href="#cb29-1108" aria-hidden="true" tabindex="-1"></a>    athletes.select(pl.col(<span class="st">"athlete_id"</span>).alias(<span class="st">"athlete"</span>), <span class="st">"true_1rm"</span>),</span>
<span id="cb29-1109"><a href="#cb29-1109" aria-hidden="true" tabindex="-1"></a>    on<span class="op">=</span><span class="st">"athlete"</span>,</span>
<span id="cb29-1110"><a href="#cb29-1110" aria-hidden="true" tabindex="-1"></a>    how<span class="op">=</span><span class="st">"left"</span>,</span>
<span id="cb29-1111"><a href="#cb29-1111" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-1112"><a href="#cb29-1112" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1113"><a href="#cb29-1113" aria-hidden="true" tabindex="-1"></a><span class="co"># Get predictions for each holdout observation</span></span>
<span id="cb29-1114"><a href="#cb29-1114" aria-hidden="true" tabindex="-1"></a>model_predictions <span class="op">=</span> []</span>
<span id="cb29-1115"><a href="#cb29-1115" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> row <span class="kw">in</span> holdout_with_truth.iter_rows(named<span class="op">=</span><span class="va">True</span>):</span>
<span id="cb29-1116"><a href="#cb29-1116" aria-hidden="true" tabindex="-1"></a>    pred <span class="op">=</span> estimate_1rm(</span>
<span id="cb29-1117"><a href="#cb29-1117" aria-hidden="true" tabindex="-1"></a>        modified_epley_trace,</span>
<span id="cb29-1118"><a href="#cb29-1118" aria-hidden="true" tabindex="-1"></a>        athlete_id<span class="op">=</span>row[<span class="st">"athlete"</span>],</span>
<span id="cb29-1119"><a href="#cb29-1119" aria-hidden="true" tabindex="-1"></a>        weight<span class="op">=</span>row[<span class="st">"weight"</span>],</span>
<span id="cb29-1120"><a href="#cb29-1120" aria-hidden="true" tabindex="-1"></a>        reps<span class="op">=</span>row[<span class="st">"reps"</span>],</span>
<span id="cb29-1121"><a href="#cb29-1121" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb29-1122"><a href="#cb29-1122" aria-hidden="true" tabindex="-1"></a>    model_predictions.append(np.median(pred[<span class="st">"est_1rm"</span>]))</span>
<span id="cb29-1123"><a href="#cb29-1123" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1124"><a href="#cb29-1124" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate standard Epley predictions</span></span>
<span id="cb29-1125"><a href="#cb29-1125" aria-hidden="true" tabindex="-1"></a>holdout_predictions <span class="op">=</span> (</span>
<span id="cb29-1126"><a href="#cb29-1126" aria-hidden="true" tabindex="-1"></a>    holdout_with_truth.with_columns(</span>
<span id="cb29-1127"><a href="#cb29-1127" aria-hidden="true" tabindex="-1"></a>        pl.Series(<span class="st">"Model prediction"</span>, model_predictions),</span>
<span id="cb29-1128"><a href="#cb29-1128" aria-hidden="true" tabindex="-1"></a>        (pl.col(<span class="st">"weight"</span>) <span class="op">*</span> (<span class="dv">1</span> <span class="op">+</span> pl.col(<span class="st">"reps"</span>) <span class="op">/</span> <span class="dv">30</span>)).alias(<span class="st">"Formula prediction"</span>),</span>
<span id="cb29-1129"><a href="#cb29-1129" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb29-1130"><a href="#cb29-1130" aria-hidden="true" tabindex="-1"></a>    .with_columns(</span>
<span id="cb29-1131"><a href="#cb29-1131" aria-hidden="true" tabindex="-1"></a>        (pl.col(<span class="st">"Model prediction"</span>) <span class="op">-</span> pl.col(<span class="st">"true_1rm"</span>)).alias(<span class="st">"model_error"</span>),</span>
<span id="cb29-1132"><a href="#cb29-1132" aria-hidden="true" tabindex="-1"></a>        (pl.col(<span class="st">"Formula prediction"</span>) <span class="op">-</span> pl.col(<span class="st">"true_1rm"</span>)).alias(</span>
<span id="cb29-1133"><a href="#cb29-1133" aria-hidden="true" tabindex="-1"></a>            <span class="st">"standard_epley_error"</span></span>
<span id="cb29-1134"><a href="#cb29-1134" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb29-1135"><a href="#cb29-1135" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb29-1136"><a href="#cb29-1136" aria-hidden="true" tabindex="-1"></a>    .with_columns(</span>
<span id="cb29-1137"><a href="#cb29-1137" aria-hidden="true" tabindex="-1"></a>        (pl.col(<span class="st">"model_error"</span>).<span class="bu">abs</span>() <span class="op">-</span> pl.col(<span class="st">"standard_epley_error"</span>).<span class="bu">abs</span>()).alias(</span>
<span id="cb29-1138"><a href="#cb29-1138" aria-hidden="true" tabindex="-1"></a>            <span class="st">"difference"</span></span>
<span id="cb29-1139"><a href="#cb29-1139" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb29-1140"><a href="#cb29-1140" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb29-1141"><a href="#cb29-1141" aria-hidden="true" tabindex="-1"></a>    .with_columns(</span>
<span id="cb29-1142"><a href="#cb29-1142" aria-hidden="true" tabindex="-1"></a>        pl.when(pl.col(<span class="st">"difference"</span>).<span class="bu">abs</span>() <span class="op">&lt;=</span> <span class="dv">1</span>)</span>
<span id="cb29-1143"><a href="#cb29-1143" aria-hidden="true" tabindex="-1"></a>        .then(pl.lit(<span class="st">"Similar predictions (±1)"</span>))</span>
<span id="cb29-1144"><a href="#cb29-1144" aria-hidden="true" tabindex="-1"></a>        .when(pl.col(<span class="st">"difference"</span>) <span class="op">&lt;</span> <span class="dv">0</span>)</span>
<span id="cb29-1145"><a href="#cb29-1145" aria-hidden="true" tabindex="-1"></a>        .then(</span>
<span id="cb29-1146"><a href="#cb29-1146" aria-hidden="true" tabindex="-1"></a>            pl.lit(<span class="st">"Model closer by "</span>)</span>
<span id="cb29-1147"><a href="#cb29-1147" aria-hidden="true" tabindex="-1"></a>            <span class="op">+</span> (pl.col(<span class="st">"difference"</span>).<span class="bu">abs</span>().<span class="bu">round</span>(<span class="dv">1</span>)).cast(pl.String)</span>
<span id="cb29-1148"><a href="#cb29-1148" aria-hidden="true" tabindex="-1"></a>            <span class="op">+</span> pl.lit(units)</span>
<span id="cb29-1149"><a href="#cb29-1149" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb29-1150"><a href="#cb29-1150" aria-hidden="true" tabindex="-1"></a>        .otherwise(</span>
<span id="cb29-1151"><a href="#cb29-1151" aria-hidden="true" tabindex="-1"></a>            pl.lit(<span class="st">"Formula closer by "</span>)</span>
<span id="cb29-1152"><a href="#cb29-1152" aria-hidden="true" tabindex="-1"></a>            <span class="op">+</span> (pl.col(<span class="st">"difference"</span>).<span class="bu">abs</span>().<span class="bu">round</span>(<span class="dv">1</span>)).cast(pl.String)</span>
<span id="cb29-1153"><a href="#cb29-1153" aria-hidden="true" tabindex="-1"></a>            <span class="op">+</span> pl.lit(units)</span>
<span id="cb29-1154"><a href="#cb29-1154" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb29-1155"><a href="#cb29-1155" aria-hidden="true" tabindex="-1"></a>        .alias(<span class="st">"Most accurate method"</span>)</span>
<span id="cb29-1156"><a href="#cb29-1156" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb29-1157"><a href="#cb29-1157" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-1158"><a href="#cb29-1158" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1159"><a href="#cb29-1159" aria-hidden="true" tabindex="-1"></a>display_df <span class="op">=</span> (</span>
<span id="cb29-1160"><a href="#cb29-1160" aria-hidden="true" tabindex="-1"></a>    holdout_predictions.sort(<span class="st">"athlete"</span>)</span>
<span id="cb29-1161"><a href="#cb29-1161" aria-hidden="true" tabindex="-1"></a>    .select(</span>
<span id="cb29-1162"><a href="#cb29-1162" aria-hidden="true" tabindex="-1"></a>        <span class="st">"athlete"</span>,</span>
<span id="cb29-1163"><a href="#cb29-1163" aria-hidden="true" tabindex="-1"></a>        <span class="st">"weight"</span>,</span>
<span id="cb29-1164"><a href="#cb29-1164" aria-hidden="true" tabindex="-1"></a>        <span class="st">"reps"</span>,</span>
<span id="cb29-1165"><a href="#cb29-1165" aria-hidden="true" tabindex="-1"></a>        pl.col(<span class="st">"true_1rm"</span>).alias(<span class="st">"True 1RM"</span>),</span>
<span id="cb29-1166"><a href="#cb29-1166" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Model prediction"</span>,</span>
<span id="cb29-1167"><a href="#cb29-1167" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Formula prediction"</span>,</span>
<span id="cb29-1168"><a href="#cb29-1168" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Most accurate method"</span>,</span>
<span id="cb29-1169"><a href="#cb29-1169" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb29-1170"><a href="#cb29-1170" aria-hidden="true" tabindex="-1"></a>    .with_columns(cs.by_dtype(pl.Float64).<span class="bu">round</span>(<span class="dv">1</span>))</span>
<span id="cb29-1171"><a href="#cb29-1171" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-1172"><a href="#cb29-1172" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1173"><a href="#cb29-1173" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb29-1174"><a href="#cb29-1174" aria-hidden="true" tabindex="-1"></a>    GT(display_df)</span>
<span id="cb29-1175"><a href="#cb29-1175" aria-hidden="true" tabindex="-1"></a>    .tab_style(</span>
<span id="cb29-1176"><a href="#cb29-1176" aria-hidden="true" tabindex="-1"></a>        style<span class="op">=</span>style.fill(color<span class="op">=</span><span class="st">"#DCFCE7"</span>),</span>
<span id="cb29-1177"><a href="#cb29-1177" aria-hidden="true" tabindex="-1"></a>        locations<span class="op">=</span>loc.body(</span>
<span id="cb29-1178"><a href="#cb29-1178" aria-hidden="true" tabindex="-1"></a>            rows<span class="op">=</span>pl.col(<span class="st">"Most accurate method"</span>).<span class="bu">str</span>.starts_with(<span class="st">"Model"</span>)</span>
<span id="cb29-1179"><a href="#cb29-1179" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb29-1180"><a href="#cb29-1180" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb29-1181"><a href="#cb29-1181" aria-hidden="true" tabindex="-1"></a>    .tab_style(</span>
<span id="cb29-1182"><a href="#cb29-1182" aria-hidden="true" tabindex="-1"></a>        style<span class="op">=</span>style.text(color<span class="op">=</span><span class="st">"#16A34A"</span>, weight<span class="op">=</span><span class="st">"bold"</span>),</span>
<span id="cb29-1183"><a href="#cb29-1183" aria-hidden="true" tabindex="-1"></a>        locations<span class="op">=</span>loc.body(</span>
<span id="cb29-1184"><a href="#cb29-1184" aria-hidden="true" tabindex="-1"></a>            columns<span class="op">=</span><span class="st">"Most accurate method"</span>,</span>
<span id="cb29-1185"><a href="#cb29-1185" aria-hidden="true" tabindex="-1"></a>            rows<span class="op">=</span>pl.col(<span class="st">"Most accurate method"</span>).<span class="bu">str</span>.starts_with(<span class="st">"Model"</span>),</span>
<span id="cb29-1186"><a href="#cb29-1186" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb29-1187"><a href="#cb29-1187" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb29-1188"><a href="#cb29-1188" aria-hidden="true" tabindex="-1"></a>    .tab_style(</span>
<span id="cb29-1189"><a href="#cb29-1189" aria-hidden="true" tabindex="-1"></a>        style<span class="op">=</span>style.fill(color<span class="op">=</span><span class="st">"#DBEAFE"</span>),</span>
<span id="cb29-1190"><a href="#cb29-1190" aria-hidden="true" tabindex="-1"></a>        locations<span class="op">=</span>loc.body(</span>
<span id="cb29-1191"><a href="#cb29-1191" aria-hidden="true" tabindex="-1"></a>            rows<span class="op">=</span>pl.col(<span class="st">"Most accurate method"</span>).<span class="bu">str</span>.starts_with(<span class="st">"Formula"</span>)</span>
<span id="cb29-1192"><a href="#cb29-1192" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb29-1193"><a href="#cb29-1193" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb29-1194"><a href="#cb29-1194" aria-hidden="true" tabindex="-1"></a>    .tab_style(</span>
<span id="cb29-1195"><a href="#cb29-1195" aria-hidden="true" tabindex="-1"></a>        style<span class="op">=</span>style.text(color<span class="op">=</span><span class="st">"#2563EB"</span>, weight<span class="op">=</span><span class="st">"bold"</span>),</span>
<span id="cb29-1196"><a href="#cb29-1196" aria-hidden="true" tabindex="-1"></a>        locations<span class="op">=</span>loc.body(</span>
<span id="cb29-1197"><a href="#cb29-1197" aria-hidden="true" tabindex="-1"></a>            columns<span class="op">=</span><span class="st">"Most accurate method"</span>,</span>
<span id="cb29-1198"><a href="#cb29-1198" aria-hidden="true" tabindex="-1"></a>            rows<span class="op">=</span>pl.col(<span class="st">"Most accurate method"</span>).<span class="bu">str</span>.starts_with(<span class="st">"Formula"</span>),</span>
<span id="cb29-1199"><a href="#cb29-1199" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb29-1200"><a href="#cb29-1200" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb29-1201"><a href="#cb29-1201" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-1202"><a href="#cb29-1202" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb29-1203"><a href="#cb29-1203" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1204"><a href="#cb29-1204" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb29-1205"><a href="#cb29-1205" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1208"><a href="#cb29-1208" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb29-1209"><a href="#cb29-1209" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb29-1210"><a href="#cb29-1210" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1211"><a href="#cb29-1211" aria-hidden="true" tabindex="-1"></a>tbl</span>
<span id="cb29-1212"><a href="#cb29-1212" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb29-1213"><a href="#cb29-1213" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1214"><a href="#cb29-1214" aria-hidden="true" tabindex="-1"></a>Mean absolute error for the model was **`r paste0(round(mean(abs(holdout_predictions$model_error)), 1), units)`**.</span>
<span id="cb29-1215"><a href="#cb29-1215" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1216"><a href="#cb29-1216" aria-hidden="true" tabindex="-1"></a>Mean absolute error for the regular Epley formula was **`r paste0(round(mean(abs(holdout_predictions$standard_epley_error)), 1), units)`**.</span>
<span id="cb29-1217"><a href="#cb29-1217" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1218"><a href="#cb29-1218" aria-hidden="true" tabindex="-1"></a>The model was therefore **`r paste0(round(mean(abs(holdout_predictions$standard_epley_error)) - mean(abs(holdout_predictions$model_error)), 1), units)` more accurate on average** in this small simulated sample.<span class="ot">[^4]</span></span>
<span id="cb29-1219"><a href="#cb29-1219" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1220"><a href="#cb29-1220" aria-hidden="true" tabindex="-1"></a><span class="ot">[^4]: </span>Take with a big grain of salt as it's only an average over <span class="in">`r n_athletes`</span> estimates.</span>
<span id="cb29-1221"><a href="#cb29-1221" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1222"><a href="#cb29-1222" aria-hidden="true" tabindex="-1"></a><span class="fu">## What has the model learned about the athletes?</span></span>
<span id="cb29-1223"><a href="#cb29-1223" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1224"><a href="#cb29-1224" aria-hidden="true" tabindex="-1"></a>::: {.panel-tabset group="language"}</span>
<span id="cb29-1225"><a href="#cb29-1225" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1226"><a href="#cb29-1226" aria-hidden="true" tabindex="-1"></a><span class="fu">## ![](/img/Rlogo.svg){height=25}</span></span>
<span id="cb29-1229"><a href="#cb29-1229" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb29-1230"><a href="#cb29-1230" aria-hidden="true" tabindex="-1"></a>athlete_endurance_summary <span class="ot">&lt;-</span> modified_epley_model_fit <span class="sc">|&gt;</span></span>
<span id="cb29-1231"><a href="#cb29-1231" aria-hidden="true" tabindex="-1"></a>  <span class="fu">spread_draws</span>(b_logk_Intercept, r_athlete__logk[athlete, ]) <span class="sc">|&gt;</span></span>
<span id="cb29-1232"><a href="#cb29-1232" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">endurance_parameter =</span> <span class="fu">exp</span>(b_logk_Intercept <span class="sc">+</span> r_athlete__logk)) <span class="sc">|&gt;</span></span>
<span id="cb29-1233"><a href="#cb29-1233" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(athlete) <span class="sc">|&gt;</span></span>
<span id="cb29-1234"><a href="#cb29-1234" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean_endurance_parameter =</span> <span class="fu">mean</span>(endurance_parameter)) <span class="sc">|&gt;</span></span>
<span id="cb29-1235"><a href="#cb29-1235" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(mean_endurance_parameter)</span>
<span id="cb29-1236"><a href="#cb29-1236" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1237"><a href="#cb29-1237" aria-hidden="true" tabindex="-1"></a><span class="co"># Grab the athletes with the worst, median, and best strength endurance</span></span>
<span id="cb29-1238"><a href="#cb29-1238" aria-hidden="true" tabindex="-1"></a>selected_athletes <span class="ot">&lt;-</span> athlete_endurance_summary <span class="sc">|&gt;</span></span>
<span id="cb29-1239"><a href="#cb29-1239" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">15</span>, <span class="dv">30</span>)) <span class="sc">|&gt;</span></span>
<span id="cb29-1240"><a href="#cb29-1240" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(athlete)</span>
<span id="cb29-1241"><a href="#cb29-1241" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1242"><a href="#cb29-1242" aria-hidden="true" tabindex="-1"></a>athlete_labels <span class="ot">&lt;-</span> athlete_endurance_summary <span class="sc">|&gt;</span></span>
<span id="cb29-1243"><a href="#cb29-1243" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(athlete <span class="sc">%in%</span> selected_athletes) <span class="sc">|&gt;</span></span>
<span id="cb29-1244"><a href="#cb29-1244" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb29-1245"><a href="#cb29-1245" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="fu">paste0</span>(</span>
<span id="cb29-1246"><a href="#cb29-1246" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Athlete "</span>,</span>
<span id="cb29-1247"><a href="#cb29-1247" aria-hidden="true" tabindex="-1"></a>      athlete,</span>
<span id="cb29-1248"><a href="#cb29-1248" aria-hidden="true" tabindex="-1"></a>      <span class="st">" (endurance parameter = "</span>,</span>
<span id="cb29-1249"><a href="#cb29-1249" aria-hidden="true" tabindex="-1"></a>      <span class="fu">round</span>(mean_endurance_parameter, <span class="dv">0</span>),</span>
<span id="cb29-1250"><a href="#cb29-1250" aria-hidden="true" tabindex="-1"></a>      <span class="st">")"</span></span>
<span id="cb29-1251"><a href="#cb29-1251" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb29-1252"><a href="#cb29-1252" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb29-1253"><a href="#cb29-1253" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1254"><a href="#cb29-1254" aria-hidden="true" tabindex="-1"></a>endurance_profiles <span class="ot">&lt;-</span> modified_epley_model_fit <span class="sc">|&gt;</span></span>
<span id="cb29-1255"><a href="#cb29-1255" aria-hidden="true" tabindex="-1"></a>  <span class="fu">spread_draws</span>(</span>
<span id="cb29-1256"><a href="#cb29-1256" aria-hidden="true" tabindex="-1"></a>    b_orm_Intercept,</span>
<span id="cb29-1257"><a href="#cb29-1257" aria-hidden="true" tabindex="-1"></a>    b_logk_Intercept,</span>
<span id="cb29-1258"><a href="#cb29-1258" aria-hidden="true" tabindex="-1"></a>    r_athlete__orm[athlete, ],</span>
<span id="cb29-1259"><a href="#cb29-1259" aria-hidden="true" tabindex="-1"></a>    r_athlete__logk[athlete, ]</span>
<span id="cb29-1260"><a href="#cb29-1260" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb29-1261"><a href="#cb29-1261" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(athlete <span class="sc">%in%</span> selected_athletes) <span class="sc">|&gt;</span></span>
<span id="cb29-1262"><a href="#cb29-1262" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb29-1263"><a href="#cb29-1263" aria-hidden="true" tabindex="-1"></a>    <span class="at">est_1RM =</span> b_orm_Intercept <span class="sc">+</span> r_athlete__orm,</span>
<span id="cb29-1264"><a href="#cb29-1264" aria-hidden="true" tabindex="-1"></a>    <span class="at">endurance_parameter =</span> <span class="fu">exp</span>(b_logk_Intercept <span class="sc">+</span> r_athlete__logk),</span>
<span id="cb29-1265"><a href="#cb29-1265" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb29-1266"><a href="#cb29-1266" aria-hidden="true" tabindex="-1"></a>  <span class="fu">crossing</span>(<span class="at">reps =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">15</span>) <span class="sc">|&gt;</span></span>
<span id="cb29-1267"><a href="#cb29-1267" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pct_est_1RM =</span> <span class="dv">100</span> <span class="sc">/</span> (<span class="dv">1</span> <span class="sc">+</span> reps <span class="sc">/</span> endurance_parameter)) <span class="sc">|&gt;</span></span>
<span id="cb29-1268"><a href="#cb29-1268" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(athlete, reps) <span class="sc">|&gt;</span></span>
<span id="cb29-1269"><a href="#cb29-1269" aria-hidden="true" tabindex="-1"></a>  <span class="fu">median_qi</span>(pct_est_1RM, <span class="at">.width =</span> <span class="fl">0.8</span>) <span class="sc">|&gt;</span></span>
<span id="cb29-1270"><a href="#cb29-1270" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(athlete_labels, <span class="at">by =</span> <span class="st">"athlete"</span>)</span>
<span id="cb29-1271"><a href="#cb29-1271" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb29-1272"><a href="#cb29-1272" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1273"><a href="#cb29-1273" aria-hidden="true" tabindex="-1"></a><span class="fu">## ![](/img/python-logo-only.svg){height=30}</span></span>
<span id="cb29-1276"><a href="#cb29-1276" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb29-1277"><a href="#cb29-1277" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb29-1278"><a href="#cb29-1278" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1279"><a href="#cb29-1279" aria-hidden="true" tabindex="-1"></a>logk_athlete <span class="op">=</span> modified_epley_trace.posterior[<span class="st">"logk_athlete"</span>].values.reshape(</span>
<span id="cb29-1280"><a href="#cb29-1280" aria-hidden="true" tabindex="-1"></a>    <span class="op">-</span><span class="dv">1</span>, n_athletes</span>
<span id="cb29-1281"><a href="#cb29-1281" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-1282"><a href="#cb29-1282" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1283"><a href="#cb29-1283" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate mean endurance parameter for each athlete</span></span>
<span id="cb29-1284"><a href="#cb29-1284" aria-hidden="true" tabindex="-1"></a>mean_endurance <span class="op">=</span> np.exp(logk_athlete.mean(axis<span class="op">=</span><span class="dv">0</span>))</span>
<span id="cb29-1285"><a href="#cb29-1285" aria-hidden="true" tabindex="-1"></a>athlete_endurance_summary <span class="op">=</span> pl.DataFrame(</span>
<span id="cb29-1286"><a href="#cb29-1286" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb29-1287"><a href="#cb29-1287" aria-hidden="true" tabindex="-1"></a>        <span class="st">"athlete"</span>: athlete_codes,</span>
<span id="cb29-1288"><a href="#cb29-1288" aria-hidden="true" tabindex="-1"></a>        <span class="st">"mean_endurance_parameter"</span>: mean_endurance,</span>
<span id="cb29-1289"><a href="#cb29-1289" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb29-1290"><a href="#cb29-1290" aria-hidden="true" tabindex="-1"></a>).sort(<span class="st">"mean_endurance_parameter"</span>)</span>
<span id="cb29-1291"><a href="#cb29-1291" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1292"><a href="#cb29-1292" aria-hidden="true" tabindex="-1"></a><span class="co"># Select athletes with worst, median, and best endurance</span></span>
<span id="cb29-1293"><a href="#cb29-1293" aria-hidden="true" tabindex="-1"></a>selected_athletes <span class="op">=</span> (</span>
<span id="cb29-1294"><a href="#cb29-1294" aria-hidden="true" tabindex="-1"></a>    athlete_endurance_summary.row(<span class="dv">1</span>),</span>
<span id="cb29-1295"><a href="#cb29-1295" aria-hidden="true" tabindex="-1"></a>    athlete_endurance_summary.row(<span class="dv">14</span>),</span>
<span id="cb29-1296"><a href="#cb29-1296" aria-hidden="true" tabindex="-1"></a>    athlete_endurance_summary.row(<span class="dv">29</span>),</span>
<span id="cb29-1297"><a href="#cb29-1297" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-1298"><a href="#cb29-1298" aria-hidden="true" tabindex="-1"></a>selected_athlete_ids <span class="op">=</span> [row[<span class="dv">0</span>] <span class="cf">for</span> row <span class="kw">in</span> selected_athletes]</span>
<span id="cb29-1299"><a href="#cb29-1299" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1300"><a href="#cb29-1300" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate endurance profiles across rep range</span></span>
<span id="cb29-1301"><a href="#cb29-1301" aria-hidden="true" tabindex="-1"></a>reps_range <span class="op">=</span> np.arange(<span class="dv">1</span>, <span class="dv">16</span>)</span>
<span id="cb29-1302"><a href="#cb29-1302" aria-hidden="true" tabindex="-1"></a>profiles <span class="op">=</span> []</span>
<span id="cb29-1303"><a href="#cb29-1303" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1304"><a href="#cb29-1304" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> athlete_id <span class="kw">in</span> selected_athlete_ids:</span>
<span id="cb29-1305"><a href="#cb29-1305" aria-hidden="true" tabindex="-1"></a>    athlete_idx <span class="op">=</span> np.where(athlete_codes <span class="op">==</span> athlete_id)[<span class="dv">0</span>][<span class="dv">0</span>]</span>
<span id="cb29-1306"><a href="#cb29-1306" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1307"><a href="#cb29-1307" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Get posterior samples for this athlete (no need to add logk_mu)</span></span>
<span id="cb29-1308"><a href="#cb29-1308" aria-hidden="true" tabindex="-1"></a>    logk_samples <span class="op">=</span> logk_athlete[:, athlete_idx]</span>
<span id="cb29-1309"><a href="#cb29-1309" aria-hidden="true" tabindex="-1"></a>    endurance_samples <span class="op">=</span> np.exp(logk_samples)</span>
<span id="cb29-1310"><a href="#cb29-1310" aria-hidden="true" tabindex="-1"></a>    mean_endurance_param <span class="op">=</span> endurance_samples.mean()</span>
<span id="cb29-1311"><a href="#cb29-1311" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1312"><a href="#cb29-1312" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> reps <span class="kw">in</span> reps_range:</span>
<span id="cb29-1313"><a href="#cb29-1313" aria-hidden="true" tabindex="-1"></a>        pct_1rm_samples <span class="op">=</span> <span class="dv">100</span> <span class="op">/</span> (<span class="dv">1</span> <span class="op">+</span> reps <span class="op">/</span> endurance_samples)</span>
<span id="cb29-1314"><a href="#cb29-1314" aria-hidden="true" tabindex="-1"></a>        profiles.append(</span>
<span id="cb29-1315"><a href="#cb29-1315" aria-hidden="true" tabindex="-1"></a>            {</span>
<span id="cb29-1316"><a href="#cb29-1316" aria-hidden="true" tabindex="-1"></a>                <span class="st">"athlete"</span>: athlete_id,</span>
<span id="cb29-1317"><a href="#cb29-1317" aria-hidden="true" tabindex="-1"></a>                <span class="st">"reps"</span>: reps,</span>
<span id="cb29-1318"><a href="#cb29-1318" aria-hidden="true" tabindex="-1"></a>                <span class="st">"pct_est_1RM"</span>: np.median(pct_1rm_samples),</span>
<span id="cb29-1319"><a href="#cb29-1319" aria-hidden="true" tabindex="-1"></a>                <span class="st">"lower"</span>: np.percentile(pct_1rm_samples, <span class="dv">10</span>),</span>
<span id="cb29-1320"><a href="#cb29-1320" aria-hidden="true" tabindex="-1"></a>                <span class="st">"upper"</span>: np.percentile(pct_1rm_samples, <span class="dv">90</span>),</span>
<span id="cb29-1321"><a href="#cb29-1321" aria-hidden="true" tabindex="-1"></a>                <span class="st">"endurance_param"</span>: <span class="bu">round</span>(mean_endurance_param),</span>
<span id="cb29-1322"><a href="#cb29-1322" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb29-1323"><a href="#cb29-1323" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb29-1324"><a href="#cb29-1324" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1325"><a href="#cb29-1325" aria-hidden="true" tabindex="-1"></a>endurance_profiles <span class="op">=</span> pd.DataFrame(profiles)</span>
<span id="cb29-1326"><a href="#cb29-1326" aria-hidden="true" tabindex="-1"></a>endurance_profiles[<span class="st">"label"</span>] <span class="op">=</span> endurance_profiles.<span class="bu">apply</span>(</span>
<span id="cb29-1327"><a href="#cb29-1327" aria-hidden="true" tabindex="-1"></a>    <span class="kw">lambda</span> row: <span class="ss">f"Athlete </span><span class="sc">{</span><span class="bu">int</span>(row[<span class="st">'athlete'</span>])<span class="sc">}</span><span class="ss"> (endurance = </span><span class="sc">{</span><span class="bu">int</span>(row[<span class="st">'endurance_param'</span>])<span class="sc">}</span><span class="ss">)"</span>,</span>
<span id="cb29-1328"><a href="#cb29-1328" aria-hidden="true" tabindex="-1"></a>    axis<span class="op">=</span><span class="dv">1</span>,</span>
<span id="cb29-1329"><a href="#cb29-1329" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-1330"><a href="#cb29-1330" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb29-1331"><a href="#cb29-1331" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1332"><a href="#cb29-1332" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb29-1333"><a href="#cb29-1333" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1334"><a href="#cb29-1334" aria-hidden="true" tabindex="-1"></a>To demonstrate this point, I'll just show three athletes: the highest endurance (Athlete <span class="in">`r selected_athletes[3]`</span>), the lowest endurance (Athlete <span class="in">`r selected_athletes[1]`</span>), and one in the middle (Athlete <span class="in">`r selected_athletes[2]`</span>).</span>
<span id="cb29-1335"><a href="#cb29-1335" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1336"><a href="#cb29-1336" aria-hidden="true" tabindex="-1"></a>See how each of their endurance parameters (that the model learned from their past training data) changes their 1RM estimate curve to be tailored to their traits.</span>
<span id="cb29-1337"><a href="#cb29-1337" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1338"><a href="#cb29-1338" aria-hidden="true" tabindex="-1"></a>::: {.panel-tabset group="language"}</span>
<span id="cb29-1339"><a href="#cb29-1339" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1340"><a href="#cb29-1340" aria-hidden="true" tabindex="-1"></a><span class="fu">## ![](/img/Rlogo.svg){height=25}</span></span>
<span id="cb29-1343"><a href="#cb29-1343" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb29-1344"><a href="#cb29-1344" aria-hidden="true" tabindex="-1"></a><span class="co">#| output: false</span></span>
<span id="cb29-1345"><a href="#cb29-1345" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1346"><a href="#cb29-1346" aria-hidden="true" tabindex="-1"></a>predicted_curves_plot <span class="ot">&lt;-</span> endurance_profiles <span class="sc">|&gt;</span></span>
<span id="cb29-1347"><a href="#cb29-1347" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb29-1348"><a href="#cb29-1348" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x =</span> reps, <span class="at">y =</span> pct_est_1RM, <span class="at">colour =</span> label, <span class="at">fill =</span> label)</span>
<span id="cb29-1349"><a href="#cb29-1349" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb29-1350"><a href="#cb29-1350" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_ribbon</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> .lower, <span class="at">ymax =</span> .upper), <span class="at">alpha =</span> <span class="fl">0.15</span>, <span class="at">colour =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb29-1351"><a href="#cb29-1351" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_textline</span>(</span>
<span id="cb29-1352"><a href="#cb29-1352" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">label =</span> label),</span>
<span id="cb29-1353"><a href="#cb29-1353" aria-hidden="true" tabindex="-1"></a>    <span class="at">hjust =</span> <span class="fl">0.8</span>,</span>
<span id="cb29-1354"><a href="#cb29-1354" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">5</span>,</span>
<span id="cb29-1355"><a href="#cb29-1355" aria-hidden="true" tabindex="-1"></a>    <span class="at">family =</span> <span class="st">"Myriad Pro Regular"</span></span>
<span id="cb29-1356"><a href="#cb29-1356" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb29-1357"><a href="#cb29-1357" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="fu">label_percent</span>(<span class="at">scale =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb29-1358"><a href="#cb29-1358" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">15</span>), <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">15</span>, <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb29-1359"><a href="#cb29-1359" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(colours[<span class="dv">3</span>], colours[<span class="dv">1</span>], colours[<span class="dv">2</span>])) <span class="sc">+</span></span>
<span id="cb29-1360"><a href="#cb29-1360" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(colours[<span class="dv">3</span>], colours[<span class="dv">1</span>], colours[<span class="dv">2</span>])) <span class="sc">+</span></span>
<span id="cb29-1361"><a href="#cb29-1361" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb29-1362"><a href="#cb29-1362" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Repetitions"</span>,</span>
<span id="cb29-1363"><a href="#cb29-1363" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Athletes with lower endurance fatigue faster"</span>,</span>
<span id="cb29-1364"><a href="#cb29-1364" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"% of 1RM"</span>,</span>
<span id="cb29-1365"><a href="#cb29-1365" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> socials,</span>
<span id="cb29-1366"><a href="#cb29-1366" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="cn">NULL</span></span>
<span id="cb29-1367"><a href="#cb29-1367" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb29-1368"><a href="#cb29-1368" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb29-1369"><a href="#cb29-1369" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1370"><a href="#cb29-1370" aria-hidden="true" tabindex="-1"></a>predicted_curves_plot</span>
<span id="cb29-1371"><a href="#cb29-1371" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb29-1372"><a href="#cb29-1372" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1373"><a href="#cb29-1373" aria-hidden="true" tabindex="-1"></a><span class="fu">## ![](/img/python-logo-only.svg){height=30}</span></span>
<span id="cb29-1376"><a href="#cb29-1376" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb29-1377"><a href="#cb29-1377" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb29-1378"><a href="#cb29-1378" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1379"><a href="#cb29-1379" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb29-1380"><a href="#cb29-1380" aria-hidden="true" tabindex="-1"></a>    ggplot(</span>
<span id="cb29-1381"><a href="#cb29-1381" aria-hidden="true" tabindex="-1"></a>        endurance_profiles, aes(x<span class="op">=</span><span class="st">"reps"</span>, y<span class="op">=</span><span class="st">"pct_est_1RM"</span>, colour<span class="op">=</span><span class="st">"label"</span>, fill<span class="op">=</span><span class="st">"label"</span>)</span>
<span id="cb29-1382"><a href="#cb29-1382" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb29-1383"><a href="#cb29-1383" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> geom_ribbon(aes(ymin<span class="op">=</span><span class="st">"lower"</span>, ymax<span class="op">=</span><span class="st">"upper"</span>), alpha<span class="op">=</span><span class="fl">0.15</span>, linetype<span class="op">=</span><span class="st">"None"</span>)</span>
<span id="cb29-1384"><a href="#cb29-1384" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> geom_line(size<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb29-1385"><a href="#cb29-1385" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> scale_y_continuous(labels<span class="op">=</span><span class="kw">lambda</span> x: [<span class="ss">f"</span><span class="sc">{</span>v<span class="sc">:.0f}</span><span class="ss">%"</span> <span class="cf">for</span> v <span class="kw">in</span> x])</span>
<span id="cb29-1386"><a href="#cb29-1386" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> scale_x_continuous(limits<span class="op">=</span>(<span class="dv">1</span>, <span class="dv">15</span>), breaks<span class="op">=</span><span class="bu">range</span>(<span class="dv">1</span>, <span class="dv">16</span>))</span>
<span id="cb29-1387"><a href="#cb29-1387" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> scale_colour_manual(values<span class="op">=</span>[colours[<span class="dv">2</span>], colours[<span class="dv">0</span>], colours[<span class="dv">1</span>]])</span>
<span id="cb29-1388"><a href="#cb29-1388" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> scale_fill_manual(values<span class="op">=</span>[colours[<span class="dv">2</span>], colours[<span class="dv">0</span>], colours[<span class="dv">1</span>]])</span>
<span id="cb29-1389"><a href="#cb29-1389" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> labs(</span>
<span id="cb29-1390"><a href="#cb29-1390" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span><span class="st">"Repetitions"</span>,</span>
<span id="cb29-1391"><a href="#cb29-1391" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb29-1392"><a href="#cb29-1392" aria-hidden="true" tabindex="-1"></a>        title<span class="op">=</span><span class="st">"Athletes with lower endurance fatigue faster"</span>,</span>
<span id="cb29-1393"><a href="#cb29-1393" aria-hidden="true" tabindex="-1"></a>        subtitle<span class="op">=</span><span class="st">"</span><span class="sc">% o</span><span class="st">f 1RM"</span>,</span>
<span id="cb29-1394"><a href="#cb29-1394" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb29-1395"><a href="#cb29-1395" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> theme_classic()</span>
<span id="cb29-1396"><a href="#cb29-1396" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> theme(</span>
<span id="cb29-1397"><a href="#cb29-1397" aria-hidden="true" tabindex="-1"></a>        legend_position<span class="op">=</span><span class="st">"bottom"</span>,</span>
<span id="cb29-1398"><a href="#cb29-1398" aria-hidden="true" tabindex="-1"></a>        legend_title<span class="op">=</span>element_blank(),</span>
<span id="cb29-1399"><a href="#cb29-1399" aria-hidden="true" tabindex="-1"></a>        plot_title<span class="op">=</span>element_text(weight<span class="op">=</span><span class="st">"bold"</span>),</span>
<span id="cb29-1400"><a href="#cb29-1400" aria-hidden="true" tabindex="-1"></a>        plot_subtitle<span class="op">=</span>element_text(color<span class="op">=</span><span class="st">"grey"</span>),</span>
<span id="cb29-1401"><a href="#cb29-1401" aria-hidden="true" tabindex="-1"></a>        axis_title_y<span class="op">=</span>element_blank(),</span>
<span id="cb29-1402"><a href="#cb29-1402" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb29-1403"><a href="#cb29-1403" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-1404"><a href="#cb29-1404" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb29-1405"><a href="#cb29-1405" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1406"><a href="#cb29-1406" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb29-1407"><a href="#cb29-1407" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1410"><a href="#cb29-1410" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb29-1411"><a href="#cb29-1411" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb29-1412"><a href="#cb29-1412" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1413"><a href="#cb29-1413" aria-hidden="true" tabindex="-1"></a>predicted_curves_plot</span>
<span id="cb29-1414"><a href="#cb29-1414" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb29-1415"><a href="#cb29-1415" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1416"><a href="#cb29-1416" aria-hidden="true" tabindex="-1"></a><span class="fu">## How much does having historical training data help?</span></span>
<span id="cb29-1417"><a href="#cb29-1417" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1418"><a href="#cb29-1418" aria-hidden="true" tabindex="-1"></a>When the model has more information to estimate a 1RM, it can typically afford to give a more confident estimate.<span class="ot">[^5]</span> Humans do this instinctively; we're skeptical at first but grow confident after observing things repeatedly.</span>
<span id="cb29-1419"><a href="#cb29-1419" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1420"><a href="#cb29-1420" aria-hidden="true" tabindex="-1"></a><span class="ot">[^5]: </span>Although more data doesn't always mean a more certain estimate, sometimes it's just more certain that the athlete is inherently variable.</span>
<span id="cb29-1421"><a href="#cb29-1421" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1422"><a href="#cb29-1422" aria-hidden="true" tabindex="-1"></a>To demonstrate, here's four athletes' estimates after hypothetically performing a max reps set of 8 \@ 100<span class="in">`r units`</span>, each with a different amount of historical data used to train the model.</span>
<span id="cb29-1423"><a href="#cb29-1423" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1424"><a href="#cb29-1424" aria-hidden="true" tabindex="-1"></a>Notice how the shape of the 1RM estimate distribution becomes taller and thinner or wider and flatter as the amount of historical data changes. These shapes represent the level of certainty in the 1RM estimate and incorporate all sources of performance variability in the training data.</span>
<span id="cb29-1425"><a href="#cb29-1425" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1426"><a href="#cb29-1426" aria-hidden="true" tabindex="-1"></a>::: {.panel-tabset group="language"}</span>
<span id="cb29-1427"><a href="#cb29-1427" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1428"><a href="#cb29-1428" aria-hidden="true" tabindex="-1"></a><span class="fu">## ![](/img/Rlogo.svg){height=25}</span></span>
<span id="cb29-1431"><a href="#cb29-1431" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb29-1432"><a href="#cb29-1432" aria-hidden="true" tabindex="-1"></a><span class="co">#| output: false</span></span>
<span id="cb29-1433"><a href="#cb29-1433" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1434"><a href="#cb29-1434" aria-hidden="true" tabindex="-1"></a>athletes_varying_obs <span class="ot">&lt;-</span> train <span class="sc">|&gt;</span></span>
<span id="cb29-1435"><a href="#cb29-1435" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(athlete, <span class="at">name =</span> <span class="st">"n_obs"</span>) <span class="sc">|&gt;</span></span>
<span id="cb29-1436"><a href="#cb29-1436" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(n_obs) <span class="sc">|&gt;</span></span>
<span id="cb29-1437"><a href="#cb29-1437" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">30</span>, <span class="at">by =</span> <span class="dv">9</span>))</span>
<span id="cb29-1438"><a href="#cb29-1438" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1439"><a href="#cb29-1439" aria-hidden="true" tabindex="-1"></a>data_varying_obs <span class="ot">&lt;-</span> athletes_varying_obs <span class="sc">|&gt;</span></span>
<span id="cb29-1440"><a href="#cb29-1440" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb29-1441"><a href="#cb29-1441" aria-hidden="true" tabindex="-1"></a>    <span class="at">estimate =</span> <span class="fu">map</span>(</span>
<span id="cb29-1442"><a href="#cb29-1442" aria-hidden="true" tabindex="-1"></a>      athlete,</span>
<span id="cb29-1443"><a href="#cb29-1443" aria-hidden="true" tabindex="-1"></a>      \(x) <span class="fu">estimate_1rm</span>(modified_epley_model_fit, x, <span class="dv">100</span>, <span class="dv">8</span>)</span>
<span id="cb29-1444"><a href="#cb29-1444" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb29-1445"><a href="#cb29-1445" aria-hidden="true" tabindex="-1"></a>    <span class="at">athlete =</span> <span class="fu">factor</span>(</span>
<span id="cb29-1446"><a href="#cb29-1446" aria-hidden="true" tabindex="-1"></a>      athlete,</span>
<span id="cb29-1447"><a href="#cb29-1447" aria-hidden="true" tabindex="-1"></a>      <span class="at">levels =</span> <span class="fu">rev</span>(athletes_varying_obs<span class="sc">$</span>athlete),</span>
<span id="cb29-1448"><a href="#cb29-1448" aria-hidden="true" tabindex="-1"></a>      <span class="at">labels =</span> <span class="fu">paste0</span>(</span>
<span id="cb29-1449"><a href="#cb29-1449" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Athlete "</span>,</span>
<span id="cb29-1450"><a href="#cb29-1450" aria-hidden="true" tabindex="-1"></a>        <span class="fu">rev</span>(athletes_varying_obs<span class="sc">$</span>athlete),</span>
<span id="cb29-1451"><a href="#cb29-1451" aria-hidden="true" tabindex="-1"></a>        <span class="st">"&lt;br&gt;&lt;span style='color:grey50; font-size:11pt;'&gt;("</span>,</span>
<span id="cb29-1452"><a href="#cb29-1452" aria-hidden="true" tabindex="-1"></a>        <span class="fu">rev</span>(n_obs),</span>
<span id="cb29-1453"><a href="#cb29-1453" aria-hidden="true" tabindex="-1"></a>        <span class="st">" sets of historical data)&lt;/span&gt;"</span></span>
<span id="cb29-1454"><a href="#cb29-1454" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb29-1455"><a href="#cb29-1455" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb29-1456"><a href="#cb29-1456" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb29-1457"><a href="#cb29-1457" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">athlete_id =</span> athlete) <span class="sc">|&gt;</span></span>
<span id="cb29-1458"><a href="#cb29-1458" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(estimate)</span>
<span id="cb29-1459"><a href="#cb29-1459" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1460"><a href="#cb29-1460" aria-hidden="true" tabindex="-1"></a>annotations <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb29-1461"><a href="#cb29-1461" aria-hidden="true" tabindex="-1"></a>  <span class="at">athlete_id =</span> <span class="fu">c</span>(</span>
<span id="cb29-1462"><a href="#cb29-1462" aria-hidden="true" tabindex="-1"></a>    data_varying_obs <span class="sc">|&gt;</span></span>
<span id="cb29-1463"><a href="#cb29-1463" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(n_obs <span class="sc">==</span> <span class="fu">max</span>(n_obs)) <span class="sc">|&gt;</span></span>
<span id="cb29-1464"><a href="#cb29-1464" aria-hidden="true" tabindex="-1"></a>      <span class="fu">pull</span>(athlete_id) <span class="sc">|&gt;</span></span>
<span id="cb29-1465"><a href="#cb29-1465" aria-hidden="true" tabindex="-1"></a>      <span class="fu">unique</span>(),</span>
<span id="cb29-1466"><a href="#cb29-1466" aria-hidden="true" tabindex="-1"></a>    data_varying_obs <span class="sc">|&gt;</span></span>
<span id="cb29-1467"><a href="#cb29-1467" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(n_obs <span class="sc">==</span> <span class="fu">min</span>(n_obs)) <span class="sc">|&gt;</span></span>
<span id="cb29-1468"><a href="#cb29-1468" aria-hidden="true" tabindex="-1"></a>      <span class="fu">pull</span>(athlete_id) <span class="sc">|&gt;</span></span>
<span id="cb29-1469"><a href="#cb29-1469" aria-hidden="true" tabindex="-1"></a>      <span class="fu">unique</span>()</span>
<span id="cb29-1470"><a href="#cb29-1470" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb29-1471"><a href="#cb29-1471" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="fu">c</span>(<span class="fl">130.5</span>, <span class="fl">130.5</span>),</span>
<span id="cb29-1472"><a href="#cb29-1472" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> <span class="fu">c</span>(<span class="fl">0.4</span>, <span class="fl">0.4</span>),</span>
<span id="cb29-1473"><a href="#cb29-1473" aria-hidden="true" tabindex="-1"></a>  <span class="at">label =</span> <span class="fu">c</span>(</span>
<span id="cb29-1474"><a href="#cb29-1474" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste0</span>(</span>
<span id="cb29-1475"><a href="#cb29-1475" aria-hidden="true" tabindex="-1"></a>      <span class="st">"More data → narrower distribution&lt;br&gt;"</span>,</span>
<span id="cb29-1476"><a href="#cb29-1476" aria-hidden="true" tabindex="-1"></a>      <span class="fu">max</span>(data_varying_obs<span class="sc">$</span>n_obs),</span>
<span id="cb29-1477"><a href="#cb29-1477" aria-hidden="true" tabindex="-1"></a>      <span class="st">" sets gives high confidence"</span></span>
<span id="cb29-1478"><a href="#cb29-1478" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb29-1479"><a href="#cb29-1479" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste0</span>(</span>
<span id="cb29-1480"><a href="#cb29-1480" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Less data → wider distribution&lt;br&gt;Only "</span>,</span>
<span id="cb29-1481"><a href="#cb29-1481" aria-hidden="true" tabindex="-1"></a>      <span class="fu">min</span>(data_varying_obs<span class="sc">$</span>n_obs),</span>
<span id="cb29-1482"><a href="#cb29-1482" aria-hidden="true" tabindex="-1"></a>      <span class="st">" sets means more uncertainty"</span></span>
<span id="cb29-1483"><a href="#cb29-1483" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb29-1484"><a href="#cb29-1484" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb29-1485"><a href="#cb29-1485" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-1486"><a href="#cb29-1486" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1487"><a href="#cb29-1487" aria-hidden="true" tabindex="-1"></a>historical_data_plot <span class="ot">&lt;-</span> data_varying_obs <span class="sc">|&gt;</span></span>
<span id="cb29-1488"><a href="#cb29-1488" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> est_1RM)) <span class="sc">+</span></span>
<span id="cb29-1489"><a href="#cb29-1489" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>athlete_id, <span class="at">ncol =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb29-1490"><a href="#cb29-1490" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_slab</span>(<span class="at">fill =</span> <span class="fu">lighten</span>(colours[<span class="dv">2</span>], <span class="fl">0.75</span>)) <span class="sc">+</span></span>
<span id="cb29-1491"><a href="#cb29-1491" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_spike</span>(<span class="at">at =</span> <span class="st">"median"</span>, <span class="at">size =</span> <span class="dv">0</span>, <span class="at">colour =</span> colours[<span class="dv">2</span>]) <span class="sc">+</span></span>
<span id="cb29-1492"><a href="#cb29-1492" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_thickness_shared</span>() <span class="sc">+</span></span>
<span id="cb29-1493"><a href="#cb29-1493" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">colour =</span> <span class="st">"grey50"</span>, <span class="at">linewidth =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb29-1494"><a href="#cb29-1494" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_richtext</span>(</span>
<span id="cb29-1495"><a href="#cb29-1495" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> annotations,</span>
<span id="cb29-1496"><a href="#cb29-1496" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">label =</span> label),</span>
<span id="cb29-1497"><a href="#cb29-1497" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="cn">NA</span>,</span>
<span id="cb29-1498"><a href="#cb29-1498" aria-hidden="true" tabindex="-1"></a>    <span class="at">colour =</span> <span class="st">"grey35"</span>,</span>
<span id="cb29-1499"><a href="#cb29-1499" aria-hidden="true" tabindex="-1"></a>    <span class="at">hjust =</span> <span class="fl">0.5</span>,</span>
<span id="cb29-1500"><a href="#cb29-1500" aria-hidden="true" tabindex="-1"></a>    <span class="at">label.color =</span> <span class="cn">NA</span>,</span>
<span id="cb29-1501"><a href="#cb29-1501" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">4</span>,</span>
<span id="cb29-1502"><a href="#cb29-1502" aria-hidden="true" tabindex="-1"></a>    <span class="at">family =</span> <span class="st">"Myriad Pro Regular"</span></span>
<span id="cb29-1503"><a href="#cb29-1503" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb29-1504"><a href="#cb29-1504" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(</span>
<span id="cb29-1505"><a href="#cb29-1505" aria-hidden="true" tabindex="-1"></a>    <span class="at">labels =</span> <span class="fu">label_number</span>(<span class="at">suffix =</span> units),</span>
<span id="cb29-1506"><a href="#cb29-1506" aria-hidden="true" tabindex="-1"></a>    <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">117</span>, <span class="dv">133</span>)</span>
<span id="cb29-1507"><a href="#cb29-1507" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb29-1508"><a href="#cb29-1508" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb29-1509"><a href="#cb29-1509" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="cn">NULL</span>,</span>
<span id="cb29-1510"><a href="#cb29-1510" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Estimated 1RM"</span>,</span>
<span id="cb29-1511"><a href="#cb29-1511" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"1RM estimates with more data are usually more confident"</span>,</span>
<span id="cb29-1512"><a href="#cb29-1512" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> socials</span>
<span id="cb29-1513"><a href="#cb29-1513" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb29-1514"><a href="#cb29-1514" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">expand =</span> <span class="fu">expansion</span>(<span class="at">mult =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.05</span>))) <span class="sc">+</span></span>
<span id="cb29-1515"><a href="#cb29-1515" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb29-1516"><a href="#cb29-1516" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb29-1517"><a href="#cb29-1517" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb29-1518"><a href="#cb29-1518" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.line =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb29-1519"><a href="#cb29-1519" aria-hidden="true" tabindex="-1"></a>    <span class="at">strip.background =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb29-1520"><a href="#cb29-1520" aria-hidden="true" tabindex="-1"></a>    <span class="at">strip.text =</span> <span class="fu">element_markdown</span>(<span class="at">family =</span> <span class="st">"Myriad Pro Regular"</span>, <span class="at">hjust =</span> <span class="dv">0</span>)</span>
<span id="cb29-1521"><a href="#cb29-1521" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb29-1522"><a href="#cb29-1522" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1523"><a href="#cb29-1523" aria-hidden="true" tabindex="-1"></a>historical_data_plot</span>
<span id="cb29-1524"><a href="#cb29-1524" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb29-1525"><a href="#cb29-1525" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1526"><a href="#cb29-1526" aria-hidden="true" tabindex="-1"></a><span class="fu">## ![](/img/python-logo-only.svg){height=30}</span></span>
<span id="cb29-1529"><a href="#cb29-1529" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb29-1530"><a href="#cb29-1530" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb29-1531"><a href="#cb29-1531" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1532"><a href="#cb29-1532" aria-hidden="true" tabindex="-1"></a>athletes_varying_obs <span class="op">=</span> (</span>
<span id="cb29-1533"><a href="#cb29-1533" aria-hidden="true" tabindex="-1"></a>    train.group_by(<span class="st">"athlete"</span>)</span>
<span id="cb29-1534"><a href="#cb29-1534" aria-hidden="true" tabindex="-1"></a>    .<span class="bu">len</span>()</span>
<span id="cb29-1535"><a href="#cb29-1535" aria-hidden="true" tabindex="-1"></a>    .rename({<span class="st">"len"</span>: <span class="st">"n_obs"</span>})</span>
<span id="cb29-1536"><a href="#cb29-1536" aria-hidden="true" tabindex="-1"></a>    .sort(<span class="st">"n_obs"</span>)</span>
<span id="cb29-1537"><a href="#cb29-1537" aria-hidden="true" tabindex="-1"></a>    .gather_every(<span class="dv">9</span>, offset<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb29-1538"><a href="#cb29-1538" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-1539"><a href="#cb29-1539" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1540"><a href="#cb29-1540" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate 1RM estimates for each athlete (hypothetical 8 reps @ 100kg)</span></span>
<span id="cb29-1541"><a href="#cb29-1541" aria-hidden="true" tabindex="-1"></a>varying_obs_data <span class="op">=</span> []</span>
<span id="cb29-1542"><a href="#cb29-1542" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1543"><a href="#cb29-1543" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> row <span class="kw">in</span> athletes_varying_obs.iter_rows(named<span class="op">=</span><span class="va">True</span>):</span>
<span id="cb29-1544"><a href="#cb29-1544" aria-hidden="true" tabindex="-1"></a>    athlete_id <span class="op">=</span> row[<span class="st">"athlete"</span>]</span>
<span id="cb29-1545"><a href="#cb29-1545" aria-hidden="true" tabindex="-1"></a>    n_obs <span class="op">=</span> row[<span class="st">"n_obs"</span>]</span>
<span id="cb29-1546"><a href="#cb29-1546" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1547"><a href="#cb29-1547" aria-hidden="true" tabindex="-1"></a>    pred <span class="op">=</span> estimate_1rm(modified_epley_trace, athlete_id, weight<span class="op">=</span><span class="dv">100</span>, reps<span class="op">=</span><span class="dv">8</span>)</span>
<span id="cb29-1548"><a href="#cb29-1548" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1549"><a href="#cb29-1549" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> est <span class="kw">in</span> pred[<span class="st">"est_1rm"</span>]:</span>
<span id="cb29-1550"><a href="#cb29-1550" aria-hidden="true" tabindex="-1"></a>        varying_obs_data.append(</span>
<span id="cb29-1551"><a href="#cb29-1551" aria-hidden="true" tabindex="-1"></a>            {</span>
<span id="cb29-1552"><a href="#cb29-1552" aria-hidden="true" tabindex="-1"></a>                <span class="st">"athlete"</span>: athlete_id,</span>
<span id="cb29-1553"><a href="#cb29-1553" aria-hidden="true" tabindex="-1"></a>                <span class="st">"n_obs"</span>: n_obs,</span>
<span id="cb29-1554"><a href="#cb29-1554" aria-hidden="true" tabindex="-1"></a>                <span class="st">"est_1RM"</span>: est,</span>
<span id="cb29-1555"><a href="#cb29-1555" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb29-1556"><a href="#cb29-1556" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb29-1557"><a href="#cb29-1557" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1558"><a href="#cb29-1558" aria-hidden="true" tabindex="-1"></a>varying_obs_df <span class="op">=</span> pd.DataFrame(varying_obs_data)</span>
<span id="cb29-1559"><a href="#cb29-1559" aria-hidden="true" tabindex="-1"></a>varying_obs_df[<span class="st">"label"</span>] <span class="op">=</span> varying_obs_df.<span class="bu">apply</span>(</span>
<span id="cb29-1560"><a href="#cb29-1560" aria-hidden="true" tabindex="-1"></a>    <span class="kw">lambda</span> row: <span class="ss">f"Athlete </span><span class="sc">{</span><span class="bu">int</span>(row[<span class="st">'athlete'</span>])<span class="sc">}</span><span class="ss"> (</span><span class="sc">{</span><span class="bu">int</span>(row[<span class="st">'n_obs'</span>])<span class="sc">}</span><span class="ss"> sets of historical data)"</span>,</span>
<span id="cb29-1561"><a href="#cb29-1561" aria-hidden="true" tabindex="-1"></a>    axis<span class="op">=</span><span class="dv">1</span>,</span>
<span id="cb29-1562"><a href="#cb29-1562" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-1563"><a href="#cb29-1563" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1564"><a href="#cb29-1564" aria-hidden="true" tabindex="-1"></a><span class="co"># Order by n_obs descending for facets</span></span>
<span id="cb29-1565"><a href="#cb29-1565" aria-hidden="true" tabindex="-1"></a>label_order <span class="op">=</span> (</span>
<span id="cb29-1566"><a href="#cb29-1566" aria-hidden="true" tabindex="-1"></a>    varying_obs_df.groupby(<span class="st">"label"</span>, observed<span class="op">=</span><span class="va">True</span>)[<span class="st">"n_obs"</span>]</span>
<span id="cb29-1567"><a href="#cb29-1567" aria-hidden="true" tabindex="-1"></a>    .first()</span>
<span id="cb29-1568"><a href="#cb29-1568" aria-hidden="true" tabindex="-1"></a>    .sort_values(ascending<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb29-1569"><a href="#cb29-1569" aria-hidden="true" tabindex="-1"></a>    .index.tolist()</span>
<span id="cb29-1570"><a href="#cb29-1570" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-1571"><a href="#cb29-1571" aria-hidden="true" tabindex="-1"></a>varying_obs_df[<span class="st">"label"</span>] <span class="op">=</span> pd.Categorical(</span>
<span id="cb29-1572"><a href="#cb29-1572" aria-hidden="true" tabindex="-1"></a>    varying_obs_df[<span class="st">"label"</span>], categories<span class="op">=</span>label_order, ordered<span class="op">=</span><span class="va">True</span></span>
<span id="cb29-1573"><a href="#cb29-1573" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-1574"><a href="#cb29-1574" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1575"><a href="#cb29-1575" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb29-1576"><a href="#cb29-1576" aria-hidden="true" tabindex="-1"></a>    ggplot(varying_obs_df, aes(x<span class="op">=</span><span class="st">"est_1RM"</span>))</span>
<span id="cb29-1577"><a href="#cb29-1577" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> geom_density(fill<span class="op">=</span><span class="st">"#a8c7e6"</span>, alpha<span class="op">=</span><span class="fl">0.8</span>)</span>
<span id="cb29-1578"><a href="#cb29-1578" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> geom_vline(</span>
<span id="cb29-1579"><a href="#cb29-1579" aria-hidden="true" tabindex="-1"></a>        varying_obs_df.groupby(<span class="st">"label"</span>, observed<span class="op">=</span><span class="va">True</span>)[<span class="st">"est_1RM"</span>]</span>
<span id="cb29-1580"><a href="#cb29-1580" aria-hidden="true" tabindex="-1"></a>        .median()</span>
<span id="cb29-1581"><a href="#cb29-1581" aria-hidden="true" tabindex="-1"></a>        .reset_index(),</span>
<span id="cb29-1582"><a href="#cb29-1582" aria-hidden="true" tabindex="-1"></a>        aes(xintercept<span class="op">=</span><span class="st">"est_1RM"</span>),</span>
<span id="cb29-1583"><a href="#cb29-1583" aria-hidden="true" tabindex="-1"></a>        colour<span class="op">=</span><span class="st">"#134A8E"</span>,</span>
<span id="cb29-1584"><a href="#cb29-1584" aria-hidden="true" tabindex="-1"></a>        size<span class="op">=</span><span class="fl">0.8</span>,</span>
<span id="cb29-1585"><a href="#cb29-1585" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb29-1586"><a href="#cb29-1586" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> facet_wrap(<span class="st">"~label"</span>, ncol<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb29-1587"><a href="#cb29-1587" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> scale_x_continuous(labels<span class="op">=</span><span class="kw">lambda</span> x: [<span class="ss">f"</span><span class="sc">{</span>v<span class="sc">:.0f}{</span>units<span class="sc">}</span><span class="ss">"</span> <span class="cf">for</span> v <span class="kw">in</span> x])</span>
<span id="cb29-1588"><a href="#cb29-1588" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> labs(</span>
<span id="cb29-1589"><a href="#cb29-1589" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span><span class="st">"Estimated 1RM"</span>,</span>
<span id="cb29-1590"><a href="#cb29-1590" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span><span class="st">""</span>,</span>
<span id="cb29-1591"><a href="#cb29-1591" aria-hidden="true" tabindex="-1"></a>        title<span class="op">=</span><span class="st">"1RM estimates with more data are usually more confident"</span>,</span>
<span id="cb29-1592"><a href="#cb29-1592" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb29-1593"><a href="#cb29-1593" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> theme_classic()</span>
<span id="cb29-1594"><a href="#cb29-1594" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> theme(</span>
<span id="cb29-1595"><a href="#cb29-1595" aria-hidden="true" tabindex="-1"></a>        axis_text_y<span class="op">=</span>element_blank(),</span>
<span id="cb29-1596"><a href="#cb29-1596" aria-hidden="true" tabindex="-1"></a>        axis_ticks_major_y<span class="op">=</span>element_blank(),</span>
<span id="cb29-1597"><a href="#cb29-1597" aria-hidden="true" tabindex="-1"></a>        axis_title_y<span class="op">=</span>element_blank(),</span>
<span id="cb29-1598"><a href="#cb29-1598" aria-hidden="true" tabindex="-1"></a>        axis_line_y<span class="op">=</span>element_blank(),</span>
<span id="cb29-1599"><a href="#cb29-1599" aria-hidden="true" tabindex="-1"></a>        strip_text<span class="op">=</span>element_text(ha<span class="op">=</span><span class="st">"left"</span>),</span>
<span id="cb29-1600"><a href="#cb29-1600" aria-hidden="true" tabindex="-1"></a>        strip_background<span class="op">=</span>element_blank(),</span>
<span id="cb29-1601"><a href="#cb29-1601" aria-hidden="true" tabindex="-1"></a>        plot_title<span class="op">=</span>element_text(weight<span class="op">=</span><span class="st">"bold"</span>),</span>
<span id="cb29-1602"><a href="#cb29-1602" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb29-1603"><a href="#cb29-1603" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-1604"><a href="#cb29-1604" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb29-1605"><a href="#cb29-1605" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1606"><a href="#cb29-1606" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb29-1607"><a href="#cb29-1607" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1610"><a href="#cb29-1610" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb29-1611"><a href="#cb29-1611" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb29-1612"><a href="#cb29-1612" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb29-1613"><a href="#cb29-1613" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-asp: 1</span></span>
<span id="cb29-1614"><a href="#cb29-1614" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1615"><a href="#cb29-1615" aria-hidden="true" tabindex="-1"></a>historical_data_plot</span>
<span id="cb29-1616"><a href="#cb29-1616" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb29-1617"><a href="#cb29-1617" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1618"><a href="#cb29-1618" aria-hidden="true" tabindex="-1"></a><span class="fu">## How much accuracy do you lose with higher rep sets?</span></span>
<span id="cb29-1619"><a href="#cb29-1619" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1620"><a href="#cb29-1620" aria-hidden="true" tabindex="-1"></a>The further a max reps set is from a true 1RM, the more the model has to extrapolate to provide an estimate. This extrapolation causes uncertainty in the 1RM estimates to compound. This is intuitive; predicting the weather a few hours from now isn't impressive, but forecasting days or weeks in advance is much harder and carries a lot more uncertainty because of the added time for conditions to stray from your expectations.</span>
<span id="cb29-1621"><a href="#cb29-1621" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1622"><a href="#cb29-1622" aria-hidden="true" tabindex="-1"></a>Same idea here. Heavy sets where only 2–5 reps are completed are more representative of what your 1RM actually is.</span>
<span id="cb29-1623"><a href="#cb29-1623" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1624"><a href="#cb29-1624" aria-hidden="true" tabindex="-1"></a>::: {.panel-tabset group="language"}</span>
<span id="cb29-1625"><a href="#cb29-1625" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1626"><a href="#cb29-1626" aria-hidden="true" tabindex="-1"></a><span class="fu">## ![](/img/Rlogo.svg){height=25}</span></span>
<span id="cb29-1629"><a href="#cb29-1629" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb29-1630"><a href="#cb29-1630" aria-hidden="true" tabindex="-1"></a><span class="co">#| output: false</span></span>
<span id="cb29-1631"><a href="#cb29-1631" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1632"><a href="#cb29-1632" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">2534</span>)</span>
<span id="cb29-1633"><a href="#cb29-1633" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1634"><a href="#cb29-1634" aria-hidden="true" tabindex="-1"></a>rep_count_plot_athlete <span class="ot">&lt;-</span> <span class="dv">6</span></span>
<span id="cb29-1635"><a href="#cb29-1635" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1636"><a href="#cb29-1636" aria-hidden="true" tabindex="-1"></a>rep_count_plot_athlete_data <span class="ot">&lt;-</span> train <span class="sc">|&gt;</span></span>
<span id="cb29-1637"><a href="#cb29-1637" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(athlete <span class="sc">==</span> rep_count_plot_athlete) <span class="sc">|&gt;</span></span>
<span id="cb29-1638"><a href="#cb29-1638" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb29-1639"><a href="#cb29-1639" aria-hidden="true" tabindex="-1"></a>    <span class="at">rep_bin =</span> <span class="fu">case_when</span>(</span>
<span id="cb29-1640"><a href="#cb29-1640" aria-hidden="true" tabindex="-1"></a>      reps <span class="sc">&lt;=</span> <span class="dv">5</span> <span class="sc">~</span> <span class="st">"low"</span>,</span>
<span id="cb29-1641"><a href="#cb29-1641" aria-hidden="true" tabindex="-1"></a>      reps <span class="sc">&lt;=</span> <span class="dv">10</span> <span class="sc">~</span> <span class="st">"mid"</span>,</span>
<span id="cb29-1642"><a href="#cb29-1642" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"high"</span></span>
<span id="cb29-1643"><a href="#cb29-1643" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb29-1644"><a href="#cb29-1644" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb29-1645"><a href="#cb29-1645" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(rep_bin) <span class="sc">|&gt;</span></span>
<span id="cb29-1646"><a href="#cb29-1646" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">1</span>) <span class="sc">|&gt;</span></span>
<span id="cb29-1647"><a href="#cb29-1647" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb29-1648"><a href="#cb29-1648" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1649"><a href="#cb29-1649" aria-hidden="true" tabindex="-1"></a>rep_count_plot_athlete_1RM <span class="ot">&lt;-</span> rep_count_plot_athlete_data<span class="sc">$</span>orm[<span class="dv">1</span>]</span>
<span id="cb29-1650"><a href="#cb29-1650" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1651"><a href="#cb29-1651" aria-hidden="true" tabindex="-1"></a>rep_count_plot_data <span class="ot">&lt;-</span> rep_count_plot_athlete_data <span class="sc">|&gt;</span></span>
<span id="cb29-1652"><a href="#cb29-1652" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pmap_dfr</span>(\(reps, weight, ...) {</span>
<span id="cb29-1653"><a href="#cb29-1653" aria-hidden="true" tabindex="-1"></a>    <span class="fu">estimate_1rm</span>(</span>
<span id="cb29-1654"><a href="#cb29-1654" aria-hidden="true" tabindex="-1"></a>      modified_epley_model_fit,</span>
<span id="cb29-1655"><a href="#cb29-1655" aria-hidden="true" tabindex="-1"></a>      <span class="at">athlete_id =</span> rep_count_plot_athlete,</span>
<span id="cb29-1656"><a href="#cb29-1656" aria-hidden="true" tabindex="-1"></a>      <span class="at">weight =</span> weight,</span>
<span id="cb29-1657"><a href="#cb29-1657" aria-hidden="true" tabindex="-1"></a>      <span class="at">reps =</span> reps</span>
<span id="cb29-1658"><a href="#cb29-1658" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span></span>
<span id="cb29-1659"><a href="#cb29-1659" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="at">scenario =</span> <span class="fu">paste0</span>(reps, <span class="st">" reps @ "</span>, <span class="fu">round</span>(weight, <span class="dv">0</span>), units))</span>
<span id="cb29-1660"><a href="#cb29-1660" aria-hidden="true" tabindex="-1"></a>  }) <span class="sc">|&gt;</span></span>
<span id="cb29-1661"><a href="#cb29-1661" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">scenario =</span> <span class="fu">fct_reorder</span>(scenario, <span class="fu">parse_number</span>(scenario)))</span>
<span id="cb29-1662"><a href="#cb29-1662" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1663"><a href="#cb29-1663" aria-hidden="true" tabindex="-1"></a>scenario_levels <span class="ot">&lt;-</span> <span class="fu">levels</span>(<span class="fu">factor</span>(rep_count_plot_data<span class="sc">$</span>scenario))</span>
<span id="cb29-1664"><a href="#cb29-1664" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1665"><a href="#cb29-1665" aria-hidden="true" tabindex="-1"></a>rep_count_plot_annotations <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb29-1666"><a href="#cb29-1666" aria-hidden="true" tabindex="-1"></a>  <span class="at">scenario =</span> <span class="fu">factor</span>(scenario_levels, <span class="at">levels =</span> scenario_levels),</span>
<span id="cb29-1667"><a href="#cb29-1667" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> rep_count_plot_athlete_1RM <span class="sc">-</span> <span class="fl">0.1</span>,</span>
<span id="cb29-1668"><a href="#cb29-1668" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> <span class="dv">1</span>,</span>
<span id="cb29-1669"><a href="#cb29-1669" aria-hidden="true" tabindex="-1"></a>  <span class="at">true_1RM_label =</span> <span class="fu">c</span>(<span class="st">"True 1RM"</span>, <span class="cn">NA</span>, <span class="cn">NA</span>),</span>
<span id="cb29-1670"><a href="#cb29-1670" aria-hidden="true" tabindex="-1"></a>  <span class="at">annotation =</span> <span class="fu">c</span>(</span>
<span id="cb29-1671"><a href="#cb29-1671" aria-hidden="true" tabindex="-1"></a>    <span class="st">"3 rep set → more confident"</span>,</span>
<span id="cb29-1672"><a href="#cb29-1672" aria-hidden="true" tabindex="-1"></a>    <span class="cn">NA</span>,</span>
<span id="cb29-1673"><a href="#cb29-1673" aria-hidden="true" tabindex="-1"></a>    <span class="st">"13 rep set → less confident"</span></span>
<span id="cb29-1674"><a href="#cb29-1674" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb29-1675"><a href="#cb29-1675" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-1676"><a href="#cb29-1676" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1677"><a href="#cb29-1677" aria-hidden="true" tabindex="-1"></a>rep_count_plot <span class="ot">&lt;-</span> rep_count_plot_data <span class="sc">|&gt;</span></span>
<span id="cb29-1678"><a href="#cb29-1678" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> est_1RM)) <span class="sc">+</span></span>
<span id="cb29-1679"><a href="#cb29-1679" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>scenario, <span class="at">ncol =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb29-1680"><a href="#cb29-1680" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_slab</span>(<span class="at">fill =</span> <span class="fu">lighten</span>(colours[<span class="dv">2</span>], <span class="fl">0.75</span>)) <span class="sc">+</span></span>
<span id="cb29-1681"><a href="#cb29-1681" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_spike</span>(<span class="at">at =</span> <span class="st">"median"</span>, <span class="at">size =</span> <span class="dv">0</span>, <span class="at">colour =</span> colours[<span class="dv">2</span>]) <span class="sc">+</span></span>
<span id="cb29-1682"><a href="#cb29-1682" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_thickness_shared</span>() <span class="sc">+</span></span>
<span id="cb29-1683"><a href="#cb29-1683" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">colour =</span> <span class="st">"grey50"</span>, <span class="at">linewidth =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb29-1684"><a href="#cb29-1684" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(</span>
<span id="cb29-1685"><a href="#cb29-1685" aria-hidden="true" tabindex="-1"></a>    <span class="at">xintercept =</span> rep_count_plot_athlete_1RM,</span>
<span id="cb29-1686"><a href="#cb29-1686" aria-hidden="true" tabindex="-1"></a>    <span class="at">colour =</span> colours[<span class="dv">1</span>],</span>
<span id="cb29-1687"><a href="#cb29-1687" aria-hidden="true" tabindex="-1"></a>    <span class="at">linetype =</span> <span class="st">"dashed"</span>,</span>
<span id="cb29-1688"><a href="#cb29-1688" aria-hidden="true" tabindex="-1"></a>    <span class="at">linewidth =</span> <span class="fl">0.5</span></span>
<span id="cb29-1689"><a href="#cb29-1689" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb29-1690"><a href="#cb29-1690" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_richtext</span>(</span>
<span id="cb29-1691"><a href="#cb29-1691" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> rep_count_plot_annotations,</span>
<span id="cb29-1692"><a href="#cb29-1692" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">label =</span> true_1RM_label),</span>
<span id="cb29-1693"><a href="#cb29-1693" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="cn">NA</span>,</span>
<span id="cb29-1694"><a href="#cb29-1694" aria-hidden="true" tabindex="-1"></a>    <span class="at">colour =</span> colours[<span class="dv">1</span>],</span>
<span id="cb29-1695"><a href="#cb29-1695" aria-hidden="true" tabindex="-1"></a>    <span class="at">label.color =</span> <span class="cn">NA</span>,</span>
<span id="cb29-1696"><a href="#cb29-1696" aria-hidden="true" tabindex="-1"></a>    <span class="at">hjust =</span> <span class="dv">1</span>,</span>
<span id="cb29-1697"><a href="#cb29-1697" aria-hidden="true" tabindex="-1"></a>    <span class="at">family =</span> <span class="st">"Myriad Pro Regular"</span></span>
<span id="cb29-1698"><a href="#cb29-1698" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb29-1699"><a href="#cb29-1699" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_richtext</span>(</span>
<span id="cb29-1700"><a href="#cb29-1700" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> rep_count_plot_annotations,</span>
<span id="cb29-1701"><a href="#cb29-1701" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x =</span> x <span class="sc">+</span> <span class="fl">4.5</span>, <span class="at">y =</span> <span class="fl">0.4</span>, <span class="at">label =</span> annotation),</span>
<span id="cb29-1702"><a href="#cb29-1702" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="cn">NA</span>,</span>
<span id="cb29-1703"><a href="#cb29-1703" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="fl">4.5</span>,</span>
<span id="cb29-1704"><a href="#cb29-1704" aria-hidden="true" tabindex="-1"></a>    <span class="at">colour =</span> <span class="st">"grey35"</span>,</span>
<span id="cb29-1705"><a href="#cb29-1705" aria-hidden="true" tabindex="-1"></a>    <span class="at">label.color =</span> <span class="cn">NA</span>,</span>
<span id="cb29-1706"><a href="#cb29-1706" aria-hidden="true" tabindex="-1"></a>    <span class="at">family =</span> <span class="st">"Myriad Pro Regular"</span></span>
<span id="cb29-1707"><a href="#cb29-1707" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb29-1708"><a href="#cb29-1708" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb29-1709"><a href="#cb29-1709" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Estimated 1RM (kg)"</span>,</span>
<span id="cb29-1710"><a href="#cb29-1710" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="cn">NULL</span>,</span>
<span id="cb29-1711"><a href="#cb29-1711" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"1RM estimates are more confident with lower rep sets"</span>,</span>
<span id="cb29-1712"><a href="#cb29-1712" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="fu">paste0</span>(</span>
<span id="cb29-1713"><a href="#cb29-1713" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Athlete "</span>,</span>
<span id="cb29-1714"><a href="#cb29-1714" aria-hidden="true" tabindex="-1"></a>      rep_count_plot_athlete,</span>
<span id="cb29-1715"><a href="#cb29-1715" aria-hidden="true" tabindex="-1"></a>      <span class="st">" | Max rep sets from simulated training data"</span></span>
<span id="cb29-1716"><a href="#cb29-1716" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb29-1717"><a href="#cb29-1717" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> socials</span>
<span id="cb29-1718"><a href="#cb29-1718" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb29-1719"><a href="#cb29-1719" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(</span>
<span id="cb29-1720"><a href="#cb29-1720" aria-hidden="true" tabindex="-1"></a>    <span class="at">labels =</span> <span class="fu">label_number</span>(<span class="at">suffix =</span> units),</span>
<span id="cb29-1721"><a href="#cb29-1721" aria-hidden="true" tabindex="-1"></a>    <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">122</span>, <span class="dv">137</span>)</span>
<span id="cb29-1722"><a href="#cb29-1722" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb29-1723"><a href="#cb29-1723" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb29-1724"><a href="#cb29-1724" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb29-1725"><a href="#cb29-1725" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb29-1726"><a href="#cb29-1726" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.line =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb29-1727"><a href="#cb29-1727" aria-hidden="true" tabindex="-1"></a>    <span class="at">strip.background =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb29-1728"><a href="#cb29-1728" aria-hidden="true" tabindex="-1"></a>    <span class="at">strip.text =</span> <span class="fu">element_markdown</span>(<span class="at">family =</span> <span class="st">"Myriad Pro Regular"</span>, <span class="at">hjust =</span> <span class="dv">0</span>)</span>
<span id="cb29-1729"><a href="#cb29-1729" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb29-1730"><a href="#cb29-1730" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1731"><a href="#cb29-1731" aria-hidden="true" tabindex="-1"></a>rep_count_plot</span>
<span id="cb29-1732"><a href="#cb29-1732" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb29-1733"><a href="#cb29-1733" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1734"><a href="#cb29-1734" aria-hidden="true" tabindex="-1"></a><span class="fu">## ![](/img/python-logo-only.svg){height=30}</span></span>
<span id="cb29-1737"><a href="#cb29-1737" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb29-1738"><a href="#cb29-1738" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb29-1739"><a href="#cb29-1739" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1740"><a href="#cb29-1740" aria-hidden="true" tabindex="-1"></a>np.random.seed(<span class="dv">2534</span>)</span>
<span id="cb29-1741"><a href="#cb29-1741" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1742"><a href="#cb29-1742" aria-hidden="true" tabindex="-1"></a><span class="co"># Pick an athlete</span></span>
<span id="cb29-1743"><a href="#cb29-1743" aria-hidden="true" tabindex="-1"></a>rep_count_plot_athlete <span class="op">=</span> <span class="dv">6</span></span>
<span id="cb29-1744"><a href="#cb29-1744" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1745"><a href="#cb29-1745" aria-hidden="true" tabindex="-1"></a><span class="co"># Get their data and sample one set from each rep bin</span></span>
<span id="cb29-1746"><a href="#cb29-1746" aria-hidden="true" tabindex="-1"></a>rep_count_athlete_data <span class="op">=</span> (</span>
<span id="cb29-1747"><a href="#cb29-1747" aria-hidden="true" tabindex="-1"></a>    train.<span class="bu">filter</span>(pl.col(<span class="st">"athlete"</span>) <span class="op">==</span> rep_count_plot_athlete)</span>
<span id="cb29-1748"><a href="#cb29-1748" aria-hidden="true" tabindex="-1"></a>    .with_columns(</span>
<span id="cb29-1749"><a href="#cb29-1749" aria-hidden="true" tabindex="-1"></a>        pl.when(pl.col(<span class="st">"reps"</span>) <span class="op">&lt;=</span> <span class="dv">5</span>)</span>
<span id="cb29-1750"><a href="#cb29-1750" aria-hidden="true" tabindex="-1"></a>        .then(pl.lit(<span class="st">"low"</span>))</span>
<span id="cb29-1751"><a href="#cb29-1751" aria-hidden="true" tabindex="-1"></a>        .when(pl.col(<span class="st">"reps"</span>) <span class="op">&lt;=</span> <span class="dv">10</span>)</span>
<span id="cb29-1752"><a href="#cb29-1752" aria-hidden="true" tabindex="-1"></a>        .then(pl.lit(<span class="st">"mid"</span>))</span>
<span id="cb29-1753"><a href="#cb29-1753" aria-hidden="true" tabindex="-1"></a>        .otherwise(pl.lit(<span class="st">"high"</span>))</span>
<span id="cb29-1754"><a href="#cb29-1754" aria-hidden="true" tabindex="-1"></a>        .alias(<span class="st">"rep_bin"</span>)</span>
<span id="cb29-1755"><a href="#cb29-1755" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb29-1756"><a href="#cb29-1756" aria-hidden="true" tabindex="-1"></a>    .group_by(<span class="st">"rep_bin"</span>)</span>
<span id="cb29-1757"><a href="#cb29-1757" aria-hidden="true" tabindex="-1"></a>    .agg(pl.<span class="bu">all</span>().sample(n<span class="op">=</span><span class="dv">1</span>, seed<span class="op">=</span><span class="dv">2534</span>))</span>
<span id="cb29-1758"><a href="#cb29-1758" aria-hidden="true" tabindex="-1"></a>    .explode(pl.exclude(<span class="st">"rep_bin"</span>))</span>
<span id="cb29-1759"><a href="#cb29-1759" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-1760"><a href="#cb29-1760" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1761"><a href="#cb29-1761" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate predictions for each set</span></span>
<span id="cb29-1762"><a href="#cb29-1762" aria-hidden="true" tabindex="-1"></a>rep_count_data <span class="op">=</span> []</span>
<span id="cb29-1763"><a href="#cb29-1763" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1764"><a href="#cb29-1764" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> row <span class="kw">in</span> rep_count_athlete_data.iter_rows(named<span class="op">=</span><span class="va">True</span>):</span>
<span id="cb29-1765"><a href="#cb29-1765" aria-hidden="true" tabindex="-1"></a>    pred <span class="op">=</span> estimate_1rm(</span>
<span id="cb29-1766"><a href="#cb29-1766" aria-hidden="true" tabindex="-1"></a>        modified_epley_trace,</span>
<span id="cb29-1767"><a href="#cb29-1767" aria-hidden="true" tabindex="-1"></a>        athlete_id<span class="op">=</span>rep_count_plot_athlete,</span>
<span id="cb29-1768"><a href="#cb29-1768" aria-hidden="true" tabindex="-1"></a>        weight<span class="op">=</span>row[<span class="st">"weight"</span>],</span>
<span id="cb29-1769"><a href="#cb29-1769" aria-hidden="true" tabindex="-1"></a>        reps<span class="op">=</span>row[<span class="st">"reps"</span>],</span>
<span id="cb29-1770"><a href="#cb29-1770" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb29-1771"><a href="#cb29-1771" aria-hidden="true" tabindex="-1"></a>    scenario <span class="op">=</span> <span class="ss">f"</span><span class="sc">{</span>row[<span class="st">'reps'</span>]<span class="sc">}</span><span class="ss"> reps @ </span><span class="sc">{</span><span class="bu">round</span>(row[<span class="st">'weight'</span>])<span class="sc">}{</span>units<span class="sc">}</span><span class="ss">"</span></span>
<span id="cb29-1772"><a href="#cb29-1772" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1773"><a href="#cb29-1773" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> est <span class="kw">in</span> pred[<span class="st">"est_1rm"</span>]:</span>
<span id="cb29-1774"><a href="#cb29-1774" aria-hidden="true" tabindex="-1"></a>        rep_count_data.append(</span>
<span id="cb29-1775"><a href="#cb29-1775" aria-hidden="true" tabindex="-1"></a>            {</span>
<span id="cb29-1776"><a href="#cb29-1776" aria-hidden="true" tabindex="-1"></a>                <span class="st">"reps"</span>: row[<span class="st">"reps"</span>],</span>
<span id="cb29-1777"><a href="#cb29-1777" aria-hidden="true" tabindex="-1"></a>                <span class="st">"scenario"</span>: scenario,</span>
<span id="cb29-1778"><a href="#cb29-1778" aria-hidden="true" tabindex="-1"></a>                <span class="st">"est_1RM"</span>: est,</span>
<span id="cb29-1779"><a href="#cb29-1779" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb29-1780"><a href="#cb29-1780" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb29-1781"><a href="#cb29-1781" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1782"><a href="#cb29-1782" aria-hidden="true" tabindex="-1"></a>rep_count_df <span class="op">=</span> pd.DataFrame(rep_count_data)</span>
<span id="cb29-1783"><a href="#cb29-1783" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1784"><a href="#cb29-1784" aria-hidden="true" tabindex="-1"></a><span class="co"># Order scenarios by rep count</span></span>
<span id="cb29-1785"><a href="#cb29-1785" aria-hidden="true" tabindex="-1"></a>scenario_order <span class="op">=</span> (</span>
<span id="cb29-1786"><a href="#cb29-1786" aria-hidden="true" tabindex="-1"></a>    rep_count_df.groupby(<span class="st">"scenario"</span>, observed<span class="op">=</span><span class="va">True</span>)[<span class="st">"reps"</span>]</span>
<span id="cb29-1787"><a href="#cb29-1787" aria-hidden="true" tabindex="-1"></a>    .first()</span>
<span id="cb29-1788"><a href="#cb29-1788" aria-hidden="true" tabindex="-1"></a>    .sort_values()</span>
<span id="cb29-1789"><a href="#cb29-1789" aria-hidden="true" tabindex="-1"></a>    .index.tolist()</span>
<span id="cb29-1790"><a href="#cb29-1790" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-1791"><a href="#cb29-1791" aria-hidden="true" tabindex="-1"></a>rep_count_df[<span class="st">"scenario"</span>] <span class="op">=</span> pd.Categorical(</span>
<span id="cb29-1792"><a href="#cb29-1792" aria-hidden="true" tabindex="-1"></a>    rep_count_df[<span class="st">"scenario"</span>], categories<span class="op">=</span>scenario_order, ordered<span class="op">=</span><span class="va">True</span></span>
<span id="cb29-1793"><a href="#cb29-1793" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-1794"><a href="#cb29-1794" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1795"><a href="#cb29-1795" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb29-1796"><a href="#cb29-1796" aria-hidden="true" tabindex="-1"></a>    ggplot(rep_count_df, aes(x<span class="op">=</span><span class="st">"est_1RM"</span>))</span>
<span id="cb29-1797"><a href="#cb29-1797" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> geom_density(fill<span class="op">=</span><span class="st">"#a8c7e6"</span>, alpha<span class="op">=</span><span class="fl">0.8</span>)</span>
<span id="cb29-1798"><a href="#cb29-1798" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> geom_vline(</span>
<span id="cb29-1799"><a href="#cb29-1799" aria-hidden="true" tabindex="-1"></a>        rep_count_df.groupby(<span class="st">"scenario"</span>, observed<span class="op">=</span><span class="va">True</span>)[<span class="st">"est_1RM"</span>]</span>
<span id="cb29-1800"><a href="#cb29-1800" aria-hidden="true" tabindex="-1"></a>        .median()</span>
<span id="cb29-1801"><a href="#cb29-1801" aria-hidden="true" tabindex="-1"></a>        .reset_index(),</span>
<span id="cb29-1802"><a href="#cb29-1802" aria-hidden="true" tabindex="-1"></a>        aes(xintercept<span class="op">=</span><span class="st">"est_1RM"</span>),</span>
<span id="cb29-1803"><a href="#cb29-1803" aria-hidden="true" tabindex="-1"></a>        colour<span class="op">=</span><span class="st">"#134A8E"</span>,</span>
<span id="cb29-1804"><a href="#cb29-1804" aria-hidden="true" tabindex="-1"></a>        size<span class="op">=</span><span class="fl">0.8</span>,</span>
<span id="cb29-1805"><a href="#cb29-1805" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb29-1806"><a href="#cb29-1806" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> facet_wrap(<span class="st">"~scenario"</span>, ncol<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb29-1807"><a href="#cb29-1807" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> scale_x_continuous(labels<span class="op">=</span><span class="kw">lambda</span> x: [<span class="ss">f"</span><span class="sc">{</span>v<span class="sc">:.0f}{</span>units<span class="sc">}</span><span class="ss">"</span> <span class="cf">for</span> v <span class="kw">in</span> x])</span>
<span id="cb29-1808"><a href="#cb29-1808" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> labs(</span>
<span id="cb29-1809"><a href="#cb29-1809" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span><span class="st">"Estimated 1RM"</span>,</span>
<span id="cb29-1810"><a href="#cb29-1810" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span><span class="st">""</span>,</span>
<span id="cb29-1811"><a href="#cb29-1811" aria-hidden="true" tabindex="-1"></a>        title<span class="op">=</span><span class="st">"1RM estimates are more confident with lower rep sets"</span>,</span>
<span id="cb29-1812"><a href="#cb29-1812" aria-hidden="true" tabindex="-1"></a>        subtitle<span class="op">=</span><span class="ss">f"Athlete </span><span class="sc">{</span>rep_count_plot_athlete<span class="sc">}</span><span class="ss"> | Max rep sets from simulated training data"</span>,</span>
<span id="cb29-1813"><a href="#cb29-1813" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb29-1814"><a href="#cb29-1814" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> theme_classic()</span>
<span id="cb29-1815"><a href="#cb29-1815" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> theme(</span>
<span id="cb29-1816"><a href="#cb29-1816" aria-hidden="true" tabindex="-1"></a>        axis_text_y<span class="op">=</span>element_blank(),</span>
<span id="cb29-1817"><a href="#cb29-1817" aria-hidden="true" tabindex="-1"></a>        axis_ticks_major_y<span class="op">=</span>element_blank(),</span>
<span id="cb29-1818"><a href="#cb29-1818" aria-hidden="true" tabindex="-1"></a>        axis_title_y<span class="op">=</span>element_blank(),</span>
<span id="cb29-1819"><a href="#cb29-1819" aria-hidden="true" tabindex="-1"></a>        axis_line_y<span class="op">=</span>element_blank(),</span>
<span id="cb29-1820"><a href="#cb29-1820" aria-hidden="true" tabindex="-1"></a>        strip_text<span class="op">=</span>element_text(ha<span class="op">=</span><span class="st">"left"</span>),</span>
<span id="cb29-1821"><a href="#cb29-1821" aria-hidden="true" tabindex="-1"></a>        strip_background<span class="op">=</span>element_blank(),</span>
<span id="cb29-1822"><a href="#cb29-1822" aria-hidden="true" tabindex="-1"></a>        plot_title<span class="op">=</span>element_text(weight<span class="op">=</span><span class="st">"bold"</span>),</span>
<span id="cb29-1823"><a href="#cb29-1823" aria-hidden="true" tabindex="-1"></a>        plot_subtitle<span class="op">=</span>element_text(color<span class="op">=</span><span class="st">"grey"</span>),</span>
<span id="cb29-1824"><a href="#cb29-1824" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb29-1825"><a href="#cb29-1825" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-1826"><a href="#cb29-1826" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb29-1827"><a href="#cb29-1827" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1828"><a href="#cb29-1828" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb29-1829"><a href="#cb29-1829" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1832"><a href="#cb29-1832" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb29-1833"><a href="#cb29-1833" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-asp: 1</span></span>
<span id="cb29-1834"><a href="#cb29-1834" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb29-1835"><a href="#cb29-1835" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb29-1836"><a href="#cb29-1836" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1837"><a href="#cb29-1837" aria-hidden="true" tabindex="-1"></a>rep_count_plot</span>
<span id="cb29-1838"><a href="#cb29-1838" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb29-1839"><a href="#cb29-1839" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1840"><a href="#cb29-1840" aria-hidden="true" tabindex="-1"></a><span class="fu">## Integrating this</span></span>
<span id="cb29-1841"><a href="#cb29-1841" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1842"><a href="#cb29-1842" aria-hidden="true" tabindex="-1"></a>Integrating this into a larger system would involve deploying the model to a server so that estimates can be requested on demand. Analysis tools (R, Python, Excel via Power Query, etc) would send athlete data to the model and receive 1RM estimates in return. From there, you'd set up the model to refit on a schedule so that estimates stay current and are available whenever you're programming or reviewing training.</span>
<span id="cb29-1843"><a href="#cb29-1843" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1844"><a href="#cb29-1844" aria-hidden="true" tabindex="-1"></a><span class="fu">## Conclusion</span></span>
<span id="cb29-1845"><a href="#cb29-1845" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1846"><a href="#cb29-1846" aria-hidden="true" tabindex="-1"></a>My simulated data might not align with the patterns in real training data, but I think the idea that some athletes can do heavy weight well while others do higher reps well is valid and should/can be captured when you're estimating 1RM from a submaximal set for max reps.</span>
<span id="cb29-1847"><a href="#cb29-1847" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1848"><a href="#cb29-1848" aria-hidden="true" tabindex="-1"></a>Key takeaways:</span>
<span id="cb29-1849"><a href="#cb29-1849" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1850"><a href="#cb29-1850" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Athletes have different characteristics that statistical models can learn and account for when making inferences or predictions.</span>
<span id="cb29-1851"><a href="#cb29-1851" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1852"><a href="#cb29-1852" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Quantifying uncertainty helps us make better decisions. Especially knowing when we don't have enough information to act confidently.</span>
<span id="cb29-1853"><a href="#cb29-1853" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1854"><a href="#cb29-1854" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Models like this can be fit to your athletes' data, updated automatically as new training results come in, and integrated into your programming or monitoring workflows.</span>
</code><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->




</body></html>